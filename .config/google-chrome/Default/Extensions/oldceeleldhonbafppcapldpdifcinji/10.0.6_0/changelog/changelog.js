(()=>{var e={4629:function(e,t){var r,n,s;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[e],r=function(e){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const t="The message port closed before a response was received.",r=e=>{const r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(r).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class n extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const s=e=>e&&"object"==typeof e&&"function"==typeof e.then,i=(t,r)=>(...n)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):r.singleCallbackArg||n.length<=1&&!1!==r.singleCallbackArg?t.resolve(n[0]):t.resolve(n)},a=e=>1==e?"argument":"arguments",o=(e,t)=>function(r,...n){if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise((s,a)=>{if(t.fallbackToNoCallback)try{r[e](...n,i({resolve:s,reject:a},t))}catch(i){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,i),r[e](...n),t.fallbackToNoCallback=!1,t.noCallback=!0,s()}else t.noCallback?(r[e](...n),s()):r[e](...n,i({resolve:s,reject:a},t))})},c=(e,t,r)=>new Proxy(t,{apply:(t,n,s)=>r.call(n,e,...s)});let l=Function.call.bind(Object.prototype.hasOwnProperty);const g=(e,t={},r={})=>{let n=Object.create(null),s={has:(t,r)=>r in e||r in n,get(s,i,a){if(i in n)return n[i];if(!(i in e))return;let u=e[i];if("function"==typeof u)if("function"==typeof t[i])u=c(e,e[i],t[i]);else if(l(r,i)){let t=o(i,r[i]);u=c(e,e[i],t)}else u=u.bind(e);else if("object"==typeof u&&null!==u&&(l(t,i)||l(r,i)))u=g(u,t[i],r[i]);else{if(!l(r,"*"))return Object.defineProperty(n,i,{configurable:!0,enumerable:!0,get:()=>e[i],set(t){e[i]=t}}),u;u=g(u,t[i],r["*"])}return n[i]=u,u},set:(t,r,s,i)=>(r in n?n[r]=s:e[r]=s,!0),defineProperty:(e,t,r)=>Reflect.defineProperty(n,t,r),deleteProperty:(e,t)=>Reflect.deleteProperty(n,t)},i=Object.create(e);return new Proxy(i,s)},u=e=>({addListener(t,r,...n){t.addListener(e.get(r),...n)},hasListener:(t,r)=>t.hasListener(e.get(r)),removeListener(t,r){t.removeListener(e.get(r))}}),d=new n(e=>"function"!=typeof e?e:function(t){const r=g(t,{},{getContent:{minArgs:0,maxArgs:0}});e(r)}),h=new n(e=>"function"!=typeof e?e:function(t,r,n){let i,a,o=!1,c=new Promise(e=>{i=function(t){o=!0,e(t)}});try{a=e(t,r,i)}catch(e){a=Promise.reject(e)}const l=!0!==a&&s(a);if(!0!==a&&!l&&!o)return!1;const g=e=>{e.then(e=>{n(e)},e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",n({__mozWebExtensionPolyfillReject__:!0,message:t})}).catch(e=>{console.error("Failed to send onMessage rejected reply",e)})};return g(l?a:c),!0}),m=({reject:r,resolve:n},s)=>{e.runtime.lastError?e.runtime.lastError.message===t?n():r(new Error(e.runtime.lastError.message)):s&&s.__mozWebExtensionPolyfillReject__?r(new Error(s.message)):n(s)},p=(e,t,r,...n)=>{if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise((e,t)=>{const s=m.bind(null,{resolve:e,reject:t});n.push(s),r.sendMessage(...n)})},_={devtools:{network:{onRequestFinished:u(d)}},runtime:{onMessage:u(h),onMessageExternal:u(h),sendMessage:p.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:p.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},E={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":E},services:{"*":E},websites:{"*":E}},g(e,_,r)};e.exports=r(chrome)}else e.exports=globalThis.browser},void 0===(s="function"==typeof r?r.apply(t,n):r)||(e.exports=s)},6326:(e,t,r)=>{"use strict";r(8249)},8249:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;
/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,_={};function E(e,t,r){this.props=e,this.context=t,this.refs=_,this.updater=r||m}function f(){}function S(e,t,r){this.props=e,this.context=t,this.refs=_,this.updater=r||m}E.prototype.isReactComponent={},E.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},E.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},f.prototype=E.prototype;var A=S.prototype=new f;A.constructor=S,p(A,E.prototype),A.isPureReactComponent=!0;var T=Array.isArray,R=Object.prototype.hasOwnProperty,I={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,n){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)R.call(t,s)&&!C.hasOwnProperty(s)&&(i[s]=t[s]);var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){for(var l=Array(c),g=0;g<c;g++)l[g]=arguments[g+2];i.children=l}if(e&&e.defaultProps)for(s in c=e.defaultProps)void 0===i[s]&&(i[s]=c[s]);return{$$typeof:r,type:e,key:a,ref:o,props:i,_owner:I.current}}function L(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var b=/\/+/g;function y(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function N(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var c=!1;if(null===e)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case n:c=!0}}if(c)return a=a(c=e),e=""===i?"."+y(c,0):i,T(a)?(s="",null!=e&&(s=e.replace(b,"$&/")+"/"),N(a,t,s,"",function(e){return e})):null!=a&&(L(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(b,"$&/")+"/")+e)),t.push(a)),1;if(c=0,i=""===i?".":i+":",T(e))for(var l=0;l<e.length;l++){var g=i+y(o=e[l],l);c+=N(o,t,s,g,a)}else if(g=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"==typeof g)for(e=g.call(e),l=0;!(o=e.next()).done;)c+=N(o=o.value,t,s,g=i+y(o,l++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function O(e,t,r){if(null==e)return e;var n=[],s=0;return N(e,n,"","",function(e){return t.call(r,e,s++)}),n}function x(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var v={current:null},D={transition:null};function k(){throw Error("act(...) is not supported in production builds of React.")}}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e;!function(e){e.CHROME_EXTENSION_ID="CHROME_EXTENSION_ID",e.SHOW_PARTIAL_RECO_UNDERLINE="SHOW_PARTIAL_RECO_UNDERLINE",e.EXTN_PREFIX="EVENT_PREFIX",e.COLORS_GRAMMAR="COLORS_GRAMMAR",e.CARD_LAYOUT="CARD_LAYOUT",e.COLORS_SPELLING="COLORS_SPELLING",e.COLORS_STYLE="COLORS_LONG_SENTENCE",e.SUPPORTED_LANGUAGES="SUPPORTED_LANGUAGES",e.INSTALLED_ATTRIBUTE="INSTALLED_ATTRIBUTE",e.SITE_INIT_ATTRIBUTE="SITE_INIT_ATTRIBUTE",e.INPUT_AREA_INIT_ATTRIBUTE="INPUT_AREA_INIT_ATTRIBUTE",e.TMP_ID_ATTRIBUTE="TMP_ID_ATTRIBUTE",e.AI_RULE_ID_REGEX="AI_RULE_ID_REGEX",e.COLORS_PARAPHRASE="COLORS_PARAPHRASE",e.COLORS_RECOMMENDATION="COLORS_RECOMMENDATION",e.COLORS_RECOMMENDATION_TEASE="COLORS_RECOMMENDATION_TEASE",e.VALID_START_SENTENCE_REGEX="VALID_START_SENTENCE_REGEX",e.VALID_END_SENTENCE_REGEX="VALID_END_SENTENCE_REGEX",e.MULTI_SENTENCE_SELECTION_FOR_PARAPHRASE_ALLOWED="MULTI_SENTENCE_SELECTION_FOR_PARAPHRASE_ALLOWED",e.MAX_TEXT_LENGTH_ALLOWED_FOR_PAGELESS="MAX_TEXT_LENGTH_ALLOWED_FOR_PAGELESS",e.MAX_TEXT_LENGTH_ALLOWED="MAX_TEXT_LENGTH_ALLOWED",e.SELECTED_UNDERLINE_THICKNESS="SELECTED_UNDERLINE_THICKNESS",e.BULLET_POINT_PARSING_PREFIX="BULLET_POINT_PARSING_PREFIX",e.TOOLBAR_SIZE="TOOLBAR_SIZE",e.FIX_ALL_CONFIG="FIX_ALL_CONFIG",e.IGNORE_EDITOR_WITH_ATTRIBUTES="IGNORE_EDITOR_WITH_ATTRIBUTES",e.SHOW_TOOLBAR_ON_EMPTY_INPUT_AREA="SHOW_TOOLBAR_ON_EMPTY_INPUT_AREA",e.MAIN_CONTENT_SCRIPT_FILENAME="MAIN_CONTENT_SCRIPT_FILENAME",e.SPECIAL_INTRODUCTORY_TEASER_ENABLED="SPECIAL_INTRODUCTORY_TEASER_ENABLED",e.TERMS_OF_SERVICE_MODAL_ENABLED="TERMS_OF_SERVICE_MODAL_ENABLED",e.LOLLIPOP_CONFIG="LOLLIPOP_CONFIG",e.NORMALIZE_SPACE="NORMALIZE_SPACE",e.USE_CSS_CUSTOM_HIGHLIGHTS="USE_CSS_CUSTOM_HIGHLIGHTS",e.STRIP_WRAPPING_QUOTES_FROM_SENTENCE="STRIP_WRAPPING_QUOTES_FROM_SENTENCE",e.GDOCS_MENU_BUTTONS="GDOCS_MENU_BUTTONS",e.SUPPORTS_TRIAL="SUPPORTS_TRIAL",e.DISABLE_WHEN_QB_EXTENSION_IS_PRESENT="DISABLE_WHEN_QB_EXTENSION_IS_PRESENT"}(e||(e={}));const t={[e.CHROME_EXTENSION_ID]:"oldceeleldhonbafppcapldpdifcinji",[e.NORMALIZE_SPACE]:!1,[e.SHOW_PARTIAL_RECO_UNDERLINE]:!1,[e.EXTN_PREFIX]:"lt",[e.COLORS_GRAMMAR]:{UNDERLINE:"#f2b24c",SELECTED_UNDERLINE:"#f2b24c",BACKGROUND:"rgba(242,179,77,0.3)",EMPHASIZE:"rgba(241,179,76,0.1)"},[e.COLORS_SPELLING]:{UNDERLINE:"#EB5757",SELECTED_UNDERLINE:"#EB5757",BACKGROUND:"rgba(235,88,88,0.2)",EMPHASIZE:"rgba(239,88,88,0.1)"},[e.COLORS_STYLE]:{UNDERLINE:"#8F7FFF",SELECTED_UNDERLINE:"#8F7FFF",BACKGROUND:"rgba(142,128,255,0.2)",EMPHASIZE:"rgba(138,128,255,0.2)",TITLE:"#5C4CFF"},[e.COLORS_PARAPHRASE]:{UNDERLINE:"#8F7FFF",BACKGROUND:"rgba(142,128,255,0.2)",EMPHASIZE:"rgba(138,128,255,0.2)",TITLE:"#5C4CFF"},[e.COLORS_RECOMMENDATION]:{UNDERLINE:"#80B3E2",SELECTED_UNDERLINE:"#0067C5",BACKGROUND:"rgba(0, 103, 199, 0.16)",EMPHASIZE:"rgba(0, 103, 199, 0.16)"},[e.COLORS_RECOMMENDATION_TEASE]:{UNDERLINE:"#CF9F0280",SELECTED_UNDERLINE:"#CF9F02",BACKGROUND:"rgba(242,181,24,0.16)",EMPHASIZE:"rgba(242,181,24,0.16)"},[e.SUPPORTED_LANGUAGES]:["ar","ast-es","be-by","br-fr","ca-es","ca-es-valencia","crh-ua","da-dk","de-at","de-ch","de-de","el-gr","en-au","en-ca","en-gb","en-nz","en-us","en-za","eo","es","fa","ga-ie","fr","gl-es","it","ja-jp","km-kh","nl","no","pl-pl","pt-ao","pt-br","pt-mz","pt-pt","ro-ro","ru-ru","sk-sk","sl-si","sv","ta-in","tl-ph","uk-ua","zh-cn"],[e.CARD_LAYOUT]:{TARGET_BOX_HORIZONTAL_MARGIN:0,TARGET_BOX_VERTICAL_MARGIN:5,HEADER_HEIGHT:36,FOOTER_HEIGHT:36,KEYBOARD_HINT_HEIGHT:60,MIN_HEIGHT_PARAPHRASE:200,MIN_HEIGHT_TOOLBOX:230,MAX_HEIGHT_TOOLBOX:368},[e.INSTALLED_ATTRIBUTE]:"data-lt-installed",[e.SITE_INIT_ATTRIBUTE]:"data-lt-site",[e.INPUT_AREA_INIT_ATTRIBUTE]:"data-lt-tweaks",[e.TMP_ID_ATTRIBUTE]:"data-lt-tmp-id",[e.AI_RULE_ID_REGEX]:/^(QB|AI)_/,[e.VALID_START_SENTENCE_REGEX]:"[^•]",[e.VALID_END_SENTENCE_REGEX]:".",[e.MULTI_SENTENCE_SELECTION_FOR_PARAPHRASE_ALLOWED]:!1,[e.MAX_TEXT_LENGTH_ALLOWED_FOR_PAGELESS]:15e3,[e.MAX_TEXT_LENGTH_ALLOWED]:1e4,[e.SELECTED_UNDERLINE_THICKNESS]:2,[e.BULLET_POINT_PARSING_PREFIX]:"• ",[e.TOOLBAR_SIZE]:{width:20,height:20},[e.FIX_ALL_CONFIG]:{FIX_GC_ERRORS:!0,FIX_RECOMMENDATIONS:!1,FIX_STYLE_ERRORS:!1},[e.IGNORE_EDITOR_WITH_ATTRIBUTES]:["spellcheck"],[e.SHOW_TOOLBAR_ON_EMPTY_INPUT_AREA]:!1,[e.MAIN_CONTENT_SCRIPT_FILENAME]:"/content.js",[e.SPECIAL_INTRODUCTORY_TEASER_ENABLED]:!0,[e.TERMS_OF_SERVICE_MODAL_ENABLED]:!1,[e.LOLLIPOP_CONFIG]:{LOLLIPOP_THEME:"purple",LOLLIPOP_CSS_PATH:"/content/styles/lollipop.css",ONBOARDING_IMAGE_PATH:"/assets/images/toolbox/lollipop-onboarding-lt.webp",ONBOARDING_BORDER_RADIUS:"8px",LOLLIPOP_CIRCLE_IMAGE_PATH:"/assets/images/toolbox/lollipop-icon.svg",LOLLIPOP_CIRCLE_GDOCS_IMAGE_PATH:"/assets/images/toolbox/lollipop-icon-gdocs.svg",SUPPORTS_DARK_MODE:!0,ONBOARDING_LANDING_PAGE_URL:"https://languagetool.org/text-cursor",TOOLBOX_IFRAME_PATH:"/toolbox/toolbox.html",TOOLBOX_AVAILABLE_UI_LANGUAGES:["de","en","es","fr","nl","pt-br"],PPHR_SUPPORTS_MULTISENTENCE:!0,TOOLBOX_HOTKEY:void 0,TRACKING_SAMPLING_RATE:100,DEEP_LINK_INTO_TOOLBOX:!1},[e.STRIP_WRAPPING_QUOTES_FROM_SENTENCE]:!0,[e.USE_CSS_CUSTOM_HIGHLIGHTS]:!1,[e.GDOCS_MENU_BUTTONS]:!0,[e.SUPPORTS_TRIAL]:!0,[e.DISABLE_WHEN_QB_EXTENSION_IS_PRESENT]:!0};class n{constructor(){this.extnConfig=t}static getInstance(){return this.instance||self._qb_lt_config||(this.instance=new n,self._qb_lt_config=this.instance),this.instance||self._qb_lt_config}get(e){return this.extnConfig[e]}set(e,t){this.extnConfig[e]=t}setAll(e){this.extnConfig=e}getAll(){return this.extnConfig}}const s=n.getInstance(),i="https://api.languagetool.org/v2",a="https://api.languagetoolplus.com/v2",o=[502,503,504],c=18e4,l=(s.get(e.MAX_TEXT_LENGTH_ALLOWED),Number.MAX_SAFE_INTEGER,/@(languagetool(er)?|quillbot|scribbr|learneo|coursehero|symbolab|litcharts|spellboy)\.(com|org|de|nl)$/i),g=["de","de-CH","ru","sv","pt","pt-BR","el","en","eo","it","fr","es","uk","sk","sl","pl","da","ro","nl","ca"],u={UKRAINE:{countries:["UA","BY"],percent:50},"ITALY-DISCOUNT":{countries:["IT"],percent:20},"SPAIN-DISCOUNT":{countries:["ES"],percent:20},SOUTH_EUROPE:{countries:["RO","AL","GR","ME","EE","LT","LV","BG","CY","MT","SK","SI","RS","HR","XK","HU","MD","TR","PT"],percent:20},AFRICA:{countries:["NG","ET","EG","CD","CG","TZ","KE","UG","DZ","SD","MA","AO","MZ","TN","CI","DJ","SZ","MU","GQ","GA","BW","SO","CD","ER","MG"],percent:50},ASIA:{countries:["ID","PK","BD","VN","MM","PH","UZ","MY","NP","KZ","KH","UZ","TH","YE","SY","JO"],percent:50},LATIN_AMERICA:{countries:["PE","VE","EC","SV","DO","BO","SR","AR","HN","BZ","CR","PA","GT","NI","GY","UY","HT","JM","TT","CU"],percent:50},BRAZIL:{countries:["BR"],percent:50}},d="Basic",h="Premium",m=["EN_QUOTES","PASSIVE_VOICE","DASH_RULE","SENTENCE_FRAGMENT","PONCTUATION_DOUBLE","TOO_LONG_SENTENCE","COMETES_TIPOGRAFIQUES","APOSTROF_TIPOGRAFIC","FALSCHE_VERWENDUNG_DES_BINDESTRICHS","HALBGEVIERTSTRICH","PARAGRAF_LEERZEICHEN","TYPOGRAFISCHE_APOSTROPHE","TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN","TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN_CH","TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN_2","PUNCTUATION_PARAGRAPH_END","FINAL_STOPS","FINAL_PUNCTUATION","SMART_QUOTES","PT_SMART_QUOTES","DASH_SPACE_RULES","HIPHEN_SPACE_RULES","BRAK_KROPKI","DYWIZ","CUDZYSLOW_DRUKARSKI","TYPOGRAFISCHE_AANHALINGSTEKENS","TYPOGRAFISCHE_AANHALINGSTEKENS_2","EINDE_ZIN_ONVERWACHT","BACKTICK","GEDACHTESTREEPJE","OPTIONAL_HYPHEN","COMILLAS_TIPOGRAFICAS","COMETES_TIPOGRAFIQUES","GL_SMART_QUOTES"],p=["OXFORD_SPELLING_Z_NOT_S"],_=["de","fr"],E=/[\"“”„]$/,f=/^[\"“”„]/,S="⁣",A=12096e5,T=/school|schule|bildung|academ|colegio|college|escola|universi|\.edu\b|educat|gnspes\.ca|dwightlondon\.org|k12\.nj\.us/i;
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class R{static _contructor(){if(this._isInitialized)return;R._isChromium=navigator.userAgent.includes("Chrome/")||navigator.userAgent.includes("Chromium/"),R._isFirefox=navigator.userAgent.includes("Firefox/"),R._isThunderbird=navigator.userAgent.includes("Thunderbird/"),R._isOpera=navigator.userAgent.includes("OPR/"),R._isEdge=navigator.userAgent.includes("Edg/"),R._isOldEdge=navigator.userAgent.includes("Edge/"),R._isSafari=(navigator.userAgent.includes("Safari/")||navigator.userAgent.includes("AppleWebKit"))&&!R._isChromium&&!R._isEdge&&!R._isOpera,R._isYaBrowser=navigator.userAgent.includes("YaBrowser/"),R._isChrome=R._isChromium&&!R._isOpera&&!R._isEdge&&!R._isOldEdge&&!R._isYaBrowser;const e=navigator.userAgent.match(/Chrome\/(\d+)/);e&&(R._isUnsupportedChrome=parseInt(e[1])<67&&!navigator.userAgent.includes("Edge/"));const t=navigator.userAgent.match(/Firefox\/(\d+)/);t&&(R._isUnsupportedFirefox=parseInt(t[1])<60),this._isInitialized=!0}static getOS(){return navigator.userAgent.includes("Macintosh")?"Mac":navigator.userAgent.includes("Windows")?"Windows":navigator.userAgent.includes("CrOS")?"CrOS":navigator.userAgent.includes("Linux")?"Linux":"Other"}static isChromium(){return R._isChromium}static isChrome(){return R._isChrome}static isThunderbird(){return R._isThunderbird}static isFirefox(){return R._isFirefox}static isOpera(){return R._isOpera}static isEdge(){return R._isEdge}static isSafari(){return R._isSafari}static isYaBrowser(){return R._isYaBrowser}static isUnsupportedChrome(){return R._isUnsupportedChrome}static isUnsupportedFirefox(){return R._isUnsupportedFirefox}static isUnsupportedBrowser(){return R.isUnsupportedChrome()||R.isUnsupportedFirefox()}static getBrowserName(){return R.isChrome()?"Chrome":R.isFirefox()?"Firefox":R.isOpera()?"Opera":R.isEdge()?"Edge":R.isSafari()?"Safari":R.isYaBrowser()?"Yandex":"Unknown Browser"}static getUserAgentIdentifier(){let e="webextension";return this.isChrome()?e+="-chrome":this.isFirefox()?e+="-firefox":this.isOpera()?e+="-opera":this.isEdge()?e+="-edge":this.isYaBrowser()?e+="-chrome":this.isSafari()?e+="-safari":e+="-unknown",e+"-ng"}static isTouchDevice(){if(!("ontouchstart"in self))return!1;const e=navigator.userAgent.includes("Android");return this.isIOS()||e}static isIOS(){const e=navigator.userAgent.includes("iPhone OS"),t=navigator.userAgent.includes("Macintosh")&&Boolean(navigator.maxTouchPoints&&navigator.maxTouchPoints>2);return e||t}static isIOSTouchDevice(){return"ontouchstart"in self&&this.isIOS()}static isMacApp(){return navigator.userAgent.includes("AppleWebKit/")&&navigator.userAgent.includes("LanguageTool/")&&!navigator.userAgent.includes("Chrome/")&&!navigator.userAgent.includes("Chromium/")}static isWindowsApp(){return navigator.userAgent.includes("LanguageToolWindows/")}}R._isChromium=!1,R._isChrome=!1,R._isFirefox=!1,R._isThunderbird=!1,R._isOpera=!1,R._isOldEdge=!1,R._isEdge=!1,R._isSafari=!1,R._isYaBrowser=!1,R._isUnsupportedChrome=!1,R._isUnsupportedFirefox=!1,R._isInitialized=!1,R._contructor();let I,C;try{I=new RegExp("\\p{L}","u")}catch(e){I=/[a-zäöüß]/i}function P(e){return I.test(e)}try{C=new RegExp("(?:\\p{Emoji}|\\u200d|\\ufe0e|\\ufe0f)","u")}catch(e){C=/_^/}const L=["\b","\t"," "," "," "," "," "," "," "," "," "," ","‏","　"];const b=new RegExp("["+L.join("")+"]","g");const y=["­","​","‌","‍","‪","‫","‬","‭","⁠","\ufeff"];new RegExp("["+y.join("")+"]");new RegExp("["+y.join("")+"]","g");const N=new RegExp("^⁣+");const O=new RegExp("⁣+$");const x=function(){const e=/^[A-ZÈÉÊÁÀÂÓÒÔÚÙÛÍÌÎÄÜÖ]+[A-ZÈÉÊÁÀÂÓÒÔÚÙÛÍÌÎÄÜÖ\-!?#@=%().:;<>'’´`"”“*+,\s]+[A-ZÈÉÊÁÀÂÓÒÔÍÌÎÄÜÖ]$/;return function(t){return e.test(t)}}();function v(e,t){const{start:r,end:n=r}=t||{start:-1};if(!e||-1===r)return;const s=e.map(e=>Array.isArray(e)?e:[e.start,e.end]).findIndex(([e,t])=>r>=e&&n<=t);return s<0?void 0:e[s]}let D,k,w,U;!function(){const e=/(?:\S+\s+){0,4}\S+$/,t=/^\S+(?:\s+\S+){0,4}/;D=(e,t,r=t,n=!0)=>{const[s,i]=(()=>{try{const e=n?"":["\\p{Emoji}","\\u200d","\\ufe0e","\\ufe0f"].join("");return[new RegExp("^\\s*(-?[\\p{L}#*"+e+"]+){0,3}-?\\s*$","u"),new RegExp("^\\s*[\\p{L}#*"+e+"]+(-[\\p{L}#*"+e+"]+){0,3}\\s*$","u")]}catch{return[/^\s*(-?[a-zäöüß#*]+){0,3}-?\s*$/i,/^\s*[a-zäöüß#*]+(-[a-zäöüß#*]+){0,3}\s*$/i]}})(),a=e=>{return!n&&(t=e,C.test(t));var t},o=e.substring(t,r),[{length:c=0}]=o.match(/^[^\S]*/),[{length:l=0}]=o.match(/[^\S]*$/);if(!s.test(o))return null;const g=(()=>{const r=t+c,n=e.substring(0,r).split(/[^\S]+/);return V(n[n.length-1]).reverse()})(),u=(()=>{const t=r-l,[n]=e.substring(t).split(/[^\S]+/);return V(n)})(),d=Math.max(g.length,u.length);let h=!1,m=!1,p=t,_=r;for(let e=0;e<d;e++){const t=g[e],r=t&&(P(t)||a(t)||"-"===t),n=u[e],s=n&&(P(n)||a(n)||"-"===n);if(r&&!h?p-=t.length:h=!0,s&&!m?_+=n.length:m=!0,h&&m)break}c>0&&(p+=c),l>0&&(_-=l);const E=e.substring(p,_);return i.test(E)?{start:p,end:_}:null},k=(r,n,s=n,i,a=!0)=>{const o=D(r,n,s,a);if(!o)return null;const c=v(i,{start:n,end:s});let l="",g="",u="";if(c)u=r.substring(c.start,c.end).trim(),l=r.slice(c.start,o.start).trim(),g=r.slice(o.end,c.end).trim();else{const n=e.exec(r.substring(0,o.start).trim());l=n?n[0]:"",l=l.replace(/^.+\n\n/,"");const s=t.exec(r.substring(o.end).trim());g=s?s[0]:"",g=g.replace(/\n\n.+/,"")}return{word:r.substring(o.start,o.end),position:o,sentence:u,beforeText:l,afterText:g}}}(),function(){let e;const t=[['"','"'],["'","'"],["“","”"],["„","“"],["‘","’"],["‚","‘"],["«","»"],["»","«"],["`","`"],["´","´"],["{","}"],["[","]"],["(",")"],["<",">"]],r="[^\\S]",n="[.,:;¡!¿?]",s="[\\udc00-\\udfff\\ud800-\\udb7f\\u200d\\ufe0e\\ufe0f\\p{Emoji_Presentation}\\p{Emoji_Modifier}\\p{Emoji}]";let i,a,o,c;const l=/(?:\S+\s+){0,4}\S+$/,g=/^\S+(?:\s+\S+){0,4}/;try{const t=[r,n,s].join("|");i=new RegExp(`(?:${t})`,"u"),a=new RegExp(`^(?:${t})*`,"u"),o=new RegExp(`(?:${t})*$`,"u"),e=new RegExp("^\\s*\\p{L}+(-\\p{L}+)*\\s*$","u"),c=new RegExp("^\\p{L}+$","u")}catch{const t=[r,n].join("|");i=new RegExp(`(?:${t})`),a=new RegExp(`^(?:${t})*`),o=new RegExp(`(?:${t})*$`),e=/^\s*[a-zäöüß]+(-[a-zäöüß]+)*\s*$/i,c=/^[a-zäöüß]+$/i}w=(n,s,l=s,g)=>{const u=n.substring(s,l),d=s===l,h=d?n.substring(s-1,l):"",m=d?n.substring(s,l+1):"",p=!!d&&0===[h,m].filter(e=>!!e.match(c)).length,_=u.split(new RegExp(`${r}+`)).length>5,[E=""]=u.match(a),[f=""]=u.match(o),S=E.length,A=f.length,T=[E.trim(),f.trim()];if(p||_)return null;const R=function(e,t){const{start:r}=t||{start:-1};if(!e||-1===r)return;const n=e.sort((e,t)=>e.start-t.start).find(e=>{if(r<=e.end&&r>=e.start)return!0});return n||void 0}(g,{start:s,end:l})?.start||0,I=function(e,t){const{end:r}=t||{end:-1};if(!e||void 0===r||-1===r)return;const n=e.sort((e,t)=>e.start-t.start).find(e=>{if(r<=e.end&&r>=e.start)return!0});return n||void 0}(g,{start:s,end:l})?.end||n.length-1;let C=s+S;for(;C>R;){const[e]=n[C-1].match(i)||[];if(e){0===S&&(T[0]+=e.trim());break}C--}let P=l-1-A;for(;P<I-1;){const[e]=n[P+1].match(i)||[];if(e){0===A&&(T[1]+=n[P+1].trim());break}P++}if(P+=1,C===R&&P===I)return null;const L=n.substring(C,P);if(L.split(e).length>=6)return null;let b=!1,y=!1;for(const[e,r]of t){b||!L.startsWith(e)||L.slice(1).includes(r)||(C+=1,b=!0,T[0]+=L[0]);const t=L.length-1;y||!L.endsWith(r)||L.slice(0,t).includes(e)||(P-=1,y=!0,T[1]+=L[t])}return{start:C,end:P,omittedCharacters:T}},U=(e,t,r=t,n)=>{let s=w(e,t,r,n);if(!s)return null;const i=v(n,{start:t,end:r});s=(()=>{if(!i)return s;const t=e.slice(i.start,s.start),r=e.slice(s.end,i.end),n=!t||!!t.match(/^[¡¿]+$/),a=!r||!!r.match(/^[.!?]+$/);return n&&a&&(s={start:i.start,end:i.end,omittedCharacters:["",""]}),s})();let a="",o="",c="";if(i)c=e.substring(i.start,i.end).trim(),a=e.slice(i.start,s.start).trim(),o=e.slice(s.end,i.end).trim();else{const t=l.exec(e.substring(0,s.start).trim());a=t?t[0]:"",a=a.replace(/^.+\n\n/,"");const r=g.exec(e.substring(s.end).trim());o=r?r[0]:"",o=o.replace(/\n\n.+/,"")}return U.trackOmittedCharacters?.(s.omittedCharacters),{phrase:e.substring(s.start,s.end),position:{start:s.start,end:s.end},sentence:c,beforeText:a,afterText:o}}}();const M=e=>{const t=S.charCodeAt(0).toString(16),r=new RegExp(`^(?:[^\\S]|•|\\u${t})+$`),n=new RegExp(`^(?:[^\\S]|\\u${t})+$`),s=e.split("").reverse().join(""),i=Math.floor(e.length/2);let a,o,c=0,l=0;for(let t=0;t<i;t++){const i=e.charAt(t),g=s.charAt(t);if(!0!==a&&i.match(r)?(c+=1,a=!1):a=!0,!0!==o&&g.match(n)?(l+=1,o=!1):o=!0,a&&o)break}return[c,l]};function G(e,t){if(e===t)return null;let r=0;const n=Math.max(e.length,t.length);for(r=0;r<n&&e[r]===t[r];r++);let s=0;const i=Math.min(e.length,t.length);for(;r+s<i;){if(e[e.length-s-1]!==t[t.length-s-1])break;s++}return{from:r,oldFragment:e.substring(r,e.length-s),newFragment:t.substring(r,t.length-s)}}function F(e,t,r=!1){const n=[];r&&(e=ne(e),t=ne(t));const s=e.split("\n"),i=t.split("\n");let a=0;const o=Math.max(s.length,i.length);for(a=0;a<o&&s[a]===i[a];a++);let c=0;const l=Math.min(s.length,i.length);for(;a+c<l;){if(s[s.length-c-1]!==i[i.length-c-1])break;c++}let g=0;for(let e=0;e<a;e++)g+=s[e].length+1;let u=g;for(let e=a;e<o-c;e++){const t=e<s.length-c?s[e]:null,r=e<i.length-c?i[e]:null;t===r&&g===u||n.push({oldText:t,newText:r,oldOffset:g,newOffset:u,textDiff:G(t||"",r||"")}),null!==t&&(g+=t.length+1),null!==r&&(u+=r.length+1)}if(g!==u)for(let e=c-1;e>=0;e--){const t=s[s.length-e-1],r=i[i.length-e-1];n.push({oldText:t,newText:r,oldOffset:g,newOffset:u,textDiff:null}),g+=t.length+1,u+=r.length+1}return n}function B(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/`/g,"&#x60;").replace(/\//g,"&#x2F;")}function H(e,t){let r=0,n=e.length-1;for(;r<=n;){const s=r+Math.ceil((n-r)/2),i=t(e[s]);if(i>0)r=s+1;else{if(!(i<0)){for(let r=s;r>0;r--)if(0!==t(e[r-1]))return e[r];return e[0]}n=s-1}}return null}function W(e){const t=[];return e.forEach(e=>{-1===t.indexOf(e)&&t.push(e)}),t}function j(e){return null===e||"object"!=typeof e?e:e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e):Array.isArray(e)?Array.from(e):Object.assign({},e)}function $(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);const t=Array.isArray(e)?[]:{};for(const r in e)t[r]=$(e[r]);return t}function z(e){const t=e.toString();return 1===t.length?"0"+t:t}let X=null;function V(e){return Intl.Segmenter?(X||(X=new Intl.Segmenter(void 0,{granularity:"grapheme"})),Array.from(X.segment(e),e=>e.segment)):[...e]}function q(){if("about:blank"===location.href||"about:srcdoc"===location.href)try{return(self.opener||self.parent).location.href}catch(e){}return location.href}function Y(e,t=e){if(e.startsWith("about:blank"))return"blank";if(e.startsWith("about:srcdoc"))return"srcdoc";if(e.startsWith("file:"))return"file";e&&!/^([a-z\-]+:\/\/)/i.test(e)&&(e="http://"+e);try{return new URL(e).hostname}catch(e){return t}}function K(e){return Y(e).toLowerCase().trim().replace(/^www\./,"")}function Z(e,t){const r=K(t);return(e||[]).some(e=>{const t=K(e);return t===r||r.endsWith("."+t)})}var Q;!function(e){e.GC="GC",e.GC_RECOMMENDATION="GC_RECOMMENDATION",e.REPHRASING="PPHR"}(Q||(Q={}));const J=function(){const e=/^\w+\.$/;return(t,r)=>{if(!t.isSpellingError)return!1;let n=t.originalPhrase;if(e.test(n)&&(n=n.substring(0,n.length-1)),r.includes(n))return!0;if(function(e){const t=e.charAt(0);return t===t.toUpperCase()&&t!==t.toLowerCase()}(n)){const e=(s=n).charAt(0).toLowerCase()+s.substr(1);if(r.includes(e))return!0}var s;return!1}}();!function(){const e=/[\u0300-\u036f]/g,t=/\u0142/g,r=/\u00F8/g}();function ee(e,t,r,n,s=!1){return s?e<=n&&t>=r:e<n&&t>r}function te(e,t,r,n=!1){if(n){if(t<=e&&e<r)return 0}else if(t<=e&&e<=r)return 0;return e-t}async function re(e,t,r,n){if(t.signal)throw new Error("cannot fetchWithTimeout if 'signal' is already set");const s=n??new AbortController;t.signal=s.signal;const i=self.setTimeout(()=>{n?.signal.removeEventListener("abort",a),s.abort()},r),a=()=>{clearTimeout(i)};return n?.signal.addEventListener("abort",a),await fetch(e,t).finally(()=>{clearTimeout(i)})}const ne=e=>{return(t=e,t.replace(b," ")).replace(/[\u00A0]/g," ").normalize();var t};
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class se{constructor(){this._eventHandlers=new Map}subscribe(e,t){this._eventHandlers.has(e)||this._eventHandlers.set(e,[]),this._eventHandlers.get(e).push(t)}unsubscribe(e,t){const r=this._eventHandlers.get(e)?.indexOf(t)??-1;r>-1&&(this._eventHandlers.get(e).splice(r,1),this._eventHandlers.get(e).length||this._eventHandlers.delete(e))}fire(e,t){const r=this._eventHandlers.get(e);r&&r.forEach(e=>{try{e(t)}catch(e){console.error(e)}})}destroy(){this._eventHandlers.clear()}}const ie="EDITOR_STATE_SYNC_ACK",ae="EDITOR_STATE_FORCE_SYNC",oe="EDITOR_SURROUNDING_CONTEXT_FORCE_SYNC";class ce{constructor(){this.sessions=new Map,this.editorToSession=new Map,this.uniqueIdentifierToSession=new Map,this.hostOrigin="",this.hostUrl="",this.ongoingReinitializationPromises=new Map,this.ongoingSessionCreationPromises=new Map}static getInstance(e){if(!ce.instance&&(ce.instance=new ce,e))try{const t=new URL(e);ce.instance.hostOrigin=t.origin,ce.instance.hostUrl=e}catch(t){console.warn("Invalid URL provided, using as-is:",e),ce.instance.hostOrigin=e}return ce.instance}setHostUrl(e){try{const t=new URL(e);this.hostOrigin=t.origin}catch(t){console.warn("Invalid URL provided, using as-is:",e),this.hostOrigin=e}}getHostUrl(){return this.hostOrigin}async createWritingSession(e,t){if(this.uniqueIdentifierToSession.has(t)){const r=this.uniqueIdentifierToSession.get(t),n=this.sessions.get(r);return n.editorIds.has(e)||(this.removeEditorFromSession(e),n.editorIds.add(e),this.editorToSession.set(e,n.sessionId)),n.sessionId}let r=this.ongoingSessionCreationPromises.get(t);if(r){const t=await r,n=this.sessions.get(t);n&&!n.editorIds.has(e)&&(this.removeEditorFromSession(e),n.editorIds.add(e),this.editorToSession.set(e,t))}else r=this.performSessionCreation(e,t).finally(()=>{this.ongoingSessionCreationPromises.delete(t)}),this.ongoingSessionCreationPromises.set(t,r);return r}joinSession(e,t){const r=this.sessions.get(t);if(r)return this.removeEditorFromSession(e),r.editorIds.add(e),this.editorToSession.set(e,t),r}removeEditorFromSession(e){const t=this.editorToSession.get(e);if(t){const r=this.sessions.get(t);if(r&&(r.editorIds.delete(e),0===r.editorIds.size)){this.sessions.delete(t);for(const[e,r]of this.uniqueIdentifierToSession.entries())if(r===t){this.uniqueIdentifierToSession.delete(e);break}}this.editorToSession.delete(e)}}updateSurroundingContent(e,t){const r=this.sessions.get(e);r&&(r.surroundingContent=t)}getSession(e){const t=this.editorToSession.get(e);if(t)return this.sessions.get(t)}getEditorsInSameSession(e){const t=this.getSession(e);return t?Array.from(t.editorIds):[]}getSessionById(e){return this.sessions.get(e)}async generateSessionId(e,t){return await de.createWritingSession(t,e)}async reIntializeWritingSession(e){let t=this.ongoingReinitializationPromises.get(e);return t||(t=this.performReinitialization(e).finally(()=>{this.ongoingReinitializationPromises.delete(e)}),this.ongoingReinitializationPromises.set(e,t)),t}async performReinitialization(e){const t=this.findUniqueIdentifierFromWritingSession(e);if(t){return await de.createWritingSession(this.hostUrl,t)}return console.error("No unique identifier found for sessionId:",e),""}async performSessionCreation(e,t){const r=await this.generateSessionId(t,this.hostUrl);if(!r)return"";const n={sessionId:r,editorIds:new Set([e]),surroundingContent:""};return this.removeEditorFromSession(e),this.sessions.set(r,n),this.uniqueIdentifierToSession.set(t,r),this.editorToSession.set(e,r),r}findUniqueIdentifierFromWritingSession(e){for(const[t,r]of this.uniqueIdentifierToSession)if(r===e)return t}}
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
const le=s.get(e.EXTN_PREFIX);function ge(e,t,r){const n=new CustomEvent(t,{detail:r,cancelable:!0});return e.dispatchEvent(n)}class ue{}ue.eventNames={sentenceRangesChecked:`${le}-environmentAdapter.sentenceRangesChecked`,incrementalCheckResponseReceived:`${le}-environmentAdapter.incrementalCheckResponseReceived`};const de=class{static _onMessage(e){switch(!0){case"sentence-splitter-response"===e.command:{const{checkTimestamp:t,sentenceRangesCheckedText:r,sentenceRangesCheckResult:n,sentenceRanges:s}=e.payload;return this.updateSentenceRanges(r,n,t,s),Promise.resolve()}case"reintialize-writing-session"===e.command:{const{sessionId:t}=e.payload;return t?ce.getInstance(q()).reIntializeWritingSession(t):Promise.reject("writing session not found")}case e.command===ie:{const{payload:t}=e;return this.onEditorStateSyncAck(t),Promise.resolve()}case e.command===ae:{const{payload:t}=e;return this.onEditorStateForceSync(t),Promise.resolve()}case e.command===oe:{const{payload:t}=e;return this.onEditorSurroundingContextForceSync(t),Promise.resolve()}case"incremental-check-response"===e.command:{const{currentCheckedText:t,data:r,instanceId:n,paragraph:s,previousCheckedText:i}=e.payload;return this.incrementalCheck(n,r,t,i,s),Promise.resolve()}}}static init(e){this._instance?this._instance=e:(this._instance=e,this.addEventListener())}static onEditorStateForceSync(e){ge(document,ae,e)}static onEditorSurroundingContextForceSync(e){ge(document,oe,e)}static onEditorStateSyncAck(e){ge(document,ie,e)}static isProductionEnvironment(){return this._instance.isProductionEnvironment()}static addEventListener(){return this._instance.addEventListener(e=>this._onMessage(e))}static isRuntimeConnected(){return this._instance.isRuntimeConnected()}static getVersion(){return this._instance.getVersion()}static getTrackingId(){return this._instance.getTrackingId()}static getPinnedState(){return this._instance.getPinnedState()}static shouldTrack(){return this._instance.shouldTrack()}static getType(){return this._instance.getType()}static getBeforeUnloadEventName(){return this._instance.getBeforeUnloadEventName()}static getURL(e){return this._instance.getURL(e)}static getUILanguageCode(){return this._instance.getUILanguageCode()}static openWindow(e){return this._instance.openWindow(e)}static canLoadContentScripts(e){return this._instance.canLoadContentScripts(e)}static loadContentScripts(e,t){return this._instance.loadContentScripts(e,t)}static loadStylesheets(e,t){return this._instance.loadStylesheets(e,t)}static injectShadowStyles(e){return this._instance.injectShadowStyles(e)}static initializeLTAssistant(e,t={}){return this._instance.initializeLTAssistant(e,t)}static getPreferredLanguages(){return this._instance.getPreferredLanguages()}static startDictionarySync(){return this._instance.startDictionarySync()}static addWordToDictionary(e){return this._instance.addWordToDictionary(e)}static addWordsToDictionary(e){return this._instance.addWordsToDictionary(e)}static removeWordFromDictionary(e){return this._instance.removeWordFromDictionary(e)}static clearDictionary(){return this._instance.clearDictionary()}static updateDictionary(){return this._instance.updateDictionary()}static updateSentenceRanges(e,t,r,n){this._instance.updateSentenceRanges(e,t,r,n)}static incrementalCheck(e,t,r,n,s){this._instance.incrementalCheck(e,t,r,n,s)}static injectExecutor(){return this._instance.injectExecutor()}static destroyExecutor(){return this._instance.destroyExecutor()}static executeScript(e,t){return this._instance.executeScript(e,t)}static linkInputAreaProperties(e){return this._instance.linkInputAreaProperties(e)}static ping(){return this._instance.ping()}static loadSynonyms(e,t,r){return this._instance.loadSynonyms(e,t,r)}static abortSynonymsRequest(){return this._instance.abortSynonymsRequest()}static loadPhrases(e,t,r,n,s,i){return this._instance.loadPhrases(e,t,r,n,s,i)}static initializeUserActivity(e){return this._instance.initializeUserActivity(e)}static sendUserActivityPings(e){return this._instance.sendUserActivityPings(e)}static updateUserActivityTextStatistics(e,t){return this._instance.updateUserActivityTextStatistics(e,t)}static updateUserActivityAppliedSuggestions(e,t,r){return this._instance.updateUserActivityAppliedSuggestions(e,t,r)}static updateUserActivityAppliedRewritings(e){return this._instance.updateUserActivityAppliedRewritings(e)}static updateUserActivityMeta(e,t){return this._instance.updateUserActivityMeta(e,t)}static sendUserActivity(e){return this._instance.sendUserActivity(e)}static destroyUserActivity(e){return this._instance.destroyUserActivity(e)}static abortPhraseRequests(e){return this._instance.abortPhraseRequests(e)}static abortTranslateRequest(e){this._instance.abortTranslateRequest(e)}static loadSplitSentence(e,t,r,n,s){return this._instance.loadSplitSentence(e,t,r,n,s)}static trackEvent(e,t){return this._instance.trackEvent(e,t)}static pageLoaded(e,t,r,n,s){return this._instance.pageLoaded(e,t,r,n,s)}static ltAssistantStatusChanged(e,t){return"number"==typeof e?this._instance.ltAssistantStatusChanged(e,t):this._instance.ltAssistantStatusChanged(e)}static check(e,t,r,n,s,i,a,o,c){return this._instance.check(e,t,r,n,s,i,a,o,c)}static createWritingSession(e,t){return this._instance.createWritingSession(e,t)}static fetchRecommendationForSentence(e){return this._instance.fetchRecommendationForSentence(e)}static unlockRecommendation(e){return this._instance.unlockRecommendation(e)}static translateText(e){return this._instance.translateText(e)}static isOptionsPageSupported(){return this._instance.isOptionsPageSupported()}static openOptionsPage(e,t){return this._instance.openOptionsPage(e,t)}static isFeedbackFormSupported(){return this._instance.isFeedbackFormSupported()}static openFeedbackForm(e,t,r){return this._instance.openFeedbackForm(e,t,r)}static openPremiumPage(e,t=0,r=0,n=0,s="",i){return this._instance.openPremiumPage(e,t,r,n,s,i)}static updateSurroundingTextContext(e){return this._instance.updateSurroundingTextContext(e)}static forceSyncEditorState(e){return this._instance.forceSyncEditorState(e)}static checkForPaidSubscription(){return this._instance.checkForPaidSubscription()}static canUseShadowDom(){return this._instance.canUseShadowDom()}static abortAllRequests(e){return this._instance.abortAllRequests(e)}static getTermsOfServiceInfo(e){return this._instance.getTermsOfServiceInfo(e)}static acceptTermsOfService(e){return this._instance.acceptTermsOfService(e)}static syncUserData(){return this._instance.syncUserData()}};var he,me=function(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})};
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
const pe=s.get(e.EXTN_PREFIX);class _e{}_e.eventNames={localeChanged:`${pe}-i18nManager.localeChanged`};const Ee=(me(he=class{static init(e){this._instance=e}static addEventListener(e,t){this._instance.addEventListener(e,t)}static setLocale(e){this._instance.setLocale(e)}static getMessage(e,t){return this._instance.getMessage(e,t)}static getLanguageNameForCode(e){return this.getMessage(this._languageCodeToTranslationKeyMap[e])}},"i18nManager"),he._languageCodeToTranslationKeyMap={ar:"ar",ast:"ast","ast-es":"ast",be:"be","be-by":"be",br:"br","br-fr":"br",ca:"ca","ca-es":"ca","ca-es-valencia":"ca_ES_valencia","crh-ua":"crh","da-dk":"da_DK",de:"de","de-at":"de_AT","de-ch":"de_CH","de-de":"de_DE",el:"el","el-gr":"el",en:"en","en-au":"en_AU","en-ca":"en_CA","en-gb":"en_GB","en-nz":"en_NZ","en-us":"en_US","en-za":"en_ZA",eo:"eo",es:"es","es-es":"es",fa:"fa",ga:"ga","ga-ie":"ga",fr:"fr","fr-fr":"fr",gl:"gl","gl-es":"gl",it:"it",ja:"ja","ja-jp":"ja",km:"km","km-kh":"km",nl:"nl",no:"no",pl:"pl","pl-pl":"pl",pt:"pt","pt-ao":"pt_AO","pt-br":"pt_BR","pt-mz":"pt_MZ","pt-pt":"pt_PT",ro:"ro","ro-ro":"ro","ru-ru":"ru",sk:"sk","sk-sk":"sk",sl:"sl","sl-si":"sl",sv:"sv",ta:"ta","ta-in":"ta",tl:"tl","tl-ph":"tl",uk:"uk","uk-ua":"uk",zh:"zh","zh-cn":"zh"},he);
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class fe{static get SUPPORTED_LANGUAGES(){return this._supportedLanguages||(this._supportedLanguages=s.get(e.SUPPORTED_LANGUAGES).map(e=>({code:e,name:Ee.getLanguageNameForCode(e)})),this._supportedLanguages.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),this._isSubscribed||(Ee.addEventListener(_e.eventNames.localeChanged,()=>this._supportedLanguages=null),this._isSubscribed=!0)),this._supportedLanguages}static isLanguageVariant(e){return e.code.includes("-")}static getPrimaryLanguageCode(e){return e.split("-")[0]}static formatLanguageCode(e){const t=e.split("-");return 1===t.length?t[0]:2===t.length?t[0]+"-"+t[1].toUpperCase():t[0]+"-"+t[1].toUpperCase()+"-"+t[2]}static getUserLanguageCode(){for(const e of navigator.languages){if(e.includes("-")&&e.startsWith(navigator.language))return e}return navigator.language}static getUserLanguageCodes(){const e=Array.from(navigator.languages,e=>this.getPrimaryLanguageCode(e).toLowerCase());try{e.push(this.getPrimaryLanguageCode(de.getUILanguageCode()).toLowerCase())}catch(e){}return W(e)}static getPreferredLanguageVariant(e){const t={"en-in":"en-us","en-ie":"en-gb"},r=navigator.languages||[];for(let n of r){n=n.toLowerCase(),n=t[n]||n;for(const t of e){const e=t.toLowerCase();if(n.length>2&&n===e)return t}}return null}static getLanguagesForGeoIPCountry(){return new Promise(function(e,t){let r=!1;const n=self.setTimeout(()=>{r=!0,t(new Error("geoip timeout"))},15e3);fetch("https://languagetool.org/webextension/init",{method:"GET",mode:"cors",referrerPolicy:"no-referrer",headers:{Accept:"application/json"}}).then(e=>e.json()).then(t=>{if(!r){const r=(t.geoIpCountry||"").toUpperCase();e({geoIpLanguages:t.geoIpLanguages||[],geoIpCountry:r}),clearTimeout(n)}}).catch(e=>{console.error(e),r||(t(e),clearTimeout(n))})})}static getSynonymsRequestLanguage(e){let t=this.getPrimaryLanguageCode(e);return"de-ch"===e.toLowerCase()?t="de-CH":"pt-br"===e.toLowerCase()&&(t="pt-BR"),g.includes(t)?t:null}}fe._supportedLanguages=null,fe._isSubscribed=!1,fe.ALL_LANGUAGES=[{code:"af",name:"Afrikaans"},{code:"ak",name:"Akan"},{code:"am",name:"አማርኛ"},{code:"an",name:"aragonés"},{code:"ar",name:"عربي"},{code:"as",name:"অসমীয়া"},{code:"ast",name:"Asturianu"},{code:"be",name:"Беларуская"},{code:"bg",name:"Български"},{code:"bm",name:"Bamanankan"},{code:"bn",name:"বাংলা"},{code:"br",name:"Brezhoneg"},{code:"bs",name:"босански"},{code:"ca",name:"Català"},{code:"cs",name:"čeština"},{code:"cy",name:"Cymraeg"},{code:"da",name:"Dansk"},{code:"de",name:"Deutsch"},{code:"el",name:"Ελληνικά"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"es",name:"Español"},{code:"et",name:"Eesti keel"},{code:"eu",name:"Euskara"},{code:"fa",name:"فارسی"},{code:"fi",name:"suomi"},{code:"fj",name:"Vosa vaka-Viti"},{code:"fr",name:"Français"},{code:"ga",name:"Gaeilge"},{code:"gd",name:"Gàidhlig"},{code:"gl",name:"Galego"},{code:"gn",name:"Avañe'ẽ"},{code:"gu",name:"ગુજરાતી"},{code:"ha",name:"هَرْشَن هَوْسَ‎"},{code:"he",name:"עברית"},{code:"hi",name:"हिन्दी"},{code:"hr",name:"hrvatski"},{code:"hu",name:"magyar"},{code:"hy",name:"Հայերեն"},{code:"ia",name:"Interlingua"},{code:"id",name:"Bahasa Indonesia"},{code:"ig",name:"Ásụ̀sụ̀ Ìgbò"},{code:"is",name:"íslenska"},{code:"it",name:"Italiano"},{code:"ja",name:"日本語"},{code:"kk",name:"Қазақ"},{code:"km",name:"ខ្មែរ"},{code:"kn",name:"ಕನ್ನಡ"},{code:"ko",name:"한국어"},{code:"ku",name:"Kurdî"},{code:"ks",name:"كشمیری"},{code:"la",name:"Latina"},{code:"lg",name:"Luganda"},{code:"lo",name:"ພາສາລາວ"},{code:"lt",name:"Lietuvių"},{code:"lv",name:"Latviešu"},{code:"mg",name:"malagasy"},{code:"mi",name:"Māori"},{code:"ml",name:"മലയാളം"},{code:"mk",name:"Македонски"},{code:"mn",name:"Монгол"},{code:"mr",name:"मराठी"},{code:"ms",name:"Melayu"},{code:"my",name:"မြန်မာဘာသာ"},{code:"nb",name:"Norsk bokmål"},{code:"ne",name:"नेपाली"},{code:"nn",name:"Norsk nynorsk"},{code:"no",name:"Norsk"},{code:"nl",name:"Nederlands"},{code:"nr",name:"isiNdebele"},{code:"oc",name:"Occitano"},{code:"or",name:"ଓଡ଼ିଆ"},{code:"pa",name:"ਪੰਜਾਬੀ"},{code:"pl",name:"Polski"},{code:"ps",name:"پښتو"},{code:"pt",name:"Português"},{code:"rm",name:"rumantsch"},{code:"ro",name:"românesc"},{code:"ru",name:"Русский"},{code:"rw",name:"Ikinyarwanda"},{code:"sa",name:"संस्कृत"},{code:"si",name:"සිංහල"},{code:"sk",name:"slovenčina"},{code:"sl",name:"Slovenščina"},{code:"so",name:"Soomaali"},{code:"sr",name:"Српски"},{code:"ss",name:"siSwati"},{code:"st",name:"Sesotho"},{code:"sv",name:"Svenska"},{code:"ta",name:"தமிழ்"},{code:"te",name:"తెలుగు"},{code:"th",name:"ภาษาไทย"},{code:"tl",name:"Tagalog"},{code:"fil",name:"Filipino"},{code:"tr",name:"Türkçe"},{code:"ts",name:"Xitsonga"},{code:"tt",name:"Tatarça"},{code:"uk",name:"Українська"},{code:"ur",name:"اُردو"},{code:"uz",name:"Oʻzbek tili"},{code:"ve",name:"Tshivenḓa"},{code:"vi",name:"Tiếng Việt"},{code:"yo",name:"عِدعِ يوْرُبا"},{code:"zh",name:"中文"},{code:"zu",name:"isiZulu"}],fe.POPULAR_LANGUAGES=["de","en","es","fr","nl","pl","pt","ru","uk","zh","it","hi"];r(6326);const Se=["de","en","es","fr","nl","pt-br"],Ae=(String.fromCharCode(32),String.fromCharCode(160),"\b\t          ‏　");new RegExp("^["+Ae+"]$"),new RegExp("["+Ae+"]","g");Intl.Segmenter&&new Intl.Segmenter(void 0,{granularity:"grapheme"});Error;const Te="​‌‍­⁠‪‫‬‭";new RegExp("^["+Te+"]$"),new RegExp("["+Te+"]"),new RegExp("["+Te+"]","g");const Re=e=>e.replace("_","-").toLocaleLowerCase(),Ie=e=>Se.includes(String(e)),Ce=e=>{const t=String(e),r=Re(t),[n]=(e=>Re(e).split("-")[0])(t);switch(!0){case Ie(r):return r;case Ie(n):return n;default:return"en"}};const Pe=class{static init(e){this._instance=e}static getUiLanguage(){const t=s.get(e.LOLLIPOP_CONFIG).TOOLBOX_AVAILABLE_UI_LANGUAGES,r=Ce(de.getUILanguageCode());return t.includes(r)?r:"en"}static getToolboxEnvironment(e){return this._instance.getToolboxEnvironment(e)}static getToolboxConfig(e){return this._instance.getToolboxConfig(e)}static preApplyToolboxResult(e){return this._instance.preApplyToolboxResult(e)}static canSeeLollipop(e){return this._instance.canSeeLollipop(e)}static isUsedForRephrasing(){return this._instance.isUsedForRephrasing()}static isPremiumParaphraseMode(e,t){return this._instance.isPremiumParaphraseMode(e,t)}static getParaphraserSkill(e){return this._instance.getParaphraserSkill(e)}static isParaphraserSentenceSkill(e){return this._instance.isParaphraserSentenceSkill(e)}},Le=s.get(e.EXTN_PREFIX);class be{static get DEFAULT_SETTINGS(){return null===this.DEFAULT_SETTINGS_CACHED&&(this.DEFAULT_SETTINGS_CACHED={apiServerUrl:i,autoCheck:!0,knownEmail:"",username:"",password:"",token:"",userId:null,motherTongue:"",geoIpLanguages:[],geoIpCountry:"",preferredLanguages:[],forcePreferredLanguages:!1,enVariant:fe.getPreferredLanguageVariant(["en-US","en-GB","en-AU","en-CA","en-NZ","en-ZA"])||"en-US",deVariant:fe.getPreferredLanguageVariant(["de-DE","de-AT","de-CH"])||"de-DE",ptVariant:fe.getPreferredLanguageVariant(["pt-PT","pt-BR","pt-MZ","pt-AO"])||"pt-BR",caVariant:"ca-ES",dictionary:[],hasSynonymsEnabled:!1,hasPickyModeEnabledGlobally:!1,openCardHotkey:"",isDictionarySynced:!1,ignoredRules:[],disabledDomains:[],disabledEditorGroups:[],ignoreCheckOnDomains:[],disableRecommendationOnDomains:[],autoCheckOnDomains:[],remainingRephrasingsAmount:null,remainingRephrasingsDate:null,hasRephrasingEnabled:!0,hasContextMenuOptionEnabled:!0,hasLollipopEnabled:!1,lastMigration:null,translateLanguages:[]}),this.DEFAULT_SETTINGS_CACHED}static _combineObjects(e,t){const r=$(e);for(const e in r)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}static _dec2hex(e){return("0"+e.toString(16)).substr(-2)}static _generateUniqueId(){const e=new Uint8Array(8);return crypto.getRandomValues(e),Array.from(e,be._dec2hex).join("")}static _isListContainsDomain(e,t){return Z(e,t)}static getDefaultSettings(){return $(be.DEFAULT_SETTINGS)}static getDefaultPrivacySettings(){return j(be.DEFAULT_PRIVACY_SETTINGS)}constructor(){this._eventBus=new se,this._onReadyCallbacks=[]}addEventListener(e,t){this._eventBus.subscribe(e,t)}removeEventListener(e,t){this._eventBus.unsubscribe(e,t)}disableDomain(e){const t=K(e),r=this.getSettings(),n="object"==typeof r.disabledDomains?r.disabledDomains:[];return n.push(t),this.updateSettings({disabledDomains:n})}enableDomain(e){const t=K(e),r=this.getSettings();let n="object"==typeof r.disabledDomains?r.disabledDomains:[];return n=n.filter(e=>{const r=K(e);return r!==t&&!t.endsWith("."+r)}),this.updateSettings({disabledDomains:n})}addToDomainSettings(e,t){const r=K(e),n=this.getSettings()[t]||[];return n.push(r),this.updateSettings({[t]:W(n)})}removeFromDomainSettings(e,t){const r=K(e);let n=this.getSettings()[t]||[];return n=n.filter(e=>{const t=K(e);return t!==r&&!r.endsWith("."+t)}),this.updateSettings({[t]:n})}isInternalTester(){const e=this.getSettings();return this.getUIState().showRuleId||l.test(e.username)||"quillbotautomation+1@gmail.com"===e.username}disableEditorGroup(e,t){const r=K(e),n=this.getSettings(),s="object"==typeof n.disabledEditorGroups?n.disabledEditorGroups:[];return s.push({domain:r,editorGroupId:t}),this.updateSettings({disabledEditorGroups:s})}enableEditorGroup(e,t){const r=K(e),n=this.getSettings(),s="object"==typeof n.disabledEditorGroups?n.disabledEditorGroups:[],i=s.filter(e=>!(e.domain===r&&e.editorGroupId===t));return i.length!==s.length?this.updateSettings({disabledEditorGroups:i}):Promise.resolve()}enableDomainAndEditorGroup(e,t){return this.getCheckSettings(e,t).isEditorGroupDisabled&&this.enableEditorGroup(e,t),this.enableDomain(e)}grantUnlimitedRephrasings(){return this.updateSettings({remainingRephrasingsAmount:null,remainingRephrasingsDate:null})}restrictRephrasings(){const{remainingRephrasingsAmount:e,remainingRephrasingsDate:t}=this.getSettings();return this.updateSettings({remainingRephrasingsAmount:e??3,remainingRephrasingsDate:t||(new Date).toISOString()})}enablePaidSubscription(){return this.updateUIState({hasPaidSubscription:!0,hasPaidSubscriptionEnded:!1})}disablePaidSubscription(){const{hasPaidSubscription:e,hasPaidSubscriptionEnded:t}=this.getUIState();return this.updateUIState({hasPaidSubscription:!1,hasPaidSubscriptionEnded:t||!0===e})}isPremium(){return this.getUIState().hasPaidSubscription||Ne.isRunning()}getIgnoredRuleIds(){return this.getManagedSettings().disableIgnoredRules?[]:this.getSettings().ignoredRules.map(e=>e.id)}hasIgnoredRule(e){return this.getIgnoredRuleIds().includes(e)}addIgnoredRule(e){const{ignoredRules:t}=this.getSettings();this.hasIgnoredRule(e.id)||this.updateSettings({ignoredRules:[...t,e]})}async removeIgnoredRule(e){if(this.hasIgnoredRule(e)){const t=this.getSettings().ignoredRules.filter(t=>t.id!==e);await this.updateSettings({ignoredRules:t})}}hasRephrasingEnabled(){return!this.hasCustomServer()&&(!Ne.isFunctionalityLocked()&&(!!Pe.canSeeLollipop(this)||this.getSettings().hasRephrasingEnabled))}destroy(){this._eventBus.destroy(),this._onReadyCallbacks=[]}}be.eventNames={settingsChanged:`${Le}-storageController.settingsChanged`,userCredentialsChanged:`${Le}-storageController.userCredentialsChanged`,configurationChanged:`${Le}-storageController.configurationChanged`,privacySettingsChanged:`${Le}-storageController.privacySettingsChanged`,uiStateChanged:`${Le}-storageController.uiStateChanged`},be.DEFAULT_SETTINGS_CACHED=null,be.DEFAULT_MANAGED_SETTINGS={apiServerUrl:"",loginUrl:"",disablePrivacyConfirmation:!1,disablePersonalDictionary:!1,disableIgnoredRules:!1,disableOpenInEditor:!1,allowedURLs:[]},be.DEFAULT_REMOTE_CONFIGURATION={unsupportedDomains:[]},be.DEFAULT_PRIVACY_SETTINGS={allowRemoteCheck:!1,hasStatisticsCollectionEnabled:!0,hasMLDataCollectionEnabled:!1,acceptedTermsOfServiceVersion:null,lastTermsOfServiceModalShown:null,hasOptedIntoThirdPartyAiGrammarChecking:!0,hasOptedIntoThirdPartyAiParaphrasing:!0},be.DEFAULT_STATISTICS={sessionCount:0,appliedSuggestions:0,appliedSynonyms:0,hiddenErrors:[],firstVisit:null,lastActivity:null,ratingValue:null,premiumClicks:0,lastPing:null,hasInstalledQBExtension:!1},be.DEFAULT_UI_STATE={hasSeenPrivacyConfirmationDialog:!1,hasPaidSubscription:!1,hasPaidSubscriptionEnded:!1,hasRated:!1,hasUsedValidator:!1,hasSeenOnboarding:!1,hasSeenNewGoogleDocsTeaser:!1,hasSeenNewGoogleSlidesTeaser:!1,hasSeenGoogleDocsMenuBarHint:!1,lastChangelogNov2024Seen:null,changelogNov2024CountdownEnd:null,changelogNov2024Coupon:null,showRuleId:!1,dialogPosition:"default",countMode:"characters",hasSeenTurnOnMessagePopup:!1,isDarkModeEnabled:!1,skipFixAllConfirmation:!1,skipFixAllOverLimitConfirmation:!1,hasClickedLollipop:!1},be.DEFAULT_TEST_FLAGS={testGroups:{},experiments:{}},be.DEFAULT_TRIAL_SETTINGS={isTrialSupportedInCountry:!1,trialToken:null,trialStartedAt:null,lastTrialTokenAttempt:null,trialUserType:null,hasSeenTrialPage:!1},be.DEFAULT_COPY_PASTE_INFO={copiedText:"",copiedAt:null,copiedFrom:null};class ye{static init(e){this._instanceCtor=e}static create(){return this._instanceCtor()}}class Ne{static init(){this._storageController=this._storageController||ye.create()}static isEligible(){if(!s.get(e.SUPPORTS_TRIAL))return!1;if("extension"!==de.getType())return!1;if(navigator.webdriver)return!1;if(!R.isChromium()&&!R.isFirefox())return!1;if((this._storageController.hasCustomLogin()||this._storageController.hasCustomServer())&&!this._storageController.isInternalTester())return!1;const{hasPaidSubscription:t,hasPaidSubscriptionEnded:r}=this._storageController.getUIState();if(t||r)return!1;if(!this._storageController.getTrialSettings().isTrialSupportedInCountry)return!1;if(!this._storageController.getPrivacySettings().allowRemoteCheck)return!1;const{username:n}=this._storageController.getSettings();return!n||!T.test(n)}static isRunning(){if(!this.isEligible())return!1;const{trialStartedAt:e}=this._storageController.getTrialSettings();return!!e&&e+A>=Date.now()}static getStartDate(){const{trialStartedAt:e}=this._storageController.getTrialSettings();return e?new Date(e):null}static getEndDate(){const{trialStartedAt:e}=this._storageController.getTrialSettings();return e?new Date(e+A):null}static hasEnded(){const{trialStartedAt:e}=this._storageController.getTrialSettings();return!!e&&e+A<Date.now()}static isFunctionalityLocked(){return this.isEligible()&&this.hasEnded()}static hasUpgraded(){const{trialStartedAt:e}=this._storageController.getTrialSettings(),{hasPaidSubscription:t}=this._storageController.getUIState();return Boolean(e&&t)}static canStart(){return this.isEligible()&&!this._storageController.getTrialSettings().trialStartedAt}static getRemainingDays(){if(!this.isRunning())return null;const e=this.getEndDate();if(!e)return null;const t=new Date;return(e.getTime()-t.getTime())/1e3/60/60/24}static start(e){return this.canStart()?this._storageController.updateTrialSettings({trialUserType:e,trialStartedAt:Date.now()}):Promise.reject("Cannot start, isEligible:"+this.isEligible()+" isRunning:"+this.isRunning())}static getCoupon(){if(!this.isRunning()&&!this.isFunctionalityLocked())return null;const e=this.getEndDate();if(!e)return null;if((new Date).getTime()-e.getTime()>2592e6)return null;const t=this._storageController.getActiveCoupon();return t&&t.percent>20?t:{code:"TRIAL",percent:20}}static getToken(){return this._storageController.getTrialSettings().trialToken?.jwt||null}static getStatus(){return this.hasUpgraded()?"upgraded":this.isRunning()?"started":this.hasEnded()?"ended":this.isEligible()?"eligible":"ineligible"}static getUserType(){const{trialUserType:e}=this._storageController.getTrialSettings();return e}}class Oe{static merge(e,t=!1,r=!1,n=!1){let{errors:s,pickyErrors:i,premiumErrors:a,premiumPickyErrors:o,sentenceRanges:c=[],recommendationErrors:l=[]}=this.filterAndMigrateErrors(e.existing.errors,e.existing.pickyErrors,e.existing.premiumErrors,e.existing.premiumPickyErrors,e.existing.recommendationErrors,e.existing.sentenceRanges,e.existingCheckedText,e.newCheckedText,e.existingRecommendationCheckedText,e.newRecommendationCheckedText,r,n);this.mergeParagraphLevelErrors(s,i,a,o,l,c,e.new.paragraphLevel.errors,e.new.paragraphLevel.pickyErrors,e.new.paragraphLevel.premiumErrors,e.new.paragraphLevel.premiumPickyErrors,e.new.paragraphLevel.recommendationErrors||[],e.new.paragraphLevel.sentenceRanges),this.mergeTextLevelErrors(s,i,a,o,e.new.textLevel.errors,e.new.textLevel.pickyErrors,e.new.textLevel.premiumErrors,e.new.textLevel.premiumPickyErrors);const g=this.getDuplicateErrors(e.existing,e.existingCheckedText,e.newCheckedText,e.existingRecommendationCheckedText,e.newRecommendationCheckedText);return this.sortErrors(s,i,a,o,l),this.setIdsOnErrors(s,i,a,o,l,g),s=this.migrateOffsetsToOriginalText(s,e.newCheckedText.usedParts),i=this.migrateOffsetsToOriginalText(i,e.newCheckedText.usedParts),a=this.migrateOffsetsToOriginalText(a,e.newCheckedText.usedParts),o=this.migrateOffsetsToOriginalText(o,e.newCheckedText.usedParts),l=this.migrateOffsetsToOriginalText(l,e.newRecommendationCheckedText.usedParts),c=this.migrateOffsetsToOriginalText(c,e.newCheckedText.usedParts),t&&(i=i.filter(e=>!m.includes(e.rule.id)),i.forEach(e=>{e.rule.id="HIDDEN_RULE",e.fixes=[]}),a=[...a,...o,...i],o=[],i=[],this.sortErrorsByOffset(a)),{errors:s,pickyErrors:i,premiumErrors:a,premiumPickyErrors:o,recommendationErrors:l,sentenceRanges:c}}static getDuplicateErrors(e,t,r,n,s){let{errors:i,pickyErrors:a,premiumErrors:o,premiumPickyErrors:c,recommendationErrors:l=[]}=e;i=this.migrateOffsetsToValuableText(i,t.usedParts),a=this.migrateOffsetsToValuableText(a,t.usedParts),o=this.migrateOffsetsToValuableText(o,t.usedParts),c=this.migrateOffsetsToValuableText(c,t.usedParts),l=this.migrateOffsetsToValuableText(l,n.usedParts);const g=F(t.text,r.text),u=F(n.text,s.text),d=(e,t)=>{if(!e.isParagraphLevelCheck)return!0;const r=H(t,t=>{const r=t.oldOffset;if(null===t.oldText)return e.start>=r?1:-1;const n=t.oldOffset+t.oldText.length+1;return te(e.start,r,n,!0)});return!(!r||!r.textDiff)||void 0};return i=i.filter(e=>d(e,g)),a=a.filter(e=>d(e,g)),o=o.filter(e=>d(e,g)),c=c.filter(e=>d(e,g)),l=l.filter(e=>d(e,u)),i=this.migrateOffsetsBetweenTexts(i,g),a=this.migrateOffsetsBetweenTexts(a,g),o=this.migrateOffsetsBetweenTexts(o,g),c=this.migrateOffsetsBetweenTexts(c,g),l=this.migrateOffsetsBetweenTexts(l,u),{errors:i,pickyErrors:a,premiumErrors:o,premiumPickyErrors:c,recommendationErrors:l}}static migrateOffsetsToValuableText(e,t){const r=[];for(const n of e){const e=H(t,e=>te(n.start,e.originalStart,e.originalEnd,!0)),s=H(t,e=>te(n.end,e.originalStart,e.originalEnd));if(!e||!s)continue;const i=$(n);i.start-=e.posDiff,i.end-=s.posDiff,i.length=i.end-i.start,r.push(i)}return r}static migrateOffsetsBetweenTexts(e,t,r,n,s,i){let a,o=!1,c=!1,l=!1;"string"==typeof t&&"string"==typeof r?(a=F(t,r),o="boolean"==typeof n&&n,c="boolean"==typeof s&&s,l="boolean"==typeof i&&i):(a=t,o="boolean"==typeof r&&r,c="boolean"==typeof n&&n,l="boolean"==typeof s&&s);const g=[];for(const t of e){const e=H(a,e=>{const r=e.oldOffset;if(null===e.oldText)return t.start>=r?1:-1;const n=e.oldOffset+e.oldText.length+1;return te(t.start,r,n,!0)}),r=$(t);if(e){if(e.textDiff){if(o)continue;{const t=e.oldOffset+e.textDiff.from,n=t+e.textDiff.oldFragment.length,s=!c;if(ee(t,n,r.start,r.end,s)){if(l){if(r.start>t&&r.end<n)continue;const s=e.textDiff.newFragment.length-e.textDiff.oldFragment.length;r.start>t&&(r.start=r.start+s),r.end>=t&&(r.end=r.end+s),r.length=r.end-r.start,r?.rule?.phraseDiff?.forEach(r=>{const n=e.textDiff.newFragment.length-e.textDiff.oldFragment.length;r.sourceStart>t&&(r.sourceStart+=n),r.sourceEnd>t&&(r.sourceEnd+=n)}),g.push(r)}continue}if(r.start>=n){const t=e.textDiff.newFragment.length-e.textDiff.oldFragment.length;r.start+=t,r.end+=t,r?.rule?.phraseDiff?.forEach(e=>{e.sourceStart+=t,e.sourceEnd+=t,e.targetEnd+=t,e.targetStart+=t})}}}r.start+=e.newOffset-e.oldOffset,r.end=r.start+r.length,r?.rule?.phraseDiff?.forEach(t=>{const r=t.sourceEnd-t.sourceStart,n=t.targetEnd-t.targetStart;t.sourceStart+=e.newOffset-e.oldOffset,t.sourceEnd=t.sourceStart+r,t.targetStart+=e.newOffset-e.oldOffset,t.targetEnd=t.targetStart+n})}g.push(r)}return g}static migrateOffsetsToOriginalText(e,t){const r=[];for(const n of e){const e=H(t,e=>te(n.start,e.start,e.end,!0)),s=H(t,e=>te(n.end,e.start,e.end));if(!e||!s)continue;const i=$(n);i.start+=e.posDiff,i.end+=s.posDiff,i.length=i.end-i.start,r.push(i)}return r}static filterAndMigrateErrors(e,t,r,n,s,i,a,o,c,l,g=!1,u=!1){u?s=(s||[]).filter(e=>e.isParagraphLevelCheck):(e=e.filter(e=>e.isParagraphLevelCheck),t=t.filter(e=>e.isParagraphLevelCheck),r=r.filter(e=>e.isParagraphLevelCheck),n=n.filter(e=>e.isParagraphLevelCheck)),e=this.migrateOffsetsToValuableText(e,a.usedParts),t=this.migrateOffsetsToValuableText(t,a.usedParts),r=this.migrateOffsetsToValuableText(r,a.usedParts),n=this.migrateOffsetsToValuableText(n,a.usedParts),s=this.migrateOffsetsToValuableText(s||[],c.usedParts),i=this.migrateOffsetsToValuableText(i||[],a.usedParts);const d=F(a.text,o.text),h=F(c.text,l.text);return g?(e=this.migrateOffsetsBetweenTexts(e,a.text,o.text,!1,!0),t=this.migrateOffsetsBetweenTexts(t,a.text,o.text),r=this.migrateOffsetsBetweenTexts(r,a.text,o.text),n=this.migrateOffsetsBetweenTexts(n,a.text,o.text),s=this.migrateOffsetsBetweenTexts(s,c.text,l.text,!1,!0),i=this.migrateOffsetsBetweenTexts(i,a.text,o.text,!1,!0,!0)):(e=this.migrateOffsetsBetweenTexts(e,d,!0),t=this.migrateOffsetsBetweenTexts(t,d,!0),r=this.migrateOffsetsBetweenTexts(r,d,!0),n=this.migrateOffsetsBetweenTexts(n,d,!0),s=this.migrateOffsetsBetweenTexts(s,h,!1,!1),i=this.migrateOffsetsBetweenTexts(i,d,!0)),{errors:e,pickyErrors:t,premiumErrors:r,premiumPickyErrors:n,recommendationErrors:s,sentenceRanges:i}}static mergeParagraphLevelErrors(e,t,r,n,s,i,a,o,c,l,g,u=[]){e.push(...a),t.push(...o),r.push(...c),n.push(...l),s.push(...g),i.push(...u)}static mergeTextLevelErrors(e,t,r,n,s,i,a,o){for(const t of s)e.some(e=>e.start===t.start&&e.end===t.end)||e.push(t);for(const e of i)t.some(t=>t.start===e.start&&t.end===e.end)||t.push(e);for(const e of a)r.some(t=>t.start===e.start&&t.end===e.end)||r.push(e);for(const e of o)n.some(t=>t.start===e.start&&t.end===e.end)||n.push(e)}static sortErrors(e,t,r,n,s){this.sortErrorsByOffset(e),this.sortErrorsByOffset(t),this.sortErrorsByOffset(r),this.sortErrorsByOffset(n),this.sortErrorsByOffset(s)}static sortErrorsByOffset(e){e.sort((e,t)=>e.start===t.start?e.isParagraphLevelCheck?1:-1:e.start>t.start?1:-1)}static migrateErrorsBetweenSameOriginalTexts(e,t,r){const n=[];for(const s of e){let e=s.start,i=s.end,a=H(t.usedParts,t=>te(e,t.originalStart,t.originalEnd,!0)),o=H(t.usedParts,e=>te(i,e.originalStart,e.originalEnd));if(!a||!o)continue;if(e-=a.posDiff,i-=o.posDiff,a=H(r.usedParts,t=>te(e,t.start,t.end,!0)),o=H(r.usedParts,e=>te(i,e.start,e.end)),!a||!o)continue;e+=a.posDiff,i+=o.posDiff;const c=$(s);c.start=e,c.end=i,c.length=i-e,n.push(c)}return n}static setIdsOnErrors(e,t,r,n,s,i){function a(e,t){if(e.id)return;const r=t.find(t=>{return n=e,(r=t).start===n.start&&r.end===n.end&&r.isParagraphLevelCheck===n.isParagraphLevelCheck;var r,n});e.id=r?r.id:"error:"+ ++Oe.INCREMENTAL_ID}e.forEach(e=>a(e,i.errors)),t.forEach(e=>a(e,i.pickyErrors)),r.forEach(e=>a(e,i.premiumErrors)),n.forEach(e=>a(e,i.premiumPickyErrors)),s.forEach(e=>a(e,i.recommendationErrors||[]))}static sortSentenceRanges(e){e.sort(({start:e},{start:t})=>e-t)}}Oe.INCREMENTAL_ID=0;
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class xe{constructor(e=document){this._window=e.defaultView,this._document=e,this.clearCache()}_getElementCache(e){let t=this._elementCache.get(e);return t||(t={},this._elementCache.set(e,t)),t}_consolidateSVGTransformMatrix(e){const t={a:1,b:0,c:0,d:1,e:0,f:0};for(let r=0;r<e.transform.baseVal.length;r++){const n=e.transform.baseVal[r];1===n.type?(t.a=n.matrix.a,t.b=n.matrix.b,t.c=n.matrix.c,t.d=n.matrix.d,t.e=n.matrix.e,t.f=n.matrix.f):2===n.type?(t.e=n.matrix.e,t.f=n.matrix.f):3===n.type?(t.a=n.matrix.a,t.d=n.matrix.d):5===n.type?t.b=n.matrix.b:6===n.type&&(t.c=n.matrix.c)}return t}clearCache(){this._documentVisibleBox=null,this._documentGap=null,this._documentScroll=null,this._elementCache=new WeakMap}_contains(e,t){return e&&e!==t&&function(e,t){let r=t;for(;r&&r.parentNode;){if(r===e||r.parentNode===e)return!0;r=r.parentNode instanceof DocumentFragment?r.parentNode.host:r.parentNode}return!1}(e,t)}contains(e,t){return this._contains(e,t)}_getComputedStyle(e,t,r){let n,s;return"object"==typeof t?(n=t,s=""):(n=r,s=t),n.computedStyle||(n.computedStyle=new Map),n.computedStyle.has(s)||n.computedStyle.set(s,this._window.getComputedStyle(e,s||null)),n.computedStyle.get(s)}getComputedStyle(e,t=""){return this._getComputedStyle(e,t,this._getElementCache(e))}_getComputedStyleMap(e,t){return e.computedStyleMap?(t.computedStyleMap||(t.computedStyleMap=e.computedStyleMap()),t.computedStyleMap):null}getComputedStyleMap(e){return this._getComputedStyleMap(e,this._getElementCache(e))}getInlineStyle(e,t){return e.style instanceof CSSStyleDeclaration?e.style.getPropertyValue(t):""}getStyle(e,t,r){let n,s;return"string"==typeof r?(n=t,s=r):(n="",s=t),this.getStyles(e,n,[s])[s]}getStyles(e,t,r){const n="string"==typeof t?t:"",s=this._getElementCache(e),i=this._getComputedStyle(e,n,s);let a=null;if(Array.isArray(t))a=t;else if(Array.isArray(r))a=r;else{a=[];for(let e=0;e<i.length;e++)a.push(i[e])}const o={};for(const t of a)if("line-height"===t||"lineHeight"===t){const r=this.getInlineStyle(e,t);r&&r.includes("px")?o[t]=r:o[t]=i[t]||""}else if("font"!==t||i[t])if("transform"===t&&e instanceof SVGGElement&&R.isSafari()&&e.hasAttribute("transform")){const r=this._consolidateSVGTransformMatrix(e);o[t]=`matrix(${r.a}, ${r.b}, ${r.c}, ${r.d}, ${r.e}, ${r.f})`}else o[t]="zoom"===t?i[t]||"1":i[t]||"";else{const r=i["font-style"],n=i["font-variant"],s=i["font-weight"],a=i["font-size"],c=this.getInlineStyle(e,"line-height")||i["line-height"]||"",l=i["font-family"];o[t]=`${r} ${n} ${s} ${a} ${c?"/ "+c:""} ${l}`}return o}getExactStyle(e,t){return this.getExactStyles(e,[t])[t]}getExactStyles(e,t){function r(e){return"number"==typeof e.value&&"string"==typeof e.unit}const n=this._getElementCache(e),s=this._getComputedStyleMap(e,n);if(s){const e={};for(const n of t){const t=s.get(n);t?r(t)?"number"===t.unit?e[n]=t.value.toString():e[n]=t.value+t.unit:e[n]=t.toString():e[n]=""}return e}return this.getStyles(e,t)}setStyle(e,t,r,n=!1){Array.isArray(e)||(e=[e]);const s={[t]:r};this.setStyles(e,s,n)}setStyles(e,t,r=!1){Array.isArray(e)||(e=[e]);for(const n of e)for(const e in t){let s=t[e].trim();const i=r||xe.IMPORTANT_REG_EXP.test(s);s=s.replace(xe.IMPORTANT_REG_EXP,""),n.style.setProperty(e,s,i?"important":"")}}copyStyles(e,t,r,n=!1){const s=this.getStyles(e,r);this.setStyles(t,s,n)}resetStyles(e,t,r=!1){Array.isArray(e)||(e=[e]);let n="";for(const e in t){let s=t[e].trim();r&&!xe.IMPORTANT_REG_EXP.test(s)&&(s+=" !important"),n+=`${e}: ${s};`}for(const t of e)t.style.cssText=n}removeStyle(e,t){Array.isArray(e)||(e=[e]),this.removeStyles(e,[t])}removeStyles(e,t){Array.isArray(e)||(e=[e]);for(const r of e)for(const e of t)r.style.removeProperty(e)}getBoundingClientRect(e){return this._getBoundingClientRect(e,this._getElementCache(e))}_getBoundingClientRect(e,t){return t.boundingClientRect||(t.boundingClientRect=$(e.getBoundingClientRect())),t.boundingClientRect}getRelativeClientRect(e,t){const r=this._getBoundingClientRect(e,this._getElementCache(e)),n=this._getBoundingClientRect(t,this._getElementCache(t)),s=r.top-n.top,i=r.left-n.left,a=r.width,o=r.height;return{top:s,right:i+a,bottom:s+o,left:i,width:a,height:o}}_getBorderBox(e,t,r,n){const s="borderBox"+(t?"WithScroll":"")+(r?"WithScale":"");if(!n[s]){const i=this._getBoundingClientRect(e,n);let{top:a,left:o,width:c,height:l}=i;if(r){const t=this.getZoom(e);a*=t,o*=t,c*=t,l*=t}else{const t=this._getScaleFactor(e,n);c/=t.x,l/=t.y}if(t){const t=this.getDocumentScroll();if(a+=t.top,o+=t.left,this._document.body&&this._contains(this._document.body,e)){const e=this.getDocumentGap();a-=e.top,o-=e.left}}n[s]={top:a,right:o+c,bottom:a+l,left:o,width:c,height:l}}return n[s]}getBorderBox(e,t=!0,r=!0){return this._getBorderBox(e,t,r,this._getElementCache(e))}_getPaddingBox(e,t,r,n){const s="paddingBox"+(t?"WithScroll":"")+(r?"WithScale":"");if(!n[s]){let{top:i,left:a,width:o,height:c}=this._getBorderBox(e,t,r,n),l={x:1,y:1};r&&(l=this._getScaleFactor(e,n));const g=r?this._getZoom(e,n):1,u=this._getComputedStyle(e,n),d=(parseFloat(u["border-top-width"])||0)*l.y*g,h=(parseFloat(u["border-right-width"])||0)*l.x*g,m=(parseFloat(u["border-bottom-width"])||0)*l.y*g,p=(parseFloat(u["border-left-width"])||0)*l.x*g;let _=0,E=0;if("BackCompat"!==this._document.compatMode||e!==this._document.body||e!==this._document.scrollingElement){let{width:t,height:r}=this._getClientWidthAndHeight(e,n);t=t*l.x*g,r=r*l.y*g;let s=o;s%1>0&&"offsetWidth"in e&&(s=e.offsetWidth*l.x*g);let i=c;i%1>0&&"offsetHeight"in e&&(i=e.offsetHeight*l.y*g),_=s-p-t-h,E=i-d-r-m,_<1&&(_=0),E<1&&(E=0)}i+=d,a+=p,o=o-p-_-h,c=c-d-E-m,this._isRTL(e,n)&&(a+=_),n[s]={top:i,right:a+o,bottom:i+c,left:a,width:o,height:c,border:{top:d,right:h,bottom:m,left:p}}}return n[s]}getPaddingBox(e,t=!0,r=!0){return this._getPaddingBox(e,t,r,this._getElementCache(e))}_getContentBox(e,t,r,n){const s="contentBox"+(t?"WithScroll":"")+(r?"WithScale":"");if(!n[s]){let{top:i,left:a,width:o,height:c,border:l}=this._getPaddingBox(e,t,r,n),g={x:1,y:1};r&&(g=this._getScaleFactor(e,n));const u=r?this._getZoom(e,n):1,d=this._getComputedStyle(e,n),h=(parseFloat(d["padding-top"])||0)*g.y*u,m=(parseFloat(d["padding-right"])||0)*g.x*u,p=(parseFloat(d["padding-bottom"])||0)*g.y*u,_=(parseFloat(d["padding-left"])||0)*g.x*u;i+=h,a+=_,o=o-_-m,c=c-h-p,n[s]={top:i,right:a+o,bottom:i+c,left:a,width:o,height:c,border:l,padding:{top:h,right:m,bottom:p,left:_}}}return n[s]}getContentBox(e,t=!0,r=!0){return this._getContentBox(e,t,r,this._getElementCache(e))}_getClientWidthAndHeight(e,t){let r=e.clientWidth,n=e.clientHeight;if(0===r&&0===n&&"offsetWidth"in e){const s=this._getComputedStyle(e,t);"inline"===s.display&&(r=e.offsetWidth-parseInt(s["border-left-width"])-parseInt(s["border-right-width"]),n=e.offsetHeight-parseInt(s["border-top-width"])-parseInt(s["border-bottom-width"]))}return{width:r,height:n}}_getScrollDimensions(e,t,r){const n="scrollDimensions"+(t?"WithScale":"");if(!r[n]){let s=e.scrollWidth,i=e.scrollHeight;if(0===s&&(0===i||0===e.clientHeight)){const t=this._getClientWidthAndHeight(e,r);s=t.width,i=t.height}if(t){const t=this._getScaleFactor(e,r),n=this._getZoom(e,r);s=s*t.x*n,i=i*t.y*n}r[n]={width:s,height:i}}return r[n]}getScrollDimensions(e,t=!0){return this._getScrollDimensions(e,t,this._getElementCache(e))}_getScrollPosition(e,t,r,n){const s="scrollPosition"+(t?"WithScale":"")+(r?"WithZoom":"");if(!n[s]){let i={x:1,y:1};t&&(i=this._getScaleFactor(e,n));const a=r?this._getZoom(e,n):1,o=e===this._document.body&&"BackCompat"===this._document.compatMode,c=o?0:e.scrollTop*i.y*a,l=o?0:e.scrollLeft*i.x*a;n[s]={top:c,left:l}}return n[s]}getScrollPosition(e,t=!0,r=t){return this._getScrollPosition(e,t,r,this._getElementCache(e))}_isPositionFixed(e,t){if(void 0===t.isPositionFixed){t.isPositionFixed=!1;let r=e;for(;r;){if("fixed"===this.getStyle(r,"position")){t.isPositionFixed=!0;break}r=r.parentElement}}return t.isPositionFixed}isPositionFixed(e){return this._isPositionFixed(e,this._getElementCache(e))}_getContainingBlock(e,t,r){const n="absolute"===t,s=n?"containingBlockForAbsolutePosition":"containingBlockForFixedPosition";let i=r[s];if(void 0===i){i=null;const t=[document.documentElement,document.body],r=["layout","paint","strict","content"],s=["transform","perspective"];let a=e;for(;a&&!t.includes(a);){const e=this.getStyles(a,["position","transform","perspective","will-change","filter","contain","container-type","backdrop-filter"]);if(n&&"static"!==e.position||"none"!==e.transform||"none"!==e.perspective||"none"!==e.filter||r.includes(e.contain)||s.includes(e["will-change"])||"normal"!==e["container-type"]||"none"!==e["backdrop-filter"]&&""!==e["backdrop-filter"]||R.isFirefox()&&"filter"===e["will-change"]){i=this.getPaddingBox(a);break}a=a.parentElement}}return r[s]=i,i}getContainingBlock(e,t="absolute"){return this._getContainingBlock(e,t,this._getElementCache(e))}getScaleFactor(e){return this._getScaleFactor(e,this._getElementCache(e))}_getScaleFactor(e,t){if(void 0===t.scaleFactor){if(e instanceof SVGElement){let t=1;const r=e.getAttribute("transform")||"",n=/scale\((\d+(\.\d+)?)\)/.exec(r);return n&&(t=+n[1]),{x:t,y:t}}{const r=this._getBoundingClientRect(e,t),n=e.offsetWidth,s=e.offsetHeight;t.scaleFactor={x:1,y:1},r.width>0&&n>0&&Math.abs(r.width-n)>1&&(t.scaleFactor.x=r.width/n),r.height>0&&s>0&&Math.abs(r.height-s)>1&&(t.scaleFactor.y=r.height/s)}}return t.scaleFactor}_getZoom(e,t){if(R.isFirefox()||R.isThunderbird())return 1;if("number"!=typeof t.zoom){let r=1,n=e;for(;n&&n!==this._document.documentElement;){r*=+this.getStyle(n,"zoom"),n=n.parentNode instanceof ShadowRoot&&n.parentNode.host instanceof HTMLElement?n.parentNode.host:n.parentElement}t.zoom=r}return t.zoom}getZoom(e){return this._getZoom(e,this._getElementCache(e))}_getStackingContextWithZIndex(e){const t=this.getComputedStyle(e),r=parseInt(t.zIndex||"");if(isNaN(r))return null;if(t.position&&xe.NON_STATIC_POSITIONS.indexOf(t.position)>-1)return{zIndex:r};if(e.parentElement){const t=this.getComputedStyle(e.parentElement);if("flex"===t.display||"grid"===t.display)return{zIndex:r}}return null}getZIndex(e,t=this._document.documentElement){let r="auto",n=e;if(!n.ownerDocument)return"auto";const s=n.ownerDocument.defaultView;if(!s)throw new Error("Failed to retrieve the current element's window object.");const{Element:i,ShadowRoot:a}=s;for(;n&&n!==this._document&&n!==t&&n instanceof i;){const e=this._getStackingContextWithZIndex(n);e&&(r=e.zIndex),n=n.parentNode instanceof a?n.parentNode.host:n.parentElement}return r}_isRTL(e,t){return"boolean"!=typeof t.isRTL&&(t.isRTL="rtl"===this.getStyle(e,"direction")),t.isRTL}isRTL(e){return this._isRTL(e,this._getElementCache(e))}isStackingContext(e){const t=this.getComputedStyle(e);return!!(t.position&&xe.NON_STATIC_POSITIONS.indexOf(t.position)>-1)||("none"!==t.transform||"none"!==t.filter||"none"!==t.clipPath||"none"!==t.perspective||Number(t.opacity)<1)}_getTextClientRects(e){const t=this._document.createRange();return t.setStart(e.node,e.start),t.setEnd(e.node,e.end),Array.from(t.getClientRects())}getTextBoundingBoxes(e,t,r=!0){Array.isArray(e)||(e=[e]);const n=[];let s=0,i=0;if(r){const e=this.getDocumentScroll();if(s+=e.top,i+=e.left,this._document.body&&this._contains(this._document.body,t)){const e=this.getDocumentGap();s-=e.top,i-=e.left}}for(const t of e)try{const e=this._getTextClientRects(t);for(const t of e){if(t.width<xe.MIN_TEXT_BOX_WIDTH)continue;const e=n[n.length-1],r=t.top+s,a=t.right+i,o=t.bottom+s,c=t.left+i,l=t.width,g=t.height;e&&e.right===c&&e.top===r&&e.bottom===o&&e.height===g?(e.right=a,e.width=e.width+l):n.push({top:r,right:a,bottom:o,left:c,width:l,height:g})}}catch(e){}return n}getRelativeTextBoundingBoxes(e,t,r=this.getScrollPosition(t)){Array.isArray(e)||(e=[e]);const n=[],s=this.getPaddingBox(t,!1,!1),i=s.left-r.left,a=s.top-r.top;for(const t of e)try{const e=this._getTextClientRects(t);for(const t of e){if(t.width<xe.MIN_TEXT_BOX_WIDTH)continue;const e=n[n.length-1],r=t.top-a,s=t.right-i,o=t.bottom-a,c=t.left-i,l=t.width,g=t.height;e&&e.right===c&&e.top===r&&e.bottom===o&&e.height===g?(e.right=s,e.width=e.width+l):n.push({top:r,right:s,bottom:o,left:c,width:l,height:g})}}catch(e){console.error("LT range error",e)}const o=this.getScaleFactor(t);for(const e of n)e.top=Math.round(e.top/o.y),e.right=Math.round(e.right/o.x),e.bottom=Math.round(e.bottom/o.y),e.left=Math.round(e.left/o.x),e.width=e.right-e.left,e.height=e.bottom-e.top;return n}getRelativeTextBoundingBox(e,t){const r=this.getRelativeTextBoundingBoxes(e,t),n=Math.min(...r.map(e=>e.top)),s=Math.max(...r.map(e=>e.right)),i=Math.max(...r.map(e=>e.bottom)),a=Math.min(...r.map(e=>e.left));return{top:n,right:s,bottom:i,left:a,width:s-a,height:i-n}}_hasRelativePosition(e,t){const r=this._getComputedStyle(e,t).position||"static";return xe.NON_STATIC_POSITIONS.indexOf(r)>-1}getDocumentGap(){if(!this._documentGap&&(this._documentGap={top:0,left:0},this._document.body&&this._hasRelativePosition(this._document.body,this._getElementCache(this._document.body)))){const e=this.getBorderBox(this._document.documentElement),t=this.getBorderBox(this._document.body);let r=this._document.documentElement.offsetTop,n=this._document.documentElement.offsetLeft;if(R.isFirefox()||R.isThunderbird()){let e=null;0===r&&(e=this.getComputedStyle(this._document.documentElement),r=parseInt(e["margin-top"])||0),0===n&&(e=e||this.getComputedStyle(this._document.documentElement),n=parseInt(e["margin-left"])||0)}const s=t.top-e.top+r,i=t.left-e.left+n,a=this.getComputedStyle(this._document.body),o=parseFloat(a["border-top-width"])||0,c=parseFloat(a["border-left-width"])||0;this._documentGap={top:s+o,left:i+c}}return this._documentGap}getDocumentVisibleBox(){if(!this._documentVisibleBox){const e=this.getDocumentScroll();let t=this._document.documentElement.clientHeight,r=this._document.documentElement.clientWidth;R.isThunderbird()&&(t=self.innerHeight,r=self.innerWidth),this._documentVisibleBox={top:e.top,right:e.left+r,bottom:e.top+t,left:e.left,width:r,height:t}}return this._documentVisibleBox}getDocumentScroll(){if(!this._documentScroll){const e=this._document.documentElement&&this._document.documentElement.scrollTop||this._document.body&&this._document.body.scrollTop||0,t=this._document.documentElement&&this._document.documentElement.scrollLeft||this._document.body&&this._document.body.scrollLeft||0;this._documentScroll={top:e,left:t}}return this._documentScroll}_isScrollable(e,t,r){if("boolean"==typeof r.isScrollable?.[t])return r.isScrollable?.[t];r.isScrollable??(r.isScrollable={});const n=this.getComputedStyle(e);return"x"===t?(r.isScrollable.x=e.scrollWidth>e.clientWidth||"scroll"===n.overflowX,r.isScrollable.x):"y"===t?(r.isScrollable.y=e.scrollHeight>e.clientHeight||"scroll"===n.overflowY,r.isScrollable.y):void 0}isScrollable(e,t){return this._isScrollable(e,t,this._getElementCache(e))}}xe.IMPORTANT_REG_EXP=/!important$/,xe.TRANSFORM_MATRIX_REG_EXP=/(?:matrix|scale)\(([\d\.]+),/,xe.NON_STATIC_POSITIONS=["relative","fixed","absolute","sticky"],xe.MIN_TEXT_BOX_WIDTH=.1;var ve=r(4629),De=r.n(ve);function ke(){return De()}
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
s.get(e.EXTN_PREFIX);function we(e,t){"string"==typeof e&&(e=document.querySelector(e)),"string"==typeof t&&(t={key:t}),t.isHTML?e.innerHTML=Ee.getMessage(t.key,t.interpolations):t.attr&&t.attr in e?e[t.attr]=Ee.getMessage(t.key,t.interpolations):t.attr?e.setAttribute(t.attr,Ee.getMessage(t.key,t.interpolations)):e.textContent=Ee.getMessage(t.key,t.interpolations)}(()=>{const e=(e,t,r,n)=>{const s=e.ownerDocument;let i=s.elementFromPoint(r,n);if(!i)return!1;if(e===i||e.contains(i))return!0;if(!t.length)return!1;return t.find(e=>e.contains(i))&&(i=s.elementsFromPoint(r,n).find(e=>!1===t.some(t=>t.contains(e)))||null),Boolean(i&&(e===i||e.contains(i)))}})();function Ue(e,t,r){const n=new CustomEvent(t,{detail:r,cancelable:!0});return e.dispatchEvent(n)}(()=>{let e;const t=[]})(),(()=>{let e=null,t=[];function r(r){if(!r.some(e=>e.removedNodes.length>0))return;const s=[];for(const e of t)Me(e.element)||(e.callback(e.element),s.push(e),e.signal?.removeEventListener("abort",n));t.filter(e=>!s.includes(e)),t.length||(e.disconnect(),null)}function n(r){t.filter(e=>e.signal===r.currentTarget),t.length||(e.disconnect(),null)}})();function Me(e){if(e.ownerDocument&&e.ownerDocument.contains(e))return!0;let t=e;for(;t&&t.parentNode;){if(t.parentNode===document)return!0;t.parentNode instanceof DocumentFragment?t.parentNode.host:t.parentNode}return!1}new Set(["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"]);function Ge(e){return function(e){return e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(e)&&"ShadowRoot"===Object.getPrototypeOf(e).constructor.name}function Fe(e,t,r,n=Date.now().toString()){const s=self,i=void 0!==s.screenLeft?s.screenLeft:s.screenX,a=void 0!==s.screenTop?s.screenTop:s.screenY,o=s.innerWidth?s.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,c=s.innerHeight?s.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,l=o/s.screen.availWidth,g=(o-t)/2/l+i,u=(c-r)/2/l+a;return s.open(e,n,`\n      scrollbars=yes,\n\t  resizable=yes,\n      width=${t/l},\n      height=${r/l},\n      top=${u},\n      left=${g}\n      `)}(function(){let e,t=null;const r=t=>{t.origin.match(/^chrome|moz|safari/)&&e(t.data)}})(),function(){const e="GET_LOGIN_CREDENTIALS";let t,r=null;const n=e=>{t(e.data)}}();Array.from({length:16},(e,t)=>t.toString(16));const Be=/^(https?:\/\/)?localhost(:[0-9]{1,5})?(\/.*)?$/i,He=/^(https?:\/\/)?[a-z0-9]+([-.]{1}[a-z0-9]+)*\.[a-z]{2,15}(:[0-9]{1,5})?(\/.*)?$/i,We=/^(?:https?:\/\/)?(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}(?::[0-9]{1,5})?$/;function je(e){return Be.test(e)||He.test(e)||We.test(e)}function $e(e){return e.filter(e=>je(e))}function ze(e){return $e(e).map(e=>{try{return Y(e)}catch{return null}}).filter(e=>!!e)}new Map([["paraphrase","rephrase"],["correct","correct"]]),new Map([["hover","hover"],["click","click"],["toolbar","click"],["dblClick","click"],["dblPress","click"]]);const Xe={hallo:"de",moin:"de",viele:"de",servus:"de",gruezi:"de",kacke:"de",und:"de","und los":"de","na denn":"de",gut:"de",eins:"de",nie:"de",immer:"de",neein:"de",neeein:"de",neeeein:"de",stimmts:"de",das:"de",den:"de",hier:"de",sowas:"de","och nö":"de","hey du":"de","na gut":"de","hallo leute":"de","hey leute":"de",nagut:"de",ahoi:"de",bald:"de",juhu:"de",juchu:"de",alter:"de",fertig:"de",korrekt:"de",digga:"de",diggah:"de",digger:"de",gratis:"de",schade:"de",nicht:"de",meins:"de",willkommen:"de",schuldigung:"de",tschuldigung:"de",entschuldigung:"de",hö:"de",höhö:"de",sicher:"de",bitte:"de",klappt:"de",krass:"de",funzt:"de",hä:"de",häh:"de",hähä:"de",passt:"de",nee:"de",tschö:"de",tschöh:"de",du:"de",sie:"de",prima:"de",grüezi:"de",grüzi:"de",komme:"de",jepp:"de",japp:"de",anbei:"de","guten tag":"de","gute tag":"de","dank dir":"de",oha:"de",herr:"de",frau:"de",ja:"de",oja:"de",jo:"de",nö:"de",nöö:"de",nööö:"de",geil:"de",klasse:"de",nix:"de","oh ja":"de","oh je":"de",ohje:"de",oje:"de",wieso:"de",wann:"de",achso:"de",was:"de",ups:"de",hihi:"de",hihihi:"de",bitteschön:"de","bitte schön":"de",dankeschön:"de","danke schön":"de","besten dank":"de","vielen dank":"de","ja klar":"de","ja, klar":"de",au:"de",aua:"de",tja:"de",bäh:"de",ähm:"de",ähem:"de",hoppla:"de",uff:"de",zack:"de",bumm:"de",pfui:"de",hurra:"de",puh:"de",mist:"de",hi:"en",hey:"en",wassup:"en",wazzup:"en",yo:"en",oh:"en",done:"en",dollar:"en",yay:"en",yep:"en",nope:"en",please:"en",pls:"en",damn:"en",dammit:"en",shit:"en",bad:"en",usa:"en",rofl:"en",lol:"en",wtf:"en",huh:"en",thx:"en",ugh:"en",like:"en",ouch:"en",boo:"en",booo:"en",boooo:"en",no:"en",noo:"en",nooo:"en",noooo:"en",nooooo:"en","see ya":"en","see you":"en","love u":"en",yea:"en",hooray:"en",best:"en",jeez:"en",yeez:"en",geez:"en",woah:"en",omg:"en",gosh:"en",si:"es","mui bien":"es",oye:"es",vale:"es",que:"es",anda:"es",orale:"es",correcto:"es",ay:"es",eh:"es",claro:"es",hala:"es",bien:"es",cabron:"es",joder:"es",culo:"es",pendejo:"es","maldita sea":"es",hostia:"es",como:"es",cómo:"es",ajá:"es",aja:"es","como dice":"es",carajo:"es",jajaja:"es",jejeje:"es",perdon:"es",donde:"es",dale:"es",portada:"es",oi:"pt",ola:"pt",olá:"pt",tchau:"pt",adeus:"pt",beleza:"pt","ate logo":"pt","e ai":"pt","e aí":"pt",xau:"pt",oba:"pt",nossa:"pt",poxa:"pt",então:"pt",entao:"pt",uau:"pt",bom:"pt",certo:"pt",ufa:"pt",eita:"pt",otimo:"pt",ótimo:"pt","está ótimo":"pt","esta otimo":"pt","cruz credo":"pt",salut:"fr",coucou:"fr",daccord:"fr",accord:"fr",bonne:"fr",bonsoir:"fr","bon jour":"fr","bon soir":"fr","d'acc":"fr","d´acc":"fr","d`acc":"fr",allo:"fr",merde:"fr",ouf:"fr",aie:"fr",bon:"fr",zut:"fr",boum:"fr",donc:"fr",mince:"fr",comment:"fr",pardon:"fr",quand:"fr",beurk:"fr",putain:"fr",connard:"fr","a propos":"fr","quand meme":"fr","oh la la":"fr","miam miam":"fr","merci beacoup":"fr","ca va":"fr",dag:"nl",hoi:"nl",goedemorgen:"nl",welkom:"nl",dank:"nl","dank u":"nl","dank je":"nl",bedankt:"nl",verdorie:"nl",godverdomme:"nl",verdomme:"nl",klote:"nl",kloten:"nl",kak:"nl",kut:"nl",lul:"nl",flikker:"nl",hé:"nl",czesc:"pl","bon dia":"ca","si us plau":"ca","moltes gràcies":"ca","moltes gracies":"ca","com estàs":"ca","com estas":"ca","fins aviat":"ca",gràcies:"ca",gracies:"ca",perdó:"ca",enhorabona:"ca",índex:"ca"},Ve=/^([Hh]allo|[Ll]ieber?|[Mm]oin|[Nn]a|[Ss]ervus|[Dd]anke|Grüe?zi|Gruezi|Herr|Frau|Fräulein)\s[A-ZÄÖÜ][a-zäüß]/,qe=/(\b|^)(guten\s(tag|abend|morgen)|sehr\sgeehrter?)(\b|$)/,Ye=/^ol[aáà]\s|((\b|^)(boa\snoite|bom\sdia)(\b|$))/,Ke=/(\b|^)(bon\sdia|moltes\sgr[aà]cies|bona\ssort|no\spassa\sres|com\sest[àa]s)(\b|$)/,Ze=/^[¿¡.…]+$/,Qe=/[!.:;…?,]+$/;const Je=.5,et=(e,t,r)=>e>=t&&e<=r;const tt=/\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}\b/gi,rt=/\b(?:(https?|ftp|mailto|tel|wss):\/\/|www\.|(chrome|moz|safari)(-extension)?:\/\/|file:\/\/)[^\s]+/gi,nt=/@[A-Z0-9._-]+/gi,st=/[\-~\$]?[0-9]+/g,it=/^([0-9a-z]+\.)(\s|$)/gim,at=/[\u25CF\u25CB\u25C6\u27A2\u25A0\u25A1\u2605\u274F\u2794\u21B5\u2756\u25AA\u2751\u2022]+(\s|$)/gim,ot=/^[-*](\s|$)/gim,ct=/\b([0-9]+[.,][0-9]+[.,][0-9]+[.,][0-9]+|[0-9]+[.,][0-9]+[.,][0-9]+|[0-9]+[.,][0-9]+)\b/g,lt=/(?<=(\s|^))(:\-?[\)(DPpoO]|;\-?\)|(xo|xO|XO){1,10}|xD|XD|\<3)(?=(\s|$))/g,gt=/[\u2665\u2661\u2764]+/g,ut=/\b[A-Z\-]{1,10}[\-_]?\d{2,100}\b/gi,dt=/\u203D/g,ht=/(\!{2,50}|\?{2,50}|(\?\!){2,50}|\.{4,50}|\-{2,10}|\:{2,50}|\;{2,50}|…{2,50}|\_{2,50}|\,{2,50}|\<{2,50}|\>{2,50}|\#{2,50}|\*{2,50}|\+{2,50}|\={2,50}|\/{2,50}|\\{2,50}|\%{2,50}|\~{2,50})/g,mt=/[—–-]+/g,pt=/\u2011+/g,_t=/[\uFEFF\u200B\u200C\u200D\u00AD\u2060\u2063\u202A\u202B\u202C\u202D]+/g,Et=/\s+/g,ft=/^\/[a-z\-_]+/gm,St=/(?<=(\s|^))#[a-z0-9]+/gi,At=/(?<=(\s|^))[#%_\$€§*><~]+(?=(\s|$))/g,Tt=/\b[a-z0-9-_\/\.]+\.(com?|de|co\.uk|ch|at|fr|org|dk|se|no|info|net|eu|ai|io|nl|pl|ru|com\.br|br|pt|it|ca|com\.mx|mx|cn|mp[43]|jpe?g|gif|php|html?|s?css|jsx?|mov|png|web[mp]|pdf|docx?|xlsx?|pptx?|txt|rtf|bmp|svg|odt|zip|rar|gz|tar|app|dmg|exe|cad|psd|dotx?|tiff?|tsx?|woff|xml|csv|wav|ogg|pkg|rpm|iso|sql|php|email|eml|msi|otf|ttf|aspx?|py|java|swift|ods|sys|log|avi|wmv|m4v|sh)\b/gi,Rt=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF]|[\uFE00-\uFE0F]|[\u2B50-\u2B52])/g,It=["haw","hmn","co","fy","gd","cbk","und"],Ct={fil:"tl"};class Pt{static supported(e=[]){return self.LanguageDetector&&"function"==typeof self.LanguageDetector.create&&"function"==typeof self.LanguageDetector.availability&&!e.includes("uk")&&!e.includes("br")&&!e.includes("ast")&&!e.includes("crh")&&this.isAtLeastChromeVersion(138)}static isAtLeastChromeVersion(e){return navigator.userAgent.includes("Chrome/")&&Number((navigator.userAgent.match(/Chrome\/(\d+)/)||[void 0,0])[1])>=e&&!navigator.userAgent.includes("Chromium/")&&!navigator.userAgent.includes("Edge/")&&!navigator.userAgent.includes("Edg/")&&!navigator.userAgent.includes("YaBrowser/")&&!navigator.userAgent.includes("OPR/")&&!navigator.userAgent.includes("Brave/")}static async init(){if(this.supported()&&["downloadable","available"].includes(await self.LanguageDetector.availability()))try{this._browserLanguageDetector=this._browserLanguageDetector||await self.LanguageDetector.create()}catch(e){}}static async detect(e,t,r=!1){if(!this.supported(t))throw new Error("Language detection unsupported");if("unavailable"===await self.LanguageDetector.availability())throw new Error("Language detection unavailable");let n=this.normalizeText(e);n||(n=e.trim()),n=n.slice(0,1e4);let s=this.normalizeLanguages(t);s.length&&n.length<50&&!r&&(s=this.addLanguagesToDetect(s,n));const i=function(e,t){if(e.length>50)return null;const r=e.trim(),n=r.replace(Ze,"").replace(Qe,"").trim().toLowerCase();if(t.includes("de")&&(Ve.test(r)||qe.test(n)))return"de";if(t.includes("pt")&&Ye.test(n))return"pt";if(t.includes("ca")&&Ke.test(n))return"ca";const s=Xe[n];return s&&t.includes(s)?s:null}(n,t);if(i)return{language:i,confidence:.99};this._browserLanguageDetector=this._browserLanguageDetector||await self.LanguageDetector.create();let a=await this._browserLanguageDetector.detect(n);return a=a.filter(e=>!It.includes(e.detectedLanguage)&&!e.detectedLanguage.endsWith("-Latn")),!r&&1===a.length&&a[0].confidence>.9&&n.length>10&&n.split(" ").length>1?{language:this.mapToSupportedLanguageCode(a[0].detectedLanguage),confidence:a[0].confidence}:(!t.includes("gl")&&(t.includes("pt")||t.includes("ca")||t.includes("es"))&&(a=a.filter(e=>"gl"!==e.detectedLanguage)),s.length&&(n.length<50||r)&&(a=a.filter(e=>s.includes(e.detectedLanguage.toLowerCase()))),a[0]?{language:this.mapToSupportedLanguageCode(this.getPrimaryLanguageCode(a[0].detectedLanguage)),confidence:a[0].confidence}:null)}static normalizeText(e){return e=this.stripEmojis(e),e=this.stripEmailAdresses(e),e=this.stripURLs(e),e=this.stripSmileys(e),e=this.stripBulletPoints(e),e=this.stripFileNamesAndDomains(e),e=this.stripTokensWithNumbers(e),e=this.stripNumbers(e),e=this.stripMentions(e),e=this.stripUnicodeHearts(e),e=this.stripInvisibleWhitespace(e),e=this.stripChatCommands(e),e=this.stripHashTags(e),e=this.stripRepeatedWords(e),e=this.stripLeftoverChars(e),e=this.normalizePunctuation(e),e=this.normalizeHyphens(e),(e=this.normalizeWhitespace(e)).trim()}static stripEmojis(e){return e.replace(Rt,"")}static stripEmailAdresses(e){return e.replace(tt,"")}static stripURLs(e){return e.replace(rt,"")}static stripFileNamesAndDomains(e){return e.replace(Tt,"")}static stripBulletPoints(e){return e.replace(it,"").replace(at,"").replace(ot,"")}static stripMentions(e){return e.replace(nt,"")}static stripSmileys(e){return e.replace(lt,"")}static stripUnicodeHearts(e){return e.replace(gt,"")}static stripTokensWithNumbers(e){return e.replace(ut,"")}static stripHashTags(e){return e.replace(St,"")}static stripNumbers(e){return e.replace(ct,"").replace(st,"")}static stripInvisibleWhitespace(e){return e.replace(_t,"")}static stripChatCommands(e){return e.replace(ft,"")}static stripLeftoverChars(e){return e.replace(At,"")}static stripRepeatedWords(e){try{return e.replace(new RegExp("(?<![\\p{L}])([\\p{L}]+(?:-[\\p{L}]+)*)(?:\\s+\\1)+(?![\\p{L}])","giu"),"$1")}catch(t){return e.replace(/(^|[^a-zäöüß-])([a-zäöüß]+(?:-[a-zäöüß]+)*)(?:\s+\2)+(?![a-zäöüß-])/gi,"$1$2")}}static normalizeHyphens(e){return e.replace(mt,"-").replace(pt,"-")}static normalizePunctuation(e){return e.replace(dt,"!").replace(ht,(e,t)=>t.charAt(0))}static normalizeWhitespace(e){return e.replace(Et,e=>e.includes("\n")?"\n":" ")}static addLanguagesToDetect(e,t){return e=W(e.concat(function(e){e=e.slice(0,50);let t=0,r=0,n=0,s=0,i=0,a=0,o=0,c=0,l=0,g=0,u=0;for(let d=0;d<e.length;d++){const h=e[d]??"",m=h.charCodeAt(0);/\s/.test(h)||/\d/.test(h)||"."===h||u++,et(m,1536,1791)&&t++,et(m,1024,1279)&&r++,(et(m,19968,40959)||et(m,12352,12447)||et(m,12448,12543))&&n++,et(m,6016,6143)&&s++,et(m,2946,3066)&&i++,(et(m,880,1023)||et(m,7936,8191))&&a++,et(m,2304,2431)&&o++,et(m,3584,3711)&&c++,(et(m,1424,1535)||et(m,64285,64320))&&l++,(et(m,44032,55215)||et(m,4352,4607)||et(m,12592,12687)||et(m,43360,43391)||et(m,55216,55295))&&g++}if(0===u)return[];const d=e=>e/u,h=[];return d(t)>=Je&&h.push("ar","fa"),d(r)>=Je&&h.push("ru","uk","be"),d(n)>=Je&&h.push("zh","ja"),d(s)>=Je&&h.push("km"),d(i)>=Je&&h.push("ta"),d(a)>=Je&&h.push("el"),d(o)>=Je&&h.push("hi","mr"),d(c)>=Je&&h.push("th"),d(l)>=Je&&h.push("he"),d(g)>=Je&&h.push("ko"),h}(t))),t.includes("ß")&&!e.includes("de")&&e.push("de"),!t.includes("ł")&&!t.includes("Ł")||e.includes("pl")||e.push("pl"),!t.includes("¡")&&!t.includes("¿")||e.includes("es")||e.push("es"),e}static mapToSupportedLanguageCode(e){return Ct[e]||e}static normalizeLanguages(e){return e.map(e=>this.getPrimaryLanguageCode(e))}static getPrimaryLanguageCode(e){return e.split("-")[0].toLowerCase()}}
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class Lt{static getServerBaseUrl(e,t=!1,r=!0){const n=r&&(t?this._useFallbackServerForParagraphLevelRequests:this._useFallbackServerForTextLevelRequests)&&!e.apiServerUrl;return e.apiServerUrl&&!this._isLanguageToolServer(e.apiServerUrl)?e.apiServerUrl:e.isPremium||e.user||e.apiServerUrl===a?n?"https://languagetoolplus.com/api/v2":a:n?"https://api-fallback.languagetool.org/v2":i}static _getServerFullUrl(e,t=!1){const r=this.getServerBaseUrl(e,t),n=r.endsWith("/")?"":"/",s=new URL(r+n+"check");return s.searchParams.set("c","1"),s.searchParams.set("instanceId",e.instanceId),e.version&&s.searchParams.set("v",e.version),s.toString()}static _abortTextLevelCheckRequest(e){this._textLevelAbortControllers.has(e)&&(this._textLevelAbortControllers.get(e).abort(),this._textLevelAbortControllers.delete(e))}static _abortParagraphLevelCheckRequest(e){this._paragraphLevelAbortControllers.has(e)&&(this._paragraphLevelAbortControllers.get(e).abort(),this._paragraphLevelAbortControllers.delete(e))}static _abortLanguageDetectionRequest(e){this._languageDetectionAbortControllers.has(e)&&(this._languageDetectionAbortControllers.get(e).abort(),this._languageDetectionAbortControllers.delete(e))}static _abortRecommendationRequest(e){const t=this._recommendationAbortControllers.get(e);t&&(t.abort(),this._recommendationAbortControllers.delete(e))}static abortTextLevelCheck(e){this._abortTextLevelCheckRequest(e)}static abortParagraphLevelCheck(e){this._abortParagraphLevelCheckRequest(e)}static abortLanguageDetection(e){this._abortLanguageDetectionRequest(e)}static abortRecommendation(e){this._abortRecommendationRequest(e)}static _prepareText(e){return e.replace(this.ZWNJ_REGEXP,this.ZWS)}static _joinInChunks(e,t=5e3){const r=[];let n=0,s=[];return e.forEach(e=>{n>t&&(n=0,s=[]),s.push(e),n+=e.text.length,r.includes(s)||r.push(s)}),r}static _getRequestData(e,t,r){const n=new URLSearchParams,s={text:e};r.recipientInfo&&(r.recipientInfo.address||r.recipientInfo.fullName)&&(s.metaData={EmailToAddress:r.recipientInfo.address,FullName:r.recipientInfo.fullName}),n.append("data",JSON.stringify(s));const i=Boolean(r.isPremium||!r.apiServerUrl||r.apiServerUrl&&r.apiServerUrl.startsWith(a)||r.apiServerUrl&&!this._isLanguageToolServer(r.apiServerUrl));if(i&&r.user&&"password"in r.user?(n.append("username",r.user.email),n.append("password",r.user.password)):i&&r.user&&"token"in r.user&&(n.append("username",r.user.email),n.append("tokenV2",r.user.token)),n.append("textSessionId",r.instanceId),!r.isPremium&&r.enableHiddenMatches&&n.append("enableHiddenRules","true"),r.motherTongue&&_.includes(r.motherTongue)&&n.append("motherTongue",r.motherTongue),"normal"!==r.checkLevel&&n.append("level",r.checkLevel.replace("hidden-","")),t)n.append("language",t.code);else{n.append("language","auto"),n.append("noopLanguages",r.preferredLanguages.join(","));const e=this._getPreferredVariants(r.languageVariants);e.length>0&&n.append("preferredVariants",e.toString())}if(r.testGroups){const e=[];for(const[t,n]of Object.entries(r.testGroups))n&&e.push(t);e.length&&n.append("abtest",e.join(","))}if(n.append("preferredLanguages",r.preferredLanguages.join(",")),r.forcePreferredLanguages&&n.append("forcePreferredLanguages","true"),r.writingGoalId){const e=this.HIGH_LEVEL_GOALS.find(e=>e.id===r.writingGoalId);e&&n.append("toneTags",e.tags.join(","))}const o=["WHITESPACE_RULE"].concat(r.disabledRules.filter(e=>p.includes(e)));return n.append("disabledRules",o.join(",")),r.userAgent&&n.append("useragent",r.userAgent),n}static _getHeaders(e){if(!e.accessToken)return;const t=new Headers;return t.append("Authorization",`Bearer ${e.accessToken}`),t}static _getPreferredVariants(e){return Object.values(e)}static _getTextLevelRequestData(e,t,r){const n=this._getRequestData(e,t,r);return n.append("mode","textLevelOnly"),n}static _getParagraphLevelCheckRequestData(e,t,r){const n=this._getRequestData(e,t,r);return n.append("mode","allButTextLevelOnly"),n.append("allowIncompleteResults",String(r.allowIncompleteResults||!1)),n}static async _sendRequest(e,t,r=5e4){const n=fetch(e,t).catch(t=>{throw"AbortError"===t.name?{reason:"AbortError",status:0,response:t.message||""}:{reason:"ConnectionError",status:0,url:e.replace(/\?.*/,""),response:t.message||""}}).then(this._checkForException).then(e=>e.json()),s=new Promise((t,n)=>{setTimeout(()=>{n({reason:"TimeoutError",status:0,url:e.replace(/\?.*/,""),response:""})},r)});return Promise.race([n,s])}static _isConnectionOrServerIssue(e){return o.includes(e.status)||["ConnectionError","TimeoutError"].includes(e.reason)}static _getGraphemesCount(e,t,r=0){for(let n=r;n<e.length;n++){if(t<=0)return n-r;t-=e[n].length}return e.length-r}static _getCodepointsCount(e,t,r=0){let n=0;for(let s=r;s<Math.min(e.length,r+t);s++)n+=e[s].length;return n}static _correctMatches(e,t,r){if(t!==r){const n=V(t),s=V(r);for(const t of e){const e=Lt._getGraphemesCount(n,t.offset),r=Lt._getGraphemesCount(n,t.length,e);t.offset=Lt._getCodepointsCount(s,e),t.length=Lt._getCodepointsCount(s,r,e)}}return e}static _getLeftText(e,t,r,n=15,s=!1,i=[],a="auto",o=!1){let c=Math.max(t-n,0);if(s&&i.length>0){const e=i.find(e=>t>=e.start&&t<=e.end);e&&(c=o?e.start:Math.max(c,e.start))}if(r){const r=e.lastIndexOf("\n",t);r>=c&&(c=r+1)}let l=e.substring(c,t).replace(this.NON_ALPHANUMERIC_AT_BEGINNING_REGEXP,""),g=!1;return g="always"===a?0!==c:"never"!==a&&!(0===c||r&&"\n"===e[c-1]||s&&i.some(e=>c===e.start)),g&&(l="..."+l),l}static _getRightText(e,t,r,n=15,s=!1,i=[],a="auto",o=!1){let c=Math.min(t+n,e.length);if(s&&i.length>0){const e=i.find(e=>t>=e.start&&t<=e.end);e&&(c=o?e.end:Math.min(c,e.end))}if(r){const r=e.indexOf("\n",t);-1!==r&&r<=c&&(c=r)}let l=e.substring(t,c).replace(this.NON_ALPHANUMERIC_AT_END_REGEXP,""),g=!1;return g="always"===a?c!==e.length:"never"!==a&&!(c===e.length||r&&"\n"===e[c]||s&&i.some(e=>c===e.end)),g&&(l+="..."),l}static _transformMatches(e,t,r,n=!1,s,i=[]){return e.map(e=>{const a=e.rule.id.startsWith("DB_"),o=this.SPELLING_RULES_ID.some(t=>e.rule.id.includes(t)),c=this.STYLE_ISSUE_TYPES.some(t=>e.rule.issueType===t),l="typographical"===e.rule.issueType&&"CASING"!==e.rule.category.id||"PUNCTUATION"===e.rule.category.id||"TYPOGRAPHY"===e.rule.category.id||e.rule.category.id.includes("KOMMA"),g=Boolean(e.rule.tags&&e.rule.tags.includes("picky")),u="RECOMMENDATION"===e.rule.issueType||"PHRASAL_RECOMMENDATION"===e.rule.issueType,d=!1===e.rule.showInline,h=t.substr(e.offset,e.length),m=s?.strictByParagraph??n,p=s?.useSentenceAwareContext??!1,_=s?.shortContext,E=_?.maxContextLength??15,f=_?.ellipsisMode??"auto",S=_?.forceCompleteSentences??!1,A=s?.longContext,T=A?.maxContextLength??60,R=A?.ellipsisMode??"auto",I=A?.forceCompleteSentences??!1,C=`${Lt._getLeftText(t,e.offset,m,E,p,i,f,S)}|${h}|${Lt._getRightText(t,e.offset+e.length,m,E,p,i,f,S)}`,P=Lt._getLeftText(t,e.offset,!0,T,p,i,R,I),L=Lt._getRightText(t,e.offset+e.length,!0,T,p,i,R,I),b=`${B(P)}<lt-em>${B(h)}</lt-em>${B(L)}`;let y="";e.shortMessage&&e.shortMessage.length<60&&e.shortMessage!==e.message&&(y=e.shortMessage.replace(this.PUNCTUATION_AT_END,""));const N=e.replacements.map(e=>({value:e.value,htmlValue:e.htmlValue,prefix:e.prefix,suffix:e.suffix,type:e.type,shortDescription:e.shortDescription}));return{isParagraphLevelCheck:n,rule:e.rule,isCustomError:a,isSpellingError:o,isStyleError:c,isPunctuationError:l,isPicky:g,isRecommendation:u,isOptional:d,contextForSureMatch:e.contextForSureMatch,language:{code:r.code,name:r.name},description:e.message,shortDescription:y,goodExample:e.goodExample,badExample:e.badExample,start:e.offset,end:e.offset+e.length,length:e.length,originalPhrase:h,contextPhrase:C,longContextPhrase:b,fixes:N,isLocked:e.isLocked}})}static _adjustErrors(e,t,r){const n=r.recipientInfo?r.recipientInfo.fullName.split(" ").filter(e=>e):[];return e.filter(e=>{if(!e.isPicky&&e.rule.id.startsWith("QB_NEW_")&&1===e.fixes.length&&e.originalPhrase+"."===e.fixes[0].value&&(e.end===t.length||"\n"===t.substring(e.end,e.end+1))&&(e.isPicky=!0,!r.checkLevel.includes("picky")))return!1;if(e.originalPhrase.startsWith(S)){const t=e.originalPhrase.length;if(e.originalPhrase=e.originalPhrase.replace(N,""),e.start+=t-e.originalPhrase.length,e.fixes[0]&&e.originalPhrase===e.fixes[0].value)return!1}if(e.originalPhrase.endsWith(S)){const t=e.originalPhrase.length;if(e.originalPhrase=function(e){return e.replace(O,"")}(e.originalPhrase),e.end-=t-e.originalPhrase.length,e.fixes[0]&&e.originalPhrase===e.fixes[0].value)return!1}e.fixes=e.fixes.filter(t=>t.value!=="("+e.originalPhrase+")"&&t.value!==e.originalPhrase&&"(suggestion limit reached)"!==t.value&&"(se ha alcanzado el límite de sugerencias)"!==t.value&&"(Vorschlagslimit erreicht)"!==t.value),e.language.code.startsWith("en")&&x(e.originalPhrase)&&!/[a-z]/i.test(e.contextPhrase)&&e.fixes.forEach(t=>{t.value.toLowerCase()!==e.originalPhrase.toLowerCase()&&(t.value=t.value.toUpperCase())}),"PT_CLICHE_REPLACE"!==e.rule.id&&"PT_WORDINESS_REPLACE"!==e.rule.id||e.fixes.forEach(t=>{(t.value.startsWith("REFORMULAR")||t.value.startsWith("APAGAR")||t.value.startsWith("ESPECIFICAR"))&&(e.description=e.description.replace(/\sÉ preferível dizer.+(REFORMULAR|APAGAR|ESPECIFICAR).+$/,""),t.value="")});if(this.EMAIL_SIGNATURE_SEPARATOR_REGEXP.test(e.originalPhrase))return!1;if(this.INVISIBLE_PHRASE_REGEXP.test(e.originalPhrase))return!1;if(e.rule.id.endsWith("WORD_REPEAT_BEGINNING_RULE")&&this.ONLY_NUMBERS_REGEXP.test(e.originalPhrase))return!1;if("LEERZEICHEN_HINTER_DOPPELPUNKT"===e.rule.id&&this.COLON_WHITESPACE_REGEXP.test(e.originalPhrase))return!1;const s=t.substring(e.start-25,e.start),i=t.substr(e.end,25);if(r.ignoreCapitalizationErrorsAtLineStart&&"UPPERCASE_SENTENCE_START"===e.rule.id&&this.PREVENT_MID_SENTENCE_CAPITALIZATION.test(s))return!1;if(r.ignoreCapitalizationErrorsAtLineStart&&"PUNCTUATION_PARAGRAPH_END"===e.rule.id&&this.PREVENT_MID_SENTENCE_PUNCTUATION.test(i))return!1;if("DE_CASE"===e.rule.id&&this.BULLET_POINT_REGEXP.test(s))return!1;if("DE_CASE"===e.rule.id&&this.NUMBER_WITH_PARENTHESIS_AT_END_REGEXP.test(s))return!1;if("DE_CASE"===e.rule.id&&this.PIPE_AT_END_REGEXP.test(s))return!1;if("DE_CASE"===e.rule.id&&this.MARKDOWN_HEADLINE_REGEXP.test(s))return!1;if("DE_CASE"===e.rule.id&&this.EMOJI_SENTENCE_START_REGEXP.test(s))return!1;if("LEERZEICHEN_HINTER_DOPPELPUNKT"===e.rule.id&&this.MARKDOWN_INLINE_FORMAT_AT_BEGINNING_REGEXP.test(i))return!1;if("LEERZEICHEN_HINTER_DOPPELPUNKT"===e.rule.id&&this.WIKI_MARKUP_AT_END_REGEXP.test(s))return!1;if(e.rule.id.endsWith("UNPAIRED_BRACKETS")&&this.ONE_LETTER_AT_END_REGEXP.test(s))return!1;if(e.rule.id.endsWith("UNPAIRED_BRACKETS")&&this.NUMBER_WITH_DOT_AT_END_REGEXP.test(s))return!1;if("SENTENCE_WHITESPACE"===e.rule.id&&s.endsWith("{!"))return!1;if("SENTENCE_WHITESPACE"===e.rule.id&&this.SINGLE_UPPERCASE_LETTER_REGEXP.test(e.originalPhrase)&&this.ABBREVIATION_AT_END_REGEXP.test(s))return!1;if("SENTENCE_WHITESPACE"===e.rule.id&&"net"===e.originalPhrase.toLowerCase())return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&this.NET_AT_BEGINNING_REGEXP.test(i))return!1;if(e.rule.id.startsWith("AI_")&&1===e.fixes.length&&e.originalPhrase.replace(this.INVISIBLE_CHARS_REGEXP,"")===e.fixes[0].value)return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&e.originalPhrase.endsWith(")")&&s.endsWith(this.ZWS))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&e.originalPhrase.endsWith(".")&&this.FILE_TYPE_AT_BEGINNING_REGEXP.test(i))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&s.endsWith("(")&&(",)"===e.originalPhrase||".)"===e.originalPhrase))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&s.endsWith("\n")&&[")","}","]","."].includes(e.originalPhrase))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&i.startsWith("/"))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&e.originalPhrase.includes(this.ZWS))return!1;if("WORT1_BINDESTRICH_SPACE_WORT2"===e.rule.id&&e.originalPhrase.endsWith(this.ZWS))return!1;if("MULTIPLICATION_SIGN"===e.rule.id&&(this.AT_LEAST_TWO_LETTERS_AT_END_REGEXP.test(s)||!i||this.PUNCTUATION_AT_BEGINNING_REGEXP.test(i)))return!1;if("ZBEDNA_SPACJA_PRZED"===e.rule.id&&e.originalPhrase.includes(this.ZWS))return!1;if("UNLIKELY_OPENING_PUNCTUATION"===e.rule.id&&this.PUNCTUATION_SPACE_AT_END_REGEXP.test(s))return!1;if("WORD_CONTAINS_UNDERSCORE"===e.rule.id&&(!this.LOWERCASE_REGEXP.test(e.originalPhrase)||e.originalPhrase.includes("-")||e.originalPhrase.includes("__")||this.SLASH_AT_END_REGEXP.test(s)||this.SLASH_AT_BEGINNING_REGEXP.test(i)))return!1;if("WORD_CONTAINS_UNDERSCORE"===e.rule.id&&s.endsWith("[")&&i.startsWith("]"))return!1;if("WORD_CONTAINS_UNDERSCORE"===e.rule.id&&E.test(s)&&f.test(i))return!1;if("WORD_CONTAINS_UNDERSCORE"===e.rule.id&&(s.endsWith("=")||s.endsWith("&")||s.endsWith("?")))return!1;if(["APOS_INCORRECT","LOOSE_ACCENTS"].includes(e.rule.id)&&"`"===e.originalPhrase)return!1;if(["_2_AANH_B","FALSCHES_ANFUEHRUNGSZEICHEN_2"].includes(e.rule.id)&&"``"===e.originalPhrase)return!1;if("DASH_RULE"===e.rule.id&&i.startsWith(" [")&&(!s||s.endsWith("\n")))return!1;if(e.isSpellingError&&e.originalPhrase.length>6&&e.fixes.length>4&&e.language.code.startsWith("de")&&(e.fixes.length=4),e.isSpellingError||"WORD_CONTAINS_UNDERSCORE"===e.rule.id){const t=e.originalPhrase.charAt(0),a=e.originalPhrase.toLowerCase();if(J(e,r.dictionary))return!1;if((i.startsWith("_")||s.endsWith("_"))&&!e.language.code.startsWith("de"))return!1;if(e.originalPhrase.startsWith("$")&&i.startsWith("}")&&s.endsWith("{"))return!1;if(e.originalPhrase.startsWith("$")&&e.originalPhrase.endsWith("$"))return!1;if(this.HTML_ENTITIES.includes(e.originalPhrase)&&s.endsWith("&")||this.HTML_ENTITIES_WITH_AND.includes(e.originalPhrase)||this.HTML_ENTITIES_WITH_AND.includes("&"+e.originalPhrase))return!1;if(this.COMMON_TLDS.some((e,t)=>a.endsWith("."+e)||this.COMMON_TLD_WITH_DOT_REGEXPS[t].test(i)))return!1;if(this.DOT_WITH_PREFIX_REGEXP.test(s)&&this.COMMON_TLDS.includes(a))return!1;if(this.COMMON_FILE_TYPES.some((e,t)=>a.endsWith("."+e)||this.COMMON_FILE_TYPE_WITH_DOT_REGEXPS[t].test(i)))return!1;if(this.DOT_WITH_PREFIX_REGEXP.test(s)&&this.COMMON_FILE_TYPES.includes(a))return!1;const o="@"===t||this.MENTION_SYMBOL_AT_BEGINNING_REGEXP.test(s),c="#"===t||this.HASH_SYMBOL_AT_BEGINNING_REGEXP.test(s);if(o||c)return!1;if(n.some(t=>t===e.originalPhrase))return!1;if(this.WAVY_DASH_REGEXP.test(e.originalPhrase))return!1;for(const t of n)if(t.toLowerCase()===e.originalPhrase.toLowerCase()&&!e.fixes.some(e=>e.value===t)){e.fixes.unshift({value:t});break}}return!0})}static _processResponse(t,r,n,i,a,o=!1,c=!1,l=!1){t.matches=this._correctMatches(t.matches,n,i);let g=this._transformMatches(t.matches,i,t.language,o,a?.contextConfig,r);g=this._adjustErrors(g,i,a);let u=[];const d=[],h=[];if(r=this._correctMatches(r.filter(({start:e,end:t})=>t-e>-1).map(({start:e,end:t,detectedLanguages:r,checkStatus:n})=>({offset:e,length:t-e,detectedLanguages:r,checkStatus:n})),n,i).map(({offset:e,length:t,detectedLanguages:r,checkStatus:n})=>({start:e,end:e+t,length:t,detectedLanguages:r,checkStatus:n})),c)return{errors:[],premiumErrors:[],pickyErrors:[],premiumPickyErrors:[],sentenceRanges:r};if(l){const t=s.get(e.FIX_ALL_CONFIG);return{errors:g.filter(e=>!(!e.isRecommendation||t.FIX_RECOMMENDATIONS)||(!(!e.isStyleError||t.FIX_STYLE_ERRORS)||!t.FIX_GC_ERRORS)),premiumErrors:[],pickyErrors:[],premiumPickyErrors:[],sentenceRanges:r}}return a.debug&&g.forEach(e=>{e.description=(e.rule.isPremium?"prem:":"")+e.rule.id+"["+(e.rule.subId||"")+"] "+e.description}),t.hiddenMatches&&(u=u.concat(this._transformMatches(t.hiddenMatches,i,t.language,o,a?.contextConfig,r))),"hidden-picky"===a.checkLevel&&(g=g.filter(e=>!e.isPicky||(h.push(e),!1)),t.hiddenMatches&&(u=u.filter(e=>!e.isPicky||(d.push(e),!1)))),{errors:g,premiumErrors:u,pickyErrors:h,premiumPickyErrors:d,sentenceRanges:r}}static _correctErrorOffsets(e,t){const r=[];let n=0;for(const s of e){const e=s.text.length;for(const i of t)if(i.start>=n&&i.end<=n+e){const e=Object.assign({},i);e.start=e.start-n+s.offset,e.end=e.start+e.length,e.rule?.phraseDiff?.forEach(e=>{e.sourceStart=e.sourceStart-n+s.offset,e.sourceEnd=e.sourceEnd-n+s.offset,e.targetEnd=e.targetEnd-n+s.offset,e.targetStart=e.targetStart-n+s.offset}),r.push(e)}n+=e+2}return r}static async checkTextLevel(e,t,r){e=this._prepareText(e);const n=Boolean(r.adapter);if(!e.trim()||n)return{language:t,errors:[],premiumErrors:[],pickyErrors:[],premiumPickyErrors:[]};this._abortTextLevelCheckRequest(r.instanceId),this._textLevelAbortControllers.set(r.instanceId,new AbortController),this._useFallbackServerForTextLevelRequests&&Date.now()-this._mainServerUnavailabilityTimeStamp>=c&&(this._useFallbackServerForTextLevelRequests=!1);const s=e.normalize(),i=this._getServerFullUrl(r,!1),a={method:"post",mode:"cors",credentials:"omit",body:this._getTextLevelRequestData(s,t,r),headers:this._getHeaders(r),signal:this._textLevelAbortControllers.get(r.instanceId).signal};return this._sendRequest(i,a).then(t=>{const{errors:n,premiumErrors:i,pickyErrors:a,premiumPickyErrors:o}=this._processResponse(t,[],s,e,r);return{language:{code:t.language.code,name:t.language.name,detectedLanguage:t.language.detectedLanguage},errors:n,premiumErrors:i,pickyErrors:a,premiumPickyErrors:o}}).catch(n=>{if(this._isConnectionOrServerIssue(n)){this._abortTextLevelCheckRequest(r.instanceId);if(!r.apiServerUrl&&!this._useFallbackServerForTextLevelRequests)return this._useFallbackServerForTextLevelRequests=!0,this._mainServerUnavailabilityTimeStamp=Date.now(),this.checkTextLevel(e,t,r)}throw n})}static _buildSentenceRanges(e,t){if(!t.extendedSentenceRanges&&!t.sentenceRanges)return[];let r=t.extendedSentenceRanges;r||(r=(t.sentenceRanges||[]).map(e=>({from:e[0],to:e[1],detectedLanguages:[{language:t.language.code.split("-")[0],rate:1}]})));return((e,t)=>{const r=new RegExp(S,"g"),n=[];for(const s of e){const{start:e,end:i}=s,a=t.substring(e,i);if(!a.replace(r,"").trim())continue;const[o,c]=M(a),l=e+o,g=l+a.length-o-c,u=g-l;n.push({start:l,end:g,length:u,detectedLanguages:s.detectedLanguages,checkStatus:s.checkStatus})}return n})(r.map(e=>({start:e.from,end:e.to,length:e.to-e.from,detectedLanguages:e.detectedLanguages.map(e=>({language:e.language,confidence:e.rate})),checkStatus:e.checkStatus})),e)}static cancelAllRequests(e){this._abortParagraphLevelCheckRequest(e),this._abortLanguageDetectionRequest(e),this._abortTextLevelCheckRequest(e),this._abortRecommendationRequest(e)}static async checkParagraphLevel(t,r,n,i,a,o,l){t.forEach(e=>{e.text=this._prepareText(e.text)});if(!t.some(e=>!!e.text.trim())){const e={input:{acceptChangeType:Q.GC,language:r?.code,paragraphs:t,editorCompleteText:i||"",preferredVariants:this._getPreferredVariants(n.languageVariants),disableRecommendations:n.disableRecommendations,replacementText:o?.replacementText,hasUserAppliedFix:!1,changedParagraphsSentencesLength:a,appliedFixAll:l,writingGoal:n.writingGoalId,changedContent:n.changedContent||[]},signal:this._paragraphLevelAbortControllers.get(n.instanceId).signal,handleResponseCallback:(e,r)=>{if("editor_content_save_ack"===r)n?.handleResponseCallback?.(e,"editor_content_save_ack");else{const s=this._postProcessParagraphLevelCheckResult(e,t,t.map(e=>e.text).join("\n\n").normalize(),t.map(e=>e.text).join("\n\n"),n,g,a,l);n.handleResponseCallback?.(s,r)}},metaData:{instanceId:n.instanceId,tabId:n.tabId,hostUrl:n.hostUrl||"",hostCategory:n.hostCategory,writingSessionId:n.writingSessionId,lastEditorContentSavedTimestamp:n.lastEditorContentSavedTimestamp}};return n?.adapter?.grammarCheck?.(e),{language:r,errors:[],premiumErrors:[],pickyErrors:[],premiumPickyErrors:[],isIncompleteResult:!1,areErrorsSuppressed:!1}}this._abortParagraphLevelCheckRequest(n.instanceId),this._paragraphLevelAbortControllers.set(n.instanceId,new AbortController),this._useFallbackServerForParagraphLevelRequests&&Date.now()-this._mainServerUnavailabilityTimeStamp>=c&&(this._useFallbackServerForParagraphLevelRequests=!1);let g=!1;if(o&&o.ruleId){const t=s.get(e.AI_RULE_ID_REGEX);g=t.test(o.ruleId)}const u=this._getServerFullUrl(n,!0);let d=[t];n.adapter||(d=this._joinInChunks(t));const h=[];for(const e of d){const t=e.map(e=>e.text).join("\n\n"),s=t.normalize(),c={method:"post",mode:"cors",credentials:"omit",body:this._getParagraphLevelCheckRequestData(s,r,n),headers:this._getHeaders(n),signal:this._paragraphLevelAbortControllers.get(n.instanceId).signal},d=(r,i)=>{if("editor_content_save_ack"===i)n.handleResponseCallback?.(r,"editor_content_save_ack");else{const o=this._postProcessParagraphLevelCheckResult(r,e,s,t,n,g,a,l);n.handleResponseCallback?.(o,i)}};let m;m="REPHRASING"===o?.ruleId?Q.REPHRASING:o?.isRecommendation?Q.GC_RECOMMENDATION:Q.GC;const p={input:{acceptChangeType:m,language:r?.code,paragraphs:e,editorCompleteText:i||"",preferredVariants:this._getPreferredVariants(n.languageVariants),disableRecommendations:n.disableRecommendations,replacementText:o?.replacementText,hasUserAppliedFix:!!o&&g,changedParagraphsSentencesLength:a,appliedFixAll:l,writingGoal:n.writingGoalId,changedContent:n.changedContent||[],responseType:n.responseType},signal:this._paragraphLevelAbortControllers.get(n.instanceId).signal,handleResponseCallback:d,metaData:{instanceId:n.instanceId,tabId:n.tabId,hostUrl:n.hostUrl||"",hostCategory:n.hostCategory,writingSessionId:n.writingSessionId,lastEditorContentSavedTimestamp:n.lastEditorContentSavedTimestamp}},_=(n.adapter?n.adapter?.grammarCheck(p):this._sendRequest(u,c)).then(r=>this._postProcessParagraphLevelCheckResult(r,e,s,t,n,g,a,l));h.push(_)}return Promise.all(h).then(e=>{const t=e[0].language,r=e[0].areErrorsSuppressed,n=e[0].metaData;return{language:t,errors:Array.prototype.concat.apply([],e.map(e=>e.errors)),premiumErrors:Array.prototype.concat.apply([],e.map(e=>e.premiumErrors)),premiumPickyErrors:Array.prototype.concat.apply([],e.map(e=>e.premiumPickyErrors)),pickyErrors:Array.prototype.concat.apply([],e.map(e=>e.pickyErrors)),isIncompleteResult:e.some(e=>e.isIncompleteResult),sentenceRanges:Array.prototype.concat.apply([],e.filter(e=>Boolean(e.sentenceRanges)).map(e=>e.sentenceRanges)),areErrorsSuppressed:r,metaData:n}}).catch(e=>{if(this._isConnectionOrServerIssue(e)){this._abortParagraphLevelCheckRequest(n.instanceId);if((!n.apiServerUrl||this._isLanguageToolServer(n.apiServerUrl))&&!this._useFallbackServerForParagraphLevelRequests)return this._useFallbackServerForParagraphLevelRequests=!0,this._mainServerUnavailabilityTimeStamp=Date.now(),this.checkParagraphLevel(t,r,n,i)}throw e})}static _postProcessParagraphLevelCheckResult(e,t,r,n,s,i,a,o){const{language:c,warnings:l}=e,g=e.ignoreRanges||[];s.debug&&g.length&&(e.matches=this._filterErrorsInIgnoredRanges(e.matches,g),e.hiddenMatches&&(e.hiddenMatches=this._filterErrorsInIgnoredRanges(e.hiddenMatches,g)),this._addIgnoredRangeMatches(r,e.matches,g));let u=this._buildSentenceRanges(r,e);const d=s.adapter?.grammarCheck?i:i&&1===t.length&&u.length===a,{errors:h,premiumErrors:m,pickyErrors:p,premiumPickyErrors:_,...E}=this._processResponse(e,u,r,n,s,!0,d,o);u=E.sentenceRanges;const f=this._correctErrorOffsets(t,h),S=this._correctErrorOffsets(t,m),A=this._correctErrorOffsets(t,p),T=this._correctErrorOffsets(t,_);return u=this._correctErrorOffsets(t,u),{language:{code:c.code,name:c.name},errors:f,premiumErrors:S,pickyErrors:A,premiumPickyErrors:T,isIncompleteResult:!!l&&l.incompleteResults,areErrorsSuppressed:d,sentenceRanges:u,metaData:e?.metaData}}static async checkRecommendation(e,t){e.isForcedRecommendation||this._abortRecommendationRequest(e.instanceId);const r=new AbortController;this._recommendationAbortControllers.set(e.instanceId,r);const n={input:{language:e.language.code,texts:e.texts,priorities:e.priorities,writingGoal:e.writingGoal||""},metaData:{...t?.metaData}};if(t?.adapter){const s=await t.adapter.recommendation(n,{...t.options,signal:t.options?.signal||r.signal});let i=[];t.contextConfig?.useSentenceAwareContext&&e.texts.length>0&&(i=e.texts.map(t=>{const r=t.offset,n=t.offset+t.text.length;return{start:r,end:n,length:n-r,detectedLanguages:[{language:e.language.code.split("-")[0],confidence:1}]}}));return this._transformMatches(s.matches||[],e.originalText,e.language,!0,t.contextConfig,i)}return new Promise(e=>{e([])})}static async unlockRecommendation(e,t){return await(t.adapter?.unlockRecommendation({lockId:e,metaData:t.metaData}))}static translateText(e,t){return t.adapter.translate(e)}static _filterErrorsInIgnoredRanges(e,t){return e.filter(e=>{const r=e.offset,n=e.offset+e.length;return!t.some(e=>r>=e.from&&r<=e.to||n>=e.from&&n<=e.to)})}static _addIgnoredRangeMatches(e,t,r){r.forEach(r=>{let n=r.to-r.from;const s=e.substring(r.from,r.to).match(/\s+$/);s&&(n-=s[0].length);const i={offset:r.from,length:n,rule:{id:"IGNORED_RANGE",category:{id:"IGNORED_RANGE",name:"Ignored Range"},issueType:"ignoredRange",description:"",isPremium:!1},contextForSureMatch:0,message:"This text is in a different language than the rest of the text.",shortMessage:"Different language: "+r.language.code,replacements:[]};t.push(i)})}static async detectLanguage(e,t,r){e=this._prepareText(e);const n=Boolean(r.adapter);if(!e.trim()||t||n)return{language:t,errors:[],premiumErrors:[],pickyErrors:[],premiumPickyErrors:[]};this._abortLanguageDetectionRequest(r.instanceId),this._languageDetectionAbortControllers.set(r.instanceId,new AbortController),this._useFallbackServerForLanguageDetection&&Date.now()-this._mainServerUnavailabilityTimeStamp>=c&&(this._useFallbackServerForLanguageDetection=!1);const s=e.substr(0,1e3).normalize(),i=this._getServerFullUrl(r,!1),a={method:"post",mode:"cors",credentials:"omit",body:this._getTextLevelRequestData(s,t,r),headers:this._getHeaders(r),signal:this._languageDetectionAbortControllers.get(r.instanceId).signal};return this._sendRequest(i,a).then(e=>({language:{code:e.language.code,name:e.language.name},errors:[],premiumErrors:[],premiumPickyErrors:[],pickyErrors:[]})).catch(n=>{if(this._isConnectionOrServerIssue(n)){this._abortLanguageDetectionRequest(r.instanceId);if((!r.apiServerUrl||this._isLanguageToolServer(r.apiServerUrl))&&!this._useFallbackServerForLanguageDetection)return this._useFallbackServerForLanguageDetection=!0,this._mainServerUnavailabilityTimeStamp=Date.now(),this.detectLanguage(e,t,r)}throw n})}static _isLanguageToolServer(e){return!!e&&(e.includes("api.languagetool.org")||e.includes("languagetool.org/api")||e.includes("api.languagetoolplus.com"))}static checkForPaidSubscription(e,t,r,n=a){return new Promise((s,i)=>{n+=n.endsWith("/")?"check":"/check";const a=new URLSearchParams;a.append("language","en-us"),a.append("data",JSON.stringify({text:"The languagetool testrule 8634756."})),e&&t?(a.append("username",e),a.append("password",t)):e&&r&&(a.append("username",e),a.append("tokenV2",r));const o={method:"post",mode:"cors",credentials:"omit",body:a};this._sendRequest(n,o).then(e=>{const t=e.matches.some(e=>"PREMIUM_FAKE_RULE"===e.rule.id);s(t)}).catch(i)})}static addWordToDictionary(e,t){if(Boolean(t.adapter))return;const r=this.getServerBaseUrl(t),n=r.endsWith("/")?"":"/",s=new URL(r+n+"words/add");if(t.user&&"token"in t.user)s.searchParams.set("username",t.user.email),s.searchParams.set("tokenV2",t.user.token);else{if(!t.user||!("password"in t.user))return Promise.reject(new Error("Not logged-in for adding words to dictionary"));s.searchParams.set("username",t.user.email),s.searchParams.set("password",t.user.password)}return s.searchParams.set("word",e.trim()),fetch(s.toString(),{method:"POST"}).then(e=>e.ok?Promise.resolve():Promise.reject(new Error(`Status: ${e.status}`)))}static getLanguageVariant(t,r){if("en"===(t=t.toLowerCase()))return r.languageVariants.en||"en-us";if("de"===t)return r.languageVariants.de||"de-de";if("pt"===t)return r.languageVariants.pt||"pt-pt";if("ca"===t)return r.languageVariants.ca||"ca-es";return s.get(e.SUPPORTED_LANGUAGES).find(e=>e===t||e.startsWith(t+"-"))||t}static check(e,t,r,n,s,i,a,o,c){return"client"===o?this.checkWithClientLanguageDetection(e,t,r,n,s,i,a,c):this.checkWithServerLanguageDetection(e,t,r,n,s,i,a)}static async checkWithClientLanguageDetection(e,t,r,n,s,i,a,o){if(!t){let c=null,l=null;try{c=await Pt.detect(e,r.preferredLanguages,r.forcePreferredLanguages)}catch(e){l=e.message}if(!c)return o&&o(l||"Could not detect language"),this.checkWithServerLanguageDetection(e,t,r,n,s,i,a);if(t={code:this.getLanguageVariant(c.language,r),name:""},!this.isSupportedLanguage(t.code))return{textLevelResult:{...this.EMPTY_ERRORS_RESPONSE,language:{code:"zz",name:"NoopLanguage"}},paragraphLevelResult:{...this.EMPTY_ERRORS_RESPONSE,sentenceRanges:[],isIncompleteResult:!1,areErrorsSuppressed:!1,language:{code:"zz",name:"NoopLanguage"}}}}const c=[];r.skipTextLevelCheck?c.push(Promise.resolve({...this.EMPTY_ERRORS_RESPONSE,language:t})):c.push(Lt.checkTextLevel(e,t,r)),c.push(Lt.checkParagraphLevel(n,t,r,e,s,i,a));const[l,g]=await Promise.all(c);return l.language&&(l.language.detectedLanguage={...t,source:"client"}),{textLevelResult:l,paragraphLevelResult:g}}static isSupportedLanguage(t){return s.get(e.SUPPORTED_LANGUAGES).some(e=>e===t.toLowerCase())}static async checkWithServerLanguageDetection(e,t,r,n,s,i,a){const o=[r.skipTextLevelCheck?Lt.detectLanguage(e,t,r):Lt.checkTextLevel(e,t,r),Lt.checkParagraphLevel(n,t,r,e,s,i,a)],[c,l]=await Promise.all(o);return c.language?.detectedLanguage&&(c.language.detectedLanguage.source="server"),{textLevelResult:c,paragraphLevelResult:l}}}Lt.SPELLING_RULES_ID=["SPELLER_RULE","MORFOLOGIK_RULE","HUNSPELL","SPELLING_RULE","ORTHOGRAPHY"],Lt.EMPTY_ERRORS_RESPONSE={errors:[],pickyErrors:[],premiumErrors:[],premiumPickyErrors:[]},Lt.STYLE_ISSUE_TYPES=["style","locale-violation","register"],Lt.EMAIL_SIGNATURE_SEPARATOR_REGEXP=/^[‐|\-]{2,}|[‐|\-]{2,}$/,Lt.ONLY_NUMBERS_REGEXP=/^[0-9]+$/,Lt.COLON_WHITESPACE_REGEXP=/^[;:]\s/,Lt.ONE_LETTER_AT_END_REGEXP=/(\s|^|\()[a-z]\.?\s?$/i,Lt.NUMBER_WITH_DOT_AT_END_REGEXP=/\d\.?\s?$/,Lt.NUMBER_WITH_PARENTHESIS_AT_END_REGEXP=/\d\.?\)\s$/,Lt.PUNCTUATION_AT_END=/(\.|\!)$/,Lt.BULLET_POINT_REGEXP=/(\u25b6\ufe0e|\u25BA|\*|-|–|\u2606|\u2605|\u25cf|\u2022|\u25e6|\u27A4|\u2714)\s+$/,Lt.LOWERCASE_REGEXP=/[a-z]/,Lt.DOT_WITH_PREFIX_REGEXP=/\w\.$/,Lt.SLASH_AT_END_REGEXP=/(\/|\\)$/,Lt.AT_LEAST_TWO_LETTERS_AT_END_REGEXP=/[a-z]{2}$/i,Lt.SLASH_AT_BEGINNING_REGEXP=/^(\/|\\)/,Lt.PUNCTUATION_AT_BEGINNING_REGEXP=/^\s?[\.\!\?,:…]/,Lt.PUNCTUATION_SPACE_AT_END_REGEXP=/[\.…\?\!]\s+/,Lt.MARKDOWN_HEADLINE_REGEXP=/^#{1,6}\s/m,Lt.MARKDOWN_INLINE_FORMAT_AT_BEGINNING_REGEXP=/^[\*\~\_\^\+\%\@]/m,Lt.WIKI_MARKUP_AT_END_REGEXP=/\[\[[a-z]+$/,Lt.PIPE_AT_END_REGEXP=/\|\s+$/,Lt.MENTION_SYMBOL_AT_BEGINNING_REGEXP=/@[a-z\.\-]*$/i,Lt.HASH_SYMBOL_AT_BEGINNING_REGEXP=/#[a-z\.\-]*$/i,Lt.EMOJI_SENTENCE_START_REGEXP=/(\.|!|\?|^)\s?(\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff])\s+/,Lt.ABBREVIATION_AT_END_REGEXP=/(\s|\(|^)[A-Z]\.$/,Lt.NET_AT_BEGINNING_REGEXP=/^net\b/i,Lt.SINGLE_UPPERCASE_LETTER_REGEXP=/^[A-Z]$/,Lt.NON_ALPHANUMERIC_AT_BEGINNING_REGEXP=/^[^a-z0-9äöüßáàâéèêíìîóòôúùû\.\?\!,\:\;¿¡]+/i,Lt.NON_ALPHANUMERIC_AT_END_REGEXP=/[^a-z0-9äöüßáàâéèêíìîóòôúùû\.\?\!,\:\;¿¡]+$/i,Lt.HTML_ENTITIES=["amp","nbsp","gt","lt","bull","euro","copy","laquo","raquo","hellip","middot"],Lt.HTML_ENTITIES_WITH_AND=Lt.HTML_ENTITIES.map(e=>`&${e}`),Lt.WAVY_DASH_REGEXP=/^\u3030+$/,Lt.INVISIBLE_PHRASE_REGEXP=/^[\u2063\uFEFF]+$/,Lt.INVISIBLE_CHARS_REGEXP=/[\u2063\uFEFF]/g,Lt.ZWNJ_REGEXP=/\u200B|\u200C/g,Lt.ZWS="\ufeff",Lt.PREVENT_MID_SENTENCE_CAPITALIZATION=/[\wáàâóòìíéèùúâôîêûäöüß,\)][\u0020\u00A0\uFEFF]*\n\n\n?[\u0020\u00A0\uFEFF"„»«“‘]*$/,Lt.PREVENT_MID_SENTENCE_PUNCTUATION=/^[\u0020\u00A0\uFEFF]*\n\n\n?[a-záàâóòìíéèùúâôîêûäöüß,\)]/,Lt.COMMON_TLDS=["com","co","org","net","de","info","biz","es","fr","be","in","gov","nl","ca","com.br","br","at","us","au","ru","pl","ly","it","cat","edu","jp","ko","cn","se","no","mil","ch","dk","com.mx","mx","eu","co.uk","uk","ir","cz","ua","kr","gr","tw","nz","co.nz","za","ro","vn","io","tr","me","fi","tv","xyz","pt","ie","app"],Lt.COMMON_TLD_WITH_DOT_REGEXPS=Lt.COMMON_TLDS.map(e=>new RegExp(`^\\.${e.replace(".","\\.")}\\b`,"i")),Lt.COMMON_FILE_TYPES=["jpeg","jpg","gif","png","bmp","indd","stl","svg","ai","sketch","ico","ics","env","amf","ps","psd","tiff","tif","mp3","wav","midi","mid","aif","mpa","ogg","wma","wpl","cda","7z","arj","deb","pkg","plist","rar","rpm","tar.gz","tar","zip","bin","dmg","iso","toast","vcd","csv","dat","db","log","mdb","sav","sql","xml","apk","bat","bin","cgi","com","exe","gadget","jar","py","js","jsx","json","wsf","ts","tsx","fnt","fon","otf","ttf","woff","woff2","rb","java","php","html","asp","aspx","cer","cfm","cgi","pl","css","scss","htm","jsp","part","rss","xhtml","key","odp","pps","ppt","pptx","class","cpp","cs","h","sh","swift","vb","ods","odt","xlr","xls","xlsx","xlt","xltx","bak","cab","cfg","cpl","cur","dll","dmp","msi","ini","tmp","3g2","3gp","avi","flv","h264","m4v","mkv","mov","mp4","mpg","mpeg","rm","swf","vob","wmv","doc","docx","dot","dotx","pdf","rtf","srx","text","tex","wks","wps","wpd","txt","yaml","yml","csl","md","adm"],Lt.COMMON_FILE_TYPE_WITH_DOT_REGEXPS=Lt.COMMON_FILE_TYPES.map(e=>new RegExp(`^[\\wáàâóòìíéèùúâôîêûäöüß\\-\\.\\(\\)]*?\\.${e}\\b`,"i")),Lt.FILE_TYPE_AT_BEGINNING_REGEXP=new RegExp(`(${Lt.COMMON_FILE_TYPES.join("|")})\b`,"i"),Lt.HIGH_LEVEL_GOALS=[{id:"professional",tags:["clarity","confident","formal","general","positive","professional"]},{id:"scientific",tags:["academic","clarity","formal","general","objective","povrem","scientific"]},{id:"persuasive",tags:["clarity","confident","general","persuasive","positive"]},{id:"personal",tags:["clarity","general","informal","positive","povadd"]},{id:"creative",tags:["clarity","general"]}],Lt._textLevelAbortControllers=new Map,Lt._paragraphLevelAbortControllers=new Map,Lt._languageDetectionAbortControllers=new Map,Lt._recommendationAbortControllers=new Map,Lt._useFallbackServerForTextLevelRequests=!1,Lt._useFallbackServerForParagraphLevelRequests=!1,Lt._useFallbackServerForLanguageDetection=!1,Lt._mainServerUnavailabilityTimeStamp=0,Lt._checkForException=e=>e.ok?e:e.text().catch(()=>"").then(t=>{const r=t.toLowerCase();if(r.includes("too many error"))throw{reason:"TooManyErrors",status:e.status,response:t};if(413===e.status||r.includes("text exceeds the limit"))throw{reason:"TextTooLong",status:e.status,response:t};if(t.toLowerCase().includes("checking took longer than"))throw{reason:"TimeoutError",status:e.status,url:e.url?e.url.replace(/\?.*/,"?..."):"unknown",response:t};if(429===e.status)throw{reason:"TooManyRequests",status:e.status,response:t};if(403===e.status){if(r.includes("client request size limit")||r.includes("client request limit")||r.includes("ip request limit")||r.includes("ip request size limit"))throw{reason:"TooManyRequests",status:e.status,response:t};if(r.includes("authexception"))throw{reason:"InvalidCredentials",status:e.status,response:t};throw{reason:"AccessDenied",status:e.status,response:t}}if(r.includes("checking took longer than"))throw{reason:"TimeoutError",status:e.status,url:e.url?e.url.replace(/\?.*/,"?..."):"unknown",response:t};throw{reason:"UnknownError",status:e.status,response:t}});
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class bt extends be{static _getStringSize(...e){let t=0;for(const r of e)for(let e=0;e<r.length;e++){const n=r.charCodeAt(e);t+=n<128?1:n<2048?2:n<65536?3:n<1<<21?4:n<1<<26?5:n<1<<31?6:Number.NaN}return t}static _getStorage(){const e=ke();return this._shouldUseSyncedStorage()?e.storage.sync:e.storage.local}static _getLocalStorage(){return ke().storage.local}static _shouldUseSyncedStorage(){return ke().storage.sync&&!R.isFirefox()}static _getManagedStorage(){return ke().storage.managed}constructor(){super(),this._onStoredDataChanged=(e,t)=>{const r=["username","token"].filter(t=>e.hasOwnProperty(t)&&e[t].oldValue!==e[t].newValue),n=[],s=[];for(const e of bt.SETTINGS_CHUNKED_PROPERTIES)n.push(!1),s.push(new RegExp(`^${e}(_\\d+)?$`));let i=!1,a=!1,o=!1,c=!1;for(const r in e)if("managed"!==t){"local"===t&&(this._copyPasteInfo&&be.DEFAULT_COPY_PASTE_INFO.hasOwnProperty(r)&&(this._copyPasteInfo[r]=e[r].newValue),this._trialSettings&&be.DEFAULT_TRIAL_SETTINGS.hasOwnProperty(r)&&(this._trialSettings[r]=e[r].newValue));for(let e=0;e<bt.SETTINGS_CHUNKED_PROPERTIES.length;e++)if(s[e].test(r)){n[e]=!0;break}if(this._settings&&be.DEFAULT_SETTINGS.hasOwnProperty(r)&&!bt.SETTINGS_CHUNKED_PROPERTIES.includes(r)){const t=!("oldValue"in e[r])&&be.DEFAULT_SETTINGS[r]===e[r].newValue,n=e[r].oldValue!==e[r].newValue;this._settings[r]=e[r].newValue,i=!1===t&&n}this._configuration&&be.DEFAULT_REMOTE_CONFIGURATION.hasOwnProperty(r)&&(this._configuration[r]=e[r].newValue,a=!0),this._privacySettings&&be.DEFAULT_PRIVACY_SETTINGS.hasOwnProperty(r)&&(this._privacySettings[r]=e[r].newValue,o=!0),this._statistics&&be.DEFAULT_STATISTICS.hasOwnProperty(r)&&(this._statistics[r]=e[r].newValue),this._uiState&&be.DEFAULT_UI_STATE.hasOwnProperty(r)&&(this._uiState[r]=e[r].newValue,c=!0),this._testFlags&&be.DEFAULT_TEST_FLAGS.hasOwnProperty(r)&&(this._testFlags[r]=e[r].newValue),"uniqueId"===r&&(this._uniqueId=e[r].newValue)}else this._managedSettings&&be.DEFAULT_MANAGED_SETTINGS.hasOwnProperty(r)&&(this._managedSettings[r]=e[r].newValue);i&&(this._ensureIgnoredRuleTurnOffDate(),this._eventBus.fire(be.eventNames.settingsChanged,e)),r.length&&this._eventBus.fire(be.eventNames.userCredentialsChanged,r.reduce((t,r)=>({...t,[r]:e[r]}),{})),n.some(e=>e)&&this._storage.get().then(e=>{if(!this._settings)return;const t={};for(let r=0;r<bt.SETTINGS_CHUNKED_PROPERTIES.length;r++)if(n[r]){const n=bt.SETTINGS_CHUNKED_PROPERTIES[r];if(!bt._isSettingsPropertyArrayName(n))continue;const s=this._joinChunks(e,n);t[n]={oldValue:this._settings[n],newValue:s},this._settings[n]=s}this._ensureIgnoredRuleTurnOffDate(),this._eventBus.fire(be.eventNames.settingsChanged,t)}),a&&this._eventBus.fire(be.eventNames.configurationChanged,e),o&&this._eventBus.fire(be.eventNames.privacySettingsChanged,e),c&&this._eventBus.fire(be.eventNames.uiStateChanged,e)},this._storage=bt._getStorage(),this._managedStorage=bt._getManagedStorage(),this._localStorage=bt._getLocalStorage(),this._isInitialized=!1,this._loadData(),ke().storage.onChanged.addListener(this._onStoredDataChanged)}_splitInChunks(e,t,r=this._storage.QUOTA_BYTES_PER_ITEM){const n=e[t];if(!n)return;let s=0,i=[],a=bt._getStringSize(t,"[]");for(;n.length;){const o=n.shift(),c=JSON.stringify(o),l=bt._getStringSize(`,${c}`);if(a+l<=r)i.push(o),a+=l;else{e[0===s?t:`${t}_${s}`]=i,s++,i=[o],a=bt._getStringSize(`${t}_${s}`,`[${c}]`)}if(0===n.length){e[0===s?t:`${t}_${s}`]=i}}e[`${t}_${s+1}`]=[]}_joinChunks(e,t,r=this._storage.MAX_ITEMS){let n=e[t]||[];for(let s=1;s<r;s++){const r=e[`${t}_${s}`];if(void 0===r||0===r.length)break;n=n.concat(r)}return n}_loadData(){const e=this._storage.get().then(e=>{const t=be._combineObjects(be.DEFAULT_SETTINGS,e);for(const r of bt.SETTINGS_CHUNKED_PROPERTIES)t[r]=this._joinChunks(e,r);for(const e of t.ignoredRules){if(void 0===e.description){const t=be.DEFAULT_SETTINGS.ignoredRules.find(t=>t.id===e.id&&t.language===e.language);e.description=t?t.description:""}if(void 0===e.turnOffDate){const t=be.DEFAULT_SETTINGS.ignoredRules.some(t=>t.id===e.id&&t.language===e.language);e.turnOffDate=t?null:new Date(2019,9,1)}else null!==e.turnOffDate&&(e.turnOffDate=new Date(e.turnOffDate))}t.disabledDomains=t.disabledDomains.map(e=>Y(e,"")).filter(e=>e),t.ignoreCheckOnDomains=t.ignoreCheckOnDomains.map(e=>Y(e,"")).filter(e=>e),t.autoCheckOnDomains=t.autoCheckOnDomains.map(e=>Y(e,"")).filter(e=>e),this._settings=t,this._configuration=be._combineObjects(be.DEFAULT_REMOTE_CONFIGURATION,e),this._privacySettings=be._combineObjects(be.DEFAULT_PRIVACY_SETTINGS,e),this._statistics=be._combineObjects(be.DEFAULT_STATISTICS,e),this._uiState=be._combineObjects(be.DEFAULT_UI_STATE,e),this._testFlags=be._combineObjects(be.DEFAULT_TEST_FLAGS,e),e.uniqueId?this._uniqueId=e.uniqueId:(this._uniqueId=be._generateUniqueId(),this._storage.set({uniqueId:this._uniqueId})),this._statistics.firstVisit||this.updateStatistics({firstVisit:Math.round(Date.now()/1e3)})}),t=this._managedStorage.get().then(e=>{this._managedSettings=be._combineObjects(be.DEFAULT_MANAGED_SETTINGS,e)}).catch(()=>{this._managedSettings=be._combineObjects(be.DEFAULT_MANAGED_SETTINGS,{})}),r=this._localStorage.get().then(e=>{this._trialSettings=be._combineObjects(be.DEFAULT_TRIAL_SETTINGS,e),this._copyPasteInfo=be._combineObjects(be.DEFAULT_COPY_PASTE_INFO,e)});Promise.all([e,t,r]).then(()=>{this._isInitialized=!0,this._onReadyCallbacks.forEach(e=>e(this)),this._onReadyCallbacks=[]})}_ensureIgnoredRuleTurnOffDate(){if(this._settings)for(const e of this._settings.ignoredRules)e.turnOffDate&&"string"==typeof e.turnOffDate&&(e.turnOffDate=new Date(e.turnOffDate))}isReady(){return this._isInitialized}onReady(e){this._isInitialized?e(this):this._onReadyCallbacks.push(e)}getUniqueId(){return this._uniqueId}getSettings(){return $(this._settings)}updateSettings(e){for(const t in e)if(!be.DEFAULT_SETTINGS.hasOwnProperty(t))throw new Error(`Unknown setting ${t}`);if(Object.assign(this._settings||{},$(e)),void 0!==e.ignoredRules)for(const t of e.ignoredRules)t.turnOffDate&&"string"!=typeof t.turnOffDate&&(t.turnOffDate=t.turnOffDate.toISOString());if(!R.isFirefox()&&!R.isThunderbird()&&!R.isSafari()){e=$(e);for(let t=0;t<bt.SETTINGS_CHUNKED_PROPERTIES.length;t++){const r=bt.SETTINGS_CHUNKED_PROPERTIES[t];void 0!==e[r]&&bt._isSettingsPropertyArrayName(r)&&this._splitInChunks(e,r)}}return this._storage.set(e)}getCheckSettings(e,t){if(!this._settings)return{isDomainDisabled:!1,isEditorGroupDisabled:!1,isAutoCheckEnabled:!0,isRecommendationsDisabled:!0};if(e===ke().runtime.id)return{isDomainDisabled:!1,isEditorGroupDisabled:!1,isAutoCheckEnabled:!0,isRecommendationsDisabled:!0};const r=(this._settings.disabledEditorGroups||[]).some(r=>K(r.domain)===K(e)&&r.editorGroupId===t),n=be._isListContainsDomain(this._settings.disabledDomains,e),s=(i=this._managedSettings?.allowedURLs||[]).length>0&&i.every(e=>je(e));var i;const a=!0;if(this._settings.autoCheck&&!s){return{isDomainDisabled:n,isEditorGroupDisabled:r,isAutoCheckEnabled:!be._isListContainsDomain(this._settings.ignoreCheckOnDomains,e),isRecommendationsDisabled:a}}return{isDomainDisabled:n,isEditorGroupDisabled:r,isAutoCheckEnabled:be._isListContainsDomain([...this._settings.autoCheckOnDomains,...ze(this._managedSettings?.allowedURLs||[])],e),isRecommendationsDisabled:a}}hasLanguageToolAccount(){return Boolean(this._settings&&this._settings.username&&!this.hasCustomServer())}hasCustomServer(){return this._managedSettings&&this._managedSettings.apiServerUrl?this._managedSettings.apiServerUrl!==be.DEFAULT_SETTINGS.apiServerUrl:Boolean(this._settings&&this._settings.apiServerUrl&&this._settings.apiServerUrl.trim()&&this._settings.apiServerUrl!==i&&this._settings.apiServerUrl!==a)}getCustomServerUrl(){if(this.hasCustomServer())return this._managedSettings.apiServerUrl||this._settings.apiServerUrl}hasCustomLogin(){return!!this._managedSettings?.loginUrl}getManagedSettings(){return j(this._managedSettings)}getConfiguration(){return j(this._configuration)}updateRemoteConfiguration(e){for(const t in e)if(!be.DEFAULT_REMOTE_CONFIGURATION.hasOwnProperty(t))throw new Error(`Unknown configuration ${t}`);return this._configuration&&this._isInitialized&&!this._hasAnythingChanged(this._configuration,e)?Promise.resolve():(Object.assign(this._configuration||{},j(e)),this._storage.set(e))}isDomainSupported(e){return!this._configuration||!this._configuration.unsupportedDomains.includes("*")&&!be._isListContainsDomain(this._configuration.unsupportedDomains,e)}isDomainExcludedByGroupPolicy(e){const t=$e(this._managedSettings?.allowedURLs||[]);return!!t.length&&!1===Z(t,e)}getPrivacySettings(){return j(this._privacySettings)}updatePrivacySettings(e){for(const t in e)if(!be.DEFAULT_PRIVACY_SETTINGS.hasOwnProperty(t))throw new Error(`Unknown privacy setting ${t}`);return this._privacySettings&&this._isInitialized&&!this._hasAnythingChanged(this._privacySettings,e)?Promise.resolve():(Object.assign(this._privacySettings||{},e),this._storage.set(e))}getStatistics(){return $(this._statistics)}updateStatistics(e){for(const t in e)if(!be.DEFAULT_STATISTICS.hasOwnProperty(t))throw new Error(`Unknown privacy setting ${t}`);return this._statistics&&this._isInitialized&&!this._hasAnythingChanged(this._statistics,e)?Promise.resolve():(Object.assign(this._statistics||{},e),this._storage.set(e))}getUIState(){return $(this._uiState)}updateUIState(e){for(const t in e)if(!be.DEFAULT_UI_STATE.hasOwnProperty(t))throw new Error(`Unknown UI state ${t}`);return this._uiState&&this._isInitialized&&!this._hasAnythingChanged(this._uiState,e)?Promise.resolve():(Object.assign(this._uiState||{},e),this._storage.set(e))}_hasAnythingChanged(e,t){let r=!1;for(const n in t)if(t.hasOwnProperty(n)&&(t[n]!==e[n]||"object"==typeof t[n])){r=!0;break}return r}checkForPaidSubscription(){return new Promise((e,t)=>{this.onReady(()=>{const{username:r,password:n,token:s}=this.getSettings();let i;this.hasCustomServer()&&(i=this.getCustomServerUrl()),Lt.checkForPaidSubscription(r,n,s,i).then(t=>{t?(this.enablePaidSubscription(),this.grantUnlimitedRephrasings()):(this.disablePaidSubscription(),this.restrictRephrasings()),e(t)}).catch(t)})})}getTestFlags(){return j(this._testFlags)}updateTestFlags(e){for(const t in e)if(!be.DEFAULT_TEST_FLAGS.hasOwnProperty(t))throw new Error(`Unknown test flag ${t}`);return Object.assign(this._testFlags||{},e),this._storage.set(e)}getActiveCoupon(){const{hasPaidSubscription:e}=this.getUIState();if(e)return null;const{geoIpCountry:t}=this.getSettings();return this._getDefaultCoupon(t)}_getDefaultCoupon(e){for(const t in u)if(u.hasOwnProperty(t)&&u[t].countries.includes(e))return{code:t,percent:u[t].percent};return null}isRelevantForChangelogCoupon(){return{status:!1,reason:-1}}startChangelogCoupon(){if(!this.canStartChangelogCoupon())return;const e=Date.now();var t,r;this.updateUIState({changelogNov2024Coupon:"2024-NOV-CHANGELOG",changelogNov2024CountdownEnd:e+1656e5+(t=0,r=72e5,t=Math.ceil(t),r=Math.floor(r),Math.floor(Math.random()*(r-t+1))+t)})}isChangelogCouponRunning(){if(!this.isRelevantForChangelogCoupon().status)return!1;const{changelogNov2024CountdownEnd:e}=this.getUIState();return Boolean(e&&e>Date.now())}canStartChangelogCoupon(){if(!this.isRelevantForChangelogCoupon().status)return!1;const e=Date.now(),{changelogNov2024CountdownEnd:t}=this.getUIState();return!t||e-t>7776e6}getTrialSettings(){return $(this._trialSettings)}updateTrialSettings(e){for(const t in e)if(!be.DEFAULT_TRIAL_SETTINGS.hasOwnProperty(t))throw new Error(`Unknown trial setting ${t}`);return this._trialSettings&&this._isInitialized&&!this._hasAnythingChanged(this._trialSettings,e)?Promise.resolve():(Object.assign(this._trialSettings||{},e),this._localStorage.set(e))}getCopyPasteInfo(){return $(this._copyPasteInfo)}updateCopyPasteInfo(e){for(const t in e)if(!be.DEFAULT_COPY_PASTE_INFO.hasOwnProperty(t))throw new Error(`Unknown copy/paste info ${t}`);return this._copyPasteInfo&&this._isInitialized&&!this._hasAnythingChanged(this._copyPasteInfo,e)?Promise.resolve():(Object.assign(this._copyPasteInfo||{},e),this._localStorage.set(e))}destroy(){this._isInitialized=!1,super.destroy();try{ke().storage.onChanged.removeListener(this._onStoredDataChanged)}catch(e){}}}bt.SETTINGS_CHUNKED_PROPERTIES=["dictionary","ignoredRules","disabledDomains","disabledEditorGroups","ignoreCheckOnDomains","autoCheckOnDomains"],bt._isSettingsPropertyArrayName=e=>bt.SETTINGS_CHUNKED_PROPERTIES.includes(e);const yt=class{static init(e){this._instance=e,e.initialize()}static initialize(){this._instance.initialize()}static trackPageView(e,t){this._instance.trackPageView(e,t)}static trackDisabledRule(e,t,r,n){return this._instance.trackDisabledRule(e,t,r,n)}static trackDictionaryEvent(e,t,r){return this._instance.trackDictionaryEvent(e,t,r)}static trackEvent(e,t,r,n,s){this._instance.trackEvent(e,t,r,n,s)}static trackSampledEvent(e,t,r,n=100){Math.random()*n<1&&(n>1&&(t+=`:sampling_${n}`),this.trackEvent(e,t,r))}static trackInstall(){this._instance.trackInstall()}static trackActivity(){this._instance.trackActivity()}static trackUserActivity(){this._instance.trackUserActivity()}static trackError(e,t,r){this._instance.trackError(e,t,r)}static trackStat(e,t){this._instance.trackStat(e,t)}static trackPerformanceMetrics(e){this._instance.trackPerformanceMetrics(e)}static trackUserTextChangeMetrics(e){this._instance.trackUserTextChangeMetrics(e)}static trackHealthMetrics(e){this._instance.trackHealthMetrics(e)}static trackFixAllMetrics(e){this._instance.trackFixAllMetrics(e)}static trackUnderlineMismatchMetrics(e){this._instance.trackUnderlineMismatchMetrics(e)}static trackEmptyTextDiffMetrics(e){this._instance.trackEmptyTextDiffMetrics(e)}};Ee.init(new
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class extends _e{addEventListener(e,t){}setLocale(e){}getMessage(e,t){return ke().i18n.getMessage?ke().i18n.getMessage(e,t):e}}),ye.init(()=>new bt),de.init(new
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class extends ue{constructor(){super(...arguments),this._isProductionEnvironmentCached=null}incrementalCheck(e,t,r,n,s){throw new Error("Method not implemented.")}isProductionEnvironment(){if(null===this._isProductionEnvironmentCached){if(R.isSafari())return!0;R.isFirefox()||R.isThunderbird()?this._isProductionEnvironmentCached=!ke().runtime.id.match("languagetool.dev"):this._isProductionEnvironmentCached="update_url"in ke().runtime.getManifest()}return this._isProductionEnvironmentCached}isRuntimeConnected(){try{return ke().runtime.getManifest(),!0}catch(e){return!1}}getVersion(){if(this.isRuntimeConnected()){const e=ke().runtime.getManifest();return e&&e.version?e.version:"unknown"}return"unknown"}getTrackingId(){return R.isSafari()?"13":R.isThunderbird()?"22":"12"}shouldTrack(){return"1"!==navigator.doNotTrack&&!R.isFirefox()}getPinnedState(){const e=ke();return e.action&&"function"==typeof e.action.getUserSettings?e.action.getUserSettings().then(e=>Promise.resolve("boolean"==typeof e.isOnToolbar?e.isOnToolbar:null)).catch(()=>Promise.resolve(null)):Promise.resolve(null)}getType(){return"extension"}getBeforeUnloadEventName(){return"pagehide"}getURL(e){return ke().runtime.getURL(e)}getUILanguageCode(){return ke().i18n.getUILanguage?ke().i18n.getUILanguage():navigator.language}openWindow(e){ke().runtime.sendMessage({command:"OPEN_URL",url:e})}injectExecutor(){return new Promise((e,t)=>{if(R.isThunderbird())return e();const r=setTimeout(()=>{t()},2e3),n=function(){const e=document.createElement("script");return e.setAttribute("data-cookieconsent","ignore"),e.setAttribute("data-uc-allowed","true"),e}();n.src=ke().runtime.getURL("/content/executor.js"),n.async=!0,n.setAttribute("fetchpriority","low"),n.onload=function(){n.remove(),clearTimeout(r),e()},n.onerror=function(){n.remove(),clearTimeout(r),t()},(document.head||document.documentElement).appendChild(n)})}destroyExecutor(){Ue(document,"lt-execute-destroy")}addEventListener(){}updateSentenceRanges(){}executeScript(e,t){const r=new self.Object;r.code=t,Ue(e,"lt-execute-code",r)}linkInputAreaProperties(e){Ue(e,"lt-execute-link-properties")}ping(){return new Promise((e,t)=>{const r=self.setTimeout(()=>t("timeout"),5e3);ke().runtime.sendMessage({command:"BACKGROUND_PING"}).then(n=>{self.clearTimeout(r),"success"===n?e():t("unknown")}).catch(()=>{self.clearTimeout(r),t("error")})})}canLoadContentScripts(e){return"css"===e||2===ke().runtime.getManifest().manifest_version}loadContentScripts(e,t){return this.isRuntimeConnected()&&this.canLoadContentScripts(t)?(ke().runtime.getManifest().content_scripts.forEach(r=>{if("js"===t&&r.js){const t=r.js.map(e=>{const t=this.getURL(e);return fetch(t).then(e=>e.text())});return Promise.all(t).then(t=>{const r=t.join("\n");if("eval"in e&&"function"==typeof e.eval){if("safari"in e)try{e.eval("window.safari = window.safari || window.parent.safari;")}catch{}e.eval(r)}})}if("css"===t&&r.css)return this.loadStylesheets(e,r.css)}),Promise.resolve()):Promise.reject()}loadStylesheets(e,t){const r=(Array.isArray(t)?t.map(e=>[null,e]):Object.entries(t)).map(([e,t])=>{const r=this.getURL(t);return fetch(r).then(e=>e.text()).then(t=>[e,t])});return Promise.all(r).then(t=>{t.forEach(([t,r])=>{const n=e.document.createElement("style");n.textContent=r,t&&n.setAttribute("id",t),(e.document.head||e.document.documentElement).appendChild(n)})})}injectShadowStyles(e){!function(e,t){const r=t||"content/styles/shadow.css",n=ke().runtime.getURL(r);if(!e.querySelector(`[href="${n}"]`)){const t=document.createElement("link");t.href=n,t.rel="stylesheet",e.append(t)}}(e)}initializeLTAssistant(e,t={}){return Promise.resolve()}getPreferredLanguages(){return ke().runtime.sendMessage({command:"GET_PREFERRED_LANGUAGES"})}startDictionarySync(){return ke().runtime.sendMessage({command:"START_DICTIONARY_SYNC"})}updateDictionary(){return ke().runtime.sendMessage({command:"UPDATE_DICTIONARY"})}addWordToDictionary(e){const t={command:"ADD_WORD_TO_DICTIONARY",word:e};return ke().runtime.sendMessage(t)}addWordsToDictionary(e){const t={command:"BATCH_ADD_WORDS_TO_DICTIONARY",words:e};return ke().runtime.sendMessage(t)}removeWordFromDictionary(e){const t={command:"REMOVE_WORD_FROM_DICTIONARY",word:e};return ke().runtime.sendMessage(t)}clearDictionary(){return ke().runtime.sendMessage({command:"CLEAR_DICTIONARY"})}loadSynonyms(e,t,r){const n={command:"LOAD_SYNONYMS",wordContext:e,language:t,motherTongue:r};return ke().runtime.sendMessage(n)}abortSynonymsRequest(){return ke().runtime.sendMessage({command:"ABORT_SYNONYMS_REQUEST"})}loadPhrases(e,t,r,n,s,i){const a={command:"LOAD_PHRASES",uuid:e,phrase:t,language:r,inhouseOnly:n,user:s,mode:i};return ke().runtime.sendMessage(a)}abortPhraseRequests(e){const t={command:"ABORT_PHRASE_REQUESTS",type:e};return ke().runtime.sendMessage(t)}abortTranslateRequest(e){const t={command:"ABORT_TRANSLATE_REQUESTS",abortId:e};return ke().runtime.sendMessage(t)}initializeUserActivity(e){const t={command:"INITIALIZE_USER_ACTIVITY",data:e};return ke().runtime.sendMessage(t)}sendUserActivityPings(e){const t={command:"SEND_USER_ACTIVITY_PINGS",uuids:e};return ke().runtime.sendMessage(t)}updateUserActivityTextStatistics(e,t){const r={command:"UPDATE_USER_ACTIVITY_TEXT_STATISTICS",uuid:e,stats:t};return ke().runtime.sendMessage(r)}updateUserActivityAppliedSuggestions(e,t,r){const n={command:"UPDATE_USER_ACTIVITY_APPLIED_SUGGESTIONS",isPremium:r,type:t,uuid:e};return ke().runtime.sendMessage(n)}updateUserActivityAppliedRewritings(e){const t={command:"UPDATE_USER_ACTIVITY_APPLIED_REWRITINGS",uuid:e};return ke().runtime.sendMessage(t)}updateUserActivityMeta(e,t){const r={command:"UPDATE_USER_ACTIVITY_META",uuid:e,meta:t};return ke().runtime.sendMessage(r)}sendUserActivity(e){const t={command:"SEND_USER_ACTIVITY",uuid:e};return ke().runtime.sendMessage(t)}destroyUserActivity(e){const t={command:"DESTROY_USER_ACTIVITY",uuid:e};return ke().runtime.sendMessage(t)}loadSplitSentence(e,t,r,n,s){const i={command:"LOAD_SPLIT_SENTENCE",uuid:e,phrase:t,language:r,inhouseOnly:n,user:s};return ke().runtime.sendMessage(i)}trackEvent(e,t){const r={command:"TRACK_EVENT",action:e,label:t};return ke().runtime.sendMessage(r)}pageLoaded(e,t,r,n,s){const i={command:"PAGE_LOADED",enabled:e,supported:t,beta:r,unsupportedMessage:n,isDarkMode:s};return ke().runtime.sendMessage(i)}ltAssistantStatusChanged(e,t){const r={command:"LTASSISTANT_STATUS_CHANGED",tabId:"number"==typeof e?e:void 0,enabled:("object"==typeof e?e:t).enabled};return ke().runtime.sendMessage(r)}createWritingSession(e,t){return ke().runtime.sendMessage({command:"INTIALIZE_WRITING_SESSION",payload:{hostUrl:e,uniqueIdentifier:t}})}check(e,t,r,n,s){const i={command:"CHECK_TEXT",text:t,changedParagraphs:r,language:e.language,forceLanguage:e.forceLanguage,metaData:n,options:s,changedContent:[]};return ke().runtime.sendMessage(i)}fetchRecommendationForSentence(e){const t={command:"FETCH_SENTENCE_RECOMMENDATION",...e};return ke().runtime.sendMessage(t)}unlockRecommendation(e){const t={command:"UNLOCK_RECOMMENDATION",...e};return ke().runtime.sendMessage(t)}translateText(e){const t={command:"TRANSLATE_TEXT",...e};return ke().runtime.sendMessage(t)}isOptionsPageSupported(){return!0}openOptionsPage(e,t){const r={command:"OPEN_OPTIONS",target:e,ref:t};return ke().runtime.sendMessage(r)}isFeedbackFormSupported(){return!0}openFeedbackForm(e,t="",r=""){const n={command:"OPEN_FEEDBACK_FORM",url:e,title:t,html:r};return ke().runtime.sendMessage(n)}openPremiumPage(e,t=0,r=0,n=0,s="",i){const a={command:"OPEN_PREMIUM_PAGE",campaign:e,hiddenGrammarMatches:t,hiddenStyleMatches:r,hiddenPunctuationMatches:n,historicMatches:s,textLanguage:i||void 0};return ke().runtime.sendMessage(a)}updateSurroundingTextContext(e){const t={command:"UPDATE_SURROUNDING_TEXT_CONTEXT",data:e};return ke().runtime.sendMessage(t)}forceSyncEditorState(e){const t={command:"FORCE_SYNC_EDITOR_STATE",data:e};return ke().runtime.sendMessage(t)}checkForPaidSubscription(){return ke().runtime.sendMessage({command:"CHECK_FOR_PAID_SUBSCRIPTION"})}canUseShadowDom(){return!navigator.webdriver}abortAllRequests(e){e.checkRequestController&&e.checkRequestController.abort(),e.recommendationRequestAbortController.abort&&e.recommendationRequestAbortController.abort();const t={command:"ABORT_ALL_REQUESTS",instanceId:e.id};return ke().runtime.sendMessage(t)}getTermsOfServiceInfo(e){const t={command:"GET_TERMS_OF_SERVICE_INFO",version:e};return ke().runtime.sendMessage(t)}acceptTermsOfService(e){const t={command:"ACCEPT_TERMS_OF_SERVICE",version:e};return ke().runtime.sendMessage(t)}syncUserData(){return ke().runtime.sendMessage({command:"SYNC_USER_DATA"})}}),Ne.init(),yt.init(new
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class{constructor(){this.TRACKING_BASE_URL="https://analytics.languagetoolplus.com/matomo/piwik.php",this.TRACKING_BASE_PAGE_URL="https://fake/",this.ACTIVITY_TRACK_INTERVAL=864e5,this.PING_TRACK_INTERVAL=6048e5,this.MAX_TIME=6e4,this.THROTTLE_REQUESTS=10,this._isInitialized=!1,this._loggedErrors=null,this._errorCount=0}initialize(){if(this._isInitialized)return;this.TRACKING_SITE_ID=de.getTrackingId(),this.VERSION=de.getVersion(),this._storageController=ye.create();const e=de.getURL("/");self.addEventListener("error",t=>{const r=t.message,n=t.filename,s=t.lineno,i=t.error;if(!n||!n.startsWith(e))return;if("string"!=typeof r)return;if(r.includes("ResizeObserver"))return;const a=i&&function(e){if(!e.stack)return;const t=[];if(e.stack.split(/\n/).forEach(e=>{const r=e.match(/([\w_<>]+)\s+\(.+?([\w_\-]+\.(js|html))/);r&&t.push(`${r[2]}:${r[1]}`)}),!t.length){const r=e.stack.match(/([\w_\-]+\.(js|html))/);r&&t.push(r[1])}return t.join(",").substr(0,140)}(i);a?this.trackError("js",r,a):this.trackError("js",r,`${n}:${s}`)}),this._isInitialized=!0}getCustomDimensions(e){const t=this._storageController.getSettings(),r=this._storageController.getUIState(),n=this._storageController.getTestFlags(),s=this._storageController.getPrivacySettings(),i={dimension2:this.VERSION,dimension3:String(r.hasPaidSubscription),dimension4:String(Boolean(t.username&&(t.password||t.token))),dimension5:t.preferredLanguages.join(","),dimension6:String(t.hasPickyModeEnabledGlobally),dimension13:r.showRuleId?"{}":JSON.stringify(n.testGroups),dimension15:String(s.acceptedTermsOfServiceVersion||"none"),dimension16:String(t.hasLollipopEnabled),dimension17:String(Ne.getStatus())};return e?.writingGoal&&(i.dimension8=e.writingGoal),e?.errorType&&(i.dimension9=e.errorType),i}_getTrackingUrlForPageView(e,t){return e=(e=e.replace(/^(chrome|moz|safari|edge)-extension:\/\/.+?\//i,"")).replace(/^[a-z0-9]{8}\//i,"/"),e=`${this.TRACKING_BASE_PAGE_URL}${e}`,new Promise((r,n)=>{this._storageController.onReady(()=>{const{firstVisit:n,sessionCount:s}=this._storageController.getStatistics(),i=this._storageController.getUniqueId(),a=new URL(this.TRACKING_BASE_URL),o=[self.screen?.width??0,self.screen?.height??0],c={idsite:this.TRACKING_SITE_ID,rec:"1",url:e,rand:String(Date.now()),apiv:"1",res:o.join("x"),_id:String(i),_idts:String(n),_idvc:String(s),...this.getCustomDimensions(t)};for(const[e,t]of Object.entries(c))a.searchParams.append(e,t);r(a.toString())})})}_getTrackingUrlForEvent(e,t,r="",n,s){return n=n||this.TRACKING_BASE_PAGE_URL,new Promise((i,a)=>{this._storageController.onReady(()=>{const{firstVisit:a,sessionCount:o}=this._storageController.getStatistics(),c=this._storageController.getUniqueId(),l=new URL(this.TRACKING_BASE_URL),g=[self.screen?.width??0,self.screen?.height??0],u={idsite:this.TRACKING_SITE_ID,rec:"1",url:n||"",action_name:t,rand:String(Date.now()),apiv:"1",res:g.join("x"),_id:c,_idts:String(a),_idvc:String(o),e_c:e,e_a:t,e_n:r??"",...this.getCustomDimensions(s)};for(const[e,t]of Object.entries(u))l.searchParams.append(e,t);i(l.toString())})})}_sendRequest(e){!de.shouldTrack()||this._storageController.hasCustomServer()||this._storageController.hasCustomLogin()||navigator.webdriver||re(e,{mode:"no-cors",referrerPolicy:"no-referrer",keepalive:"standalone"===de.getType()},1e4).catch(()=>null)}trackPageView(e,t){e=e||q(),this._getTrackingUrlForPageView(e,t).then(t=>{de.isProductionEnvironment()?this._sendRequest(t):console.log("LT_Tracking Page view tracking disabled in dev mode",{pageUrl:e,trackingUrl:t})}).catch(e=>{console.log("LT could not track because:",e&&e.message)})}trackDisabledRule(e,t,r,n){if(!e.match(/^de|en|nl|es|fr|ca|pt/i))return;const s=n?h:d,i=e+":"+t,a=r,o=new URL(this.TRACKING_BASE_URL);o.searchParams.append("idsite","18"),o.searchParams.append("rec","1"),o.searchParams.append("url",this.TRACKING_BASE_PAGE_URL),o.searchParams.append("action_name",s),o.searchParams.append("rand",String(Date.now())),o.searchParams.append("apiv","1"),o.searchParams.append("_id",this._storageController.getUniqueId()),o.searchParams.append("e_c",s),o.searchParams.append("e_a",i),o.searchParams.append("e_n",r),de.isProductionEnvironment()?this._sendRequest(o.toString()):console.log("LT_Tracking Event tracking disabled in dev mode",{actionCategory:s,action:i,actionName:a,trackingUrl:o})}trackDictionaryEvent(e,t,r){if(!e.match(/^de|en|nl|es|fr|it|pt|ru|ca|pl/i))return;const n=r?"TemporaryIgnored":"PersistentlyIgnored",s=`${e}:add_word`,i=t,a=new URL(this.TRACKING_BASE_URL);a.searchParams.append("idsite","19"),a.searchParams.append("rec","1"),a.searchParams.append("url",this.TRACKING_BASE_PAGE_URL),a.searchParams.append("action_name",n),a.searchParams.append("rand",String(Date.now())),a.searchParams.append("apiv","1"),a.searchParams.append("_id",this._storageController.getUniqueId()),a.searchParams.append("e_c",n),a.searchParams.append("e_a",s),a.searchParams.append("e_n",t),de.isProductionEnvironment()?this._sendRequest(a.toString()):console.log("LT_Tracking Event tracking disabled in dev mode",{actionCategory:n,action:s,actionName:i,trackingUrl:a})}trackEvent(e,t,r,n,s){this._getTrackingUrlForEvent(e,t,r,n,s).then(n=>{de.isProductionEnvironment()?this._sendRequest(n):console.log("LT_Tracking Event tracking disabled in dev mode",{actionCategory:e,action:t,actionName:r,trackingUrl:n})}).catch(e=>{console.log("LT could not track because:",e&&e.message)})}trackInstall(){this.trackEvent("Action","install",fe.getPrimaryLanguageCode(navigator.language))}trackActivity(){this._storageController.onReady(()=>{const e=Date.now(),{sessionCount:t,lastActivity:r,lastPing:n}=this._storageController.getStatistics();(!r||e-r>this.ACTIVITY_TRACK_INTERVAL)&&this._storageController.updateStatistics({sessionCount:t+1,lastActivity:e}).then(()=>{this.trackUserActivity()}),(!n||e-n>this.PING_TRACK_INTERVAL)&&this._storageController.updateStatistics({lastPing:e}).then(()=>{this.trackEvent("Stat","ping")})})}trackUserActivity(){this._storageController.onReady(()=>{const{username:e}=this._storageController.getSettings();if(!e||this._storageController.hasCustomServer())return;const t=new FormData;t.append("email",e),t.append("useragent",R.getUserAgentIdentifier()),re("https://languagetool.org/ping",{method:"POST",mode:"cors",credentials:"omit",body:t},1e4).catch(()=>null)})}trackError(e,t,r=""){try{if(R.isUnsupportedBrowser())return;if(this._errorCount++,this._errorCount>6)return;if("string"!=typeof t)return;if(this._loggedErrors)if(this._loggedErrors.length<this.THROTTLE_REQUESTS)this._loggedErrors.push(Date.now());else{const e=Date.now();if(!(e-this._loggedErrors[0]>=this.MAX_TIME))return;this._loggedErrors.push(e),this._loggedErrors.splice(0,1)}else this._loggedErrors=[Date.now()];let n="JS-Error";"message"===e?n="Message-Error":"http"===e?n="HTTP-Error":"other"===e&&(n="Other-Error");let s=q();s=s.replace(/^moz-extension:\/\/[a-z0-9\-]+\//,"moz-extension://xxxx-xxxx-xxxx-xxxx/"),s.match(/(chrome|moz|safari)\-extension:/)||(s=void 0),this.trackEvent(n,t,r||s,s)}catch(e){console.error("Error while logging error from language tool",e)}}trackStat(e,t){0===Math.floor(10*Math.random())&&this.trackEvent("Stat",e,t)}trackPerformanceMetrics(){}trackHealthMetrics(){}trackUserTextChangeMetrics(){}trackFixAllMetrics(){}trackUnderlineMismatchMetrics(){}trackEmptyTextDiffMetrics(){}});const Nt=de.getUILanguageCode().substring(0,2);document.documentElement.lang=Nt;let Ot=!1,xt=null;const vt=ye.create(),Dt={TIMER_LABEL_HOUR_SINGULAR:Ee.getMessage("changelog2020TimerHourSingular"),TIMER_LABEL_HOUR_PLURAL:Ee.getMessage("changelog2020TimerHourPlural"),TIMER_LABEL_MINUTE_SINGULAR:Ee.getMessage("changelog2020TimerMinuteSingular"),TIMER_LABEL_MINUTE_PLURAL:Ee.getMessage("changelog2020TimerMinutePlural"),TIMER_LABEL_SECOND_SINGULAR:Ee.getMessage("changelog2020TimerSecondSingular"),TIMER_LABEL_SECOND_PLURAL:Ee.getMessage("changelog2020TimerSecondPlural")};function kt(e){Array.from(document.querySelectorAll(".premium-tag")).forEach(t=>{t.textContent=Ee.getMessage("changelog2020FeaturePremiumTag",String(e))}),Array.from(document.querySelectorAll(".upgrade-link")).forEach(t=>{t.textContent=Ee.getMessage("changelog2020FeatureUpgrade2Link",String(e))}),Array.from(document.querySelectorAll(".try-it-link")).forEach(t=>{t.textContent=Ee.getMessage("changelog2021FeatureSectionTryIt",String(e))}),Array.from(document.querySelectorAll(".header-discount")).forEach(t=>{t.textContent=String(e)})}function wt(){const e=document.getElementById("countdown"),t=document.getElementById("timer__labels__label--hour"),r=document.getElementById("timer__labels__label--minute"),n=document.getElementById("timer__labels__label--second");vt.onReady(()=>{vt.startChangelogCoupon();const s=vt.getActiveCoupon();s&&s.percent&&kt(s.percent),xt&&clearInterval(xt),xt=self.setInterval(()=>{const s=vt.getActiveCoupon(),i=document.createElement("div"),a=function(e){let t=e-Date.now();t<0&&(t=0);const r=Math.floor(t/1e3%60),n=Math.floor(t/1e3/60%60);return`${z(Math.floor(t/1e3/60/60))}:${z(n)}:${z(r)}`}(s&&s.expires||0),o=a.split(/:|/);o.forEach((e,t)=>{const r=document.createElement("span");if(r.className="navigation__count-down__digit",r.textContent=e,i.appendChild(r),t%2==1&&t<o.length-1){const e=document.createElement("span");e.className="navigation__count-down__divider",e.textContent=":",i.appendChild(e)}});const c=a.split(":");t.textContent=1===parseInt(c[0])?Dt.TIMER_LABEL_HOUR_SINGULAR:Dt.TIMER_LABEL_HOUR_PLURAL,r.textContent=1===parseInt(c[1])?Dt.TIMER_LABEL_MINUTE_SINGULAR:Dt.TIMER_LABEL_MINUTE_PLURAL,n.textContent=1===parseInt(c[2])?Dt.TIMER_LABEL_SECOND_SINGULAR:Dt.TIMER_LABEL_SECOND_PLURAL,e.innerHTML=i.innerHTML},1e3)})}function Ut(){vt.onReady(()=>{vt.updateUIState({lastChangelogNov2024Seen:Date.now()})})}function Mt(){const e=document.querySelector("#favicon");self.matchMedia?.("(prefers-color-scheme:dark)").matches&&(e.href=e.href.replace("-color","-white")),"visible"!==document.visibilityState||Ot||(Ut(),yt.trackEvent("Action","changelog:seen"),Ot=!0,wt(),e.href=e.href.replace("_notification",""))}function Gt(e,t,r){t&&r?t.href=r+`?utm_campaign=addon2-changelog-11-2024-${e}`:t?.remove()}kt(20),document.addEventListener("visibilitychange",()=>{setTimeout(Mt,750)}),Mt(),vt.onReady(()=>{let{geoIpCountry:e,hasSynonymsEnabled:t,preferredLanguages:r}=vt.getSettings();const n=document.getElementById("enable-paraphrasing-link"),s=document.getElementById("learn-more-paraphrasing-link"),i=document.getElementById("learn-more-ai-link"),a=document.getElementById("learn-more-mac-link"),o=document.getElementById("learn-more-windows-link"),c=document.getElementById("learn-more-user-mgmt-link"),l=document.getElementById("learn-more-writing-goals-link"),g=document.getElementById("learn-more-statistics-link"),u=document.getElementById("learn-more-libreoffice-link"),d=document.getElementById("learn-more-style-guide-link");e=(e||"").toLowerCase(),t&&n&&s&&(n.remove(),s.classList.add("btn-primary"),s.classList.remove("btn-secondary")),n&&n.addEventListener("click",e=>{de.openOptionsPage("generalSettings"),e.preventDefault()}),Array.from(document.querySelectorAll("#enable-paraphrasing-description a"),e=>{e.addEventListener("click",e=>{de.openOptionsPage("generalSettings"),e.preventDefault()})});const h=location.href.includes("?all"),m=h||["de","li","lu","at","nl","be","ch","fr","ie","pl","se","no","ie","mt","dk","no","it","es","pt","cz"].includes(e),p=h||"Mac"===R.getOS(),_=h||"Windows"===R.getOS(),E=h||!R.isFirefox(),f=h||"Mac"!==R.getOS()&&"Windows"!==R.getOS(),S=h||"Linux"===R.getOS(),A=h||"fr"===e||r.includes("fr")||navigator.language.startsWith("fr");E||(document.getElementById("statistics-teaser")?.remove(),document.getElementById("statistics")?.remove()),S||document.getElementById("libreoffice-teaser")?.remove(),f||document.getElementById("style-guide-teaser")?.remove(),p||(document.getElementById("desktop-mac-teaser")?.remove(),document.getElementById("desktop-mac")?.remove()),_||(document.getElementById("desktop-windows-teaser")?.remove(),document.getElementById("desktop-windows")?.remove()),A||(document.getElementById("french-version-teaser")?.remove(),document.getElementById("french-version")?.remove()),m||document.querySelector(".made-in-eu")?.remove();const T={writingGoals:{en:"https://languagetool.org/insights/post/writing-goals/",de:"https://languagetool.org/insights/de/beitrag/schreibziele/",es:"https://languagetool.org/insights/es/publicacion/objetivos-de-escritura-languagetool/",fr:"https://languagetool.org/insights/fr/poste/registres-de-texte/"},ai:{en:"https://languagetool.org/insights/post/artificial-intelligence/",de:"https://languagetool.org/insights/de/beitrag/kunstliche-intelligenz/",fr:"https://languagetool.org/insights/fr/poste/intelligence-artificielle-et-correcteurs-automatiques/"},paraphrasing:{en:"https://languagetool.org/insights/post/product-rephrase-feature/",de:"https://languagetool.org/insights/de/beitrag/umformulieren/",es:"https://languagetool.org/insights/es/publicacion/parafrasear-textos/",fr:"https://languagetool.org/insights/fr/poste/fonction-de-reformulation/"},mac:{en:"https://languagetool.org/insights/post/product-mac-app/",de:"https://languagetool.org/insights/de/beitrag/produkt-mac-app/",es:"https://languagetool.org/insights/es/publicacion/aplicacion-macos-de-languagetool/",fr:"https://languagetool.org/insights/fr/poste/application-mac/"},windows:{en:"https://languagetool.org/insights/post/product-windows-app/",de:"https://languagetool.org/insights/de/beitrag/windows-app/",es:"https://languagetool.org/insights/es/publicacion/languagetool-para-windows/",fr:"https://languagetool.org/insights/fr/poste/application-windows/"},statistics:{en:"https://languagetool.org/insights/post/statistics-feature/",de:"https://languagetool.org/insights/de/beitrag/textstatistik/",es:"https://languagetool.org/insights/es/publicacion/funcionalidad-estadisticas-languagetool/",fr:"https://languagetool.org/insights/fr/poste/fonctionnalite-de-statistiques/"},userManagement:{en:"https://languagetool.org/insights/post/team-account/",de:"https://languagetool.org/insights/de/beitrag/teamaccount/",fr:"https://languagetool.org/insights/fr/poste/compte-equipe/"},libreOffice:{en:"https://languagetool.org/insights/post/product-libreoffice/",de:"https://languagetool.org/insights/de/beitrag/produkt-libreoffice/",fr:"https://languagetool.org/insights/fr/poste/languagetool-et-libreoffice/",es:"https://languagetool.org/insights/es/publicacion/languagetool-para-libreoffice/"},styleGuide:{en:"https://languagetool.org/insights/post/personal-style-guide/",de:"https://languagetool.org/insights/de/beitrag/styleguide/",fr:"https://languagetool.org/insights/fr/poste/guide-de-style/",es:"https://languagetool.org/insights/es/publicacion/guia-de-estilo/"}},I=["de","en","es","fr"].includes(Nt)?Nt:"en";Gt("paraphrasing",s,T.paraphrasing[I]),Gt("ai",i,T.ai[I]),Gt("mac",a,T.mac[I]),Gt("windows",o,T.windows[I]),Gt("writing-goals",l,T.writingGoals[I]||T.statistics.en),Gt("statistics",g,T.statistics[I]||T.statistics.en),Gt("user-mgmt",c,T.userManagement[I]||T.userManagement.en),Gt("libreoffice",u,T.libreOffice[I]||T.libreOffice.en),Gt("styleguide",d,T.styleGuide[I]||T.styleGuide.en)}),Array.from(document.querySelectorAll("a[href='upgrade']")).forEach(e=>{e.addEventListener("click",()=>{yt.trackEvent("Action","changelog:click_upgrade")})}),Array.from(document.querySelectorAll("#cards a")).forEach(e=>{e.addEventListener("click",()=>{yt.trackEvent("Action","changelog:learn_more",e.getAttribute("href")?.substring(1))})});let Ft=!1;var Bt;self.addEventListener("scroll",()=>{!Ft&&document.scrollingElement&&document.scrollingElement.scrollTop>600&&(Ut(),Ft=!0,yt.trackEvent("Action","changelog:scrolled"));const e=document.getElementById("changelog-navigation-top"),t=self.scrollY||self.pageYOffset;e&&(0===t?e.classList.remove("sticky"):t>0&&!e.classList.contains("sticky")&&e.classList.add("sticky"))}),Bt=document.documentElement,Array.from(Bt.querySelectorAll("[data-t]")).forEach(e=>{we(e,e.getAttribute("data-t"))}),Array.from(Bt.querySelectorAll("[data-t-placeholder]")).forEach(e=>{we(e,{key:e.getAttribute("data-t-placeholder"),attr:"placeholder"})}),Array.from(Bt.querySelectorAll("[data-t-html]")).forEach(e=>{we(e,{key:e.getAttribute("data-t-html"),isHTML:!0})}),Array.from(Bt.querySelectorAll("[data-t-title]")).forEach(e=>{we(e,{key:e.getAttribute("data-t-title"),attr:"title"})}),Array.from(Bt.querySelectorAll("[data-t-attr]")).forEach(e=>{const[t,r]=(e=>{const t=String(e.getAttribute("data-t-attr"));try{const e=JSON.parse(t);if((e=>Array.isArray(e)&&"string"==typeof e[0]&&"string"==typeof e[1]&&2===e.length)(e))return e;throw Error()}catch{return["",""]}})(e);t&&r&&we(e,{key:r,attr:t})}),yt.trackEvent("Action","changelog:opened"),ke().runtime.onMessage.addListener(e=>{if("CHANGELOG_PING"===e.command)return Promise.resolve("success")});const Ht=new BroadcastChannel("changelog");Ht.postMessage("close_others"),setTimeout(()=>{Ht.addEventListener("message",e=>{e&&"close_others"===e.data&&ke().tabs.getCurrent().then(e=>{e&&e.id&&ke().tabs.remove(e.id)})})})})()})();