(()=>{var e={4629:function(e,t){var r,s,n;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,s=[e],r=function(e){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const t="The message port closed before a response was received.",r=e=>{const r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(r).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class s extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const n=e=>e&&"object"==typeof e&&"function"==typeof e.then,i=(t,r)=>(...s)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):r.singleCallbackArg||s.length<=1&&!1!==r.singleCallbackArg?t.resolve(s[0]):t.resolve(s)},a=e=>1==e?"argument":"arguments",o=(e,t)=>function(r,...s){if(s.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${s.length}`);if(s.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${s.length}`);return new Promise((n,a)=>{if(t.fallbackToNoCallback)try{r[e](...s,i({resolve:n,reject:a},t))}catch(i){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,i),r[e](...s),t.fallbackToNoCallback=!1,t.noCallback=!0,n()}else t.noCallback?(r[e](...s),n()):r[e](...s,i({resolve:n,reject:a},t))})},c=(e,t,r)=>new Proxy(t,{apply:(t,s,n)=>r.call(s,e,...n)});let l=Function.call.bind(Object.prototype.hasOwnProperty);const u=(e,t={},r={})=>{let s=Object.create(null),n={has:(t,r)=>r in e||r in s,get(n,i,a){if(i in s)return s[i];if(!(i in e))return;let g=e[i];if("function"==typeof g)if("function"==typeof t[i])g=c(e,e[i],t[i]);else if(l(r,i)){let t=o(i,r[i]);g=c(e,e[i],t)}else g=g.bind(e);else if("object"==typeof g&&null!==g&&(l(t,i)||l(r,i)))g=u(g,t[i],r[i]);else{if(!l(r,"*"))return Object.defineProperty(s,i,{configurable:!0,enumerable:!0,get:()=>e[i],set(t){e[i]=t}}),g;g=u(g,t[i],r["*"])}return s[i]=g,g},set:(t,r,n,i)=>(r in s?s[r]=n:e[r]=n,!0),defineProperty:(e,t,r)=>Reflect.defineProperty(s,t,r),deleteProperty:(e,t)=>Reflect.deleteProperty(s,t)},i=Object.create(e);return new Proxy(i,n)},g=e=>({addListener(t,r,...s){t.addListener(e.get(r),...s)},hasListener:(t,r)=>t.hasListener(e.get(r)),removeListener(t,r){t.removeListener(e.get(r))}}),d=new s(e=>"function"!=typeof e?e:function(t){const r=u(t,{},{getContent:{minArgs:0,maxArgs:0}});e(r)}),h=new s(e=>"function"!=typeof e?e:function(t,r,s){let i,a,o=!1,c=new Promise(e=>{i=function(t){o=!0,e(t)}});try{a=e(t,r,i)}catch(e){a=Promise.reject(e)}const l=!0!==a&&n(a);if(!0!==a&&!l&&!o)return!1;const u=e=>{e.then(e=>{s(e)},e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",s({__mozWebExtensionPolyfillReject__:!0,message:t})}).catch(e=>{console.error("Failed to send onMessage rejected reply",e)})};return u(l?a:c),!0}),m=({reject:r,resolve:s},n)=>{e.runtime.lastError?e.runtime.lastError.message===t?s():r(new Error(e.runtime.lastError.message)):n&&n.__mozWebExtensionPolyfillReject__?r(new Error(n.message)):s(n)},p=(e,t,r,...s)=>{if(s.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${s.length}`);if(s.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${s.length}`);return new Promise((e,t)=>{const n=m.bind(null,{resolve:e,reject:t});s.push(n),r.sendMessage(...s)})},_={devtools:{network:{onRequestFinished:g(d)}},runtime:{onMessage:g(h),onMessageExternal:g(h),sendMessage:p.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:p.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},E={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":E},services:{"*":E},websites:{"*":E}},u(e,_,r)};e.exports=r(chrome)}else e.exports=globalThis.browser},void 0===(n="function"==typeof r?r.apply(t,s):r)||(e.exports=n)},6326:(e,t,r)=>{"use strict";r(8249)},8249:(e,t)=>{"use strict";var r=Symbol.for("react.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;
/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,_={};function E(e,t,r){this.props=e,this.context=t,this.refs=_,this.updater=r||m}function f(){}function S(e,t,r){this.props=e,this.context=t,this.refs=_,this.updater=r||m}E.prototype.isReactComponent={},E.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},E.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},f.prototype=E.prototype;var A=S.prototype=new f;A.constructor=S,p(A,E.prototype),A.isPureReactComponent=!0;var T=Array.isArray,R=Object.prototype.hasOwnProperty,C={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,s){var n,i={},a=null,o=null;if(null!=t)for(n in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)R.call(t,n)&&!I.hasOwnProperty(n)&&(i[n]=t[n]);var c=arguments.length-2;if(1===c)i.children=s;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(n in c=e.defaultProps)void 0===i[n]&&(i[n]=c[n]);return{$$typeof:r,type:e,key:a,ref:o,props:i,_owner:C.current}}function L(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var b=/\/+/g;function N(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function O(e,t,n,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var c=!1;if(null===e)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case s:c=!0}}if(c)return a=a(c=e),e=""===i?"."+N(c,0):i,T(a)?(n="",null!=e&&(n=e.replace(b,"$&/")+"/"),O(a,t,n,"",function(e){return e})):null!=a&&(L(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(b,"$&/")+"/")+e)),t.push(a)),1;if(c=0,i=""===i?".":i+":",T(e))for(var l=0;l<e.length;l++){var u=i+N(o=e[l],l);c+=O(o,t,n,u,a)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),l=0;!(o=e.next()).done;)c+=O(o=o.value,t,n,u=i+N(o,l++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function y(e,t,r){if(null==e)return e;var s=[],n=0;return O(e,s,"","",function(e){return t.call(r,e,n++)}),s}function x(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var v={current:null},D={transition:null};function k(){throw Error("act(...) is not supported in production builds of React.")}}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e;!function(e){e.CHROME_EXTENSION_ID="CHROME_EXTENSION_ID",e.SHOW_PARTIAL_RECO_UNDERLINE="SHOW_PARTIAL_RECO_UNDERLINE",e.EXTN_PREFIX="EVENT_PREFIX",e.COLORS_GRAMMAR="COLORS_GRAMMAR",e.CARD_LAYOUT="CARD_LAYOUT",e.COLORS_SPELLING="COLORS_SPELLING",e.COLORS_STYLE="COLORS_LONG_SENTENCE",e.SUPPORTED_LANGUAGES="SUPPORTED_LANGUAGES",e.INSTALLED_ATTRIBUTE="INSTALLED_ATTRIBUTE",e.SITE_INIT_ATTRIBUTE="SITE_INIT_ATTRIBUTE",e.INPUT_AREA_INIT_ATTRIBUTE="INPUT_AREA_INIT_ATTRIBUTE",e.TMP_ID_ATTRIBUTE="TMP_ID_ATTRIBUTE",e.AI_RULE_ID_REGEX="AI_RULE_ID_REGEX",e.COLORS_PARAPHRASE="COLORS_PARAPHRASE",e.COLORS_RECOMMENDATION="COLORS_RECOMMENDATION",e.COLORS_RECOMMENDATION_TEASE="COLORS_RECOMMENDATION_TEASE",e.VALID_START_SENTENCE_REGEX="VALID_START_SENTENCE_REGEX",e.VALID_END_SENTENCE_REGEX="VALID_END_SENTENCE_REGEX",e.MULTI_SENTENCE_SELECTION_FOR_PARAPHRASE_ALLOWED="MULTI_SENTENCE_SELECTION_FOR_PARAPHRASE_ALLOWED",e.MAX_TEXT_LENGTH_ALLOWED_FOR_PAGELESS="MAX_TEXT_LENGTH_ALLOWED_FOR_PAGELESS",e.MAX_TEXT_LENGTH_ALLOWED="MAX_TEXT_LENGTH_ALLOWED",e.SELECTED_UNDERLINE_THICKNESS="SELECTED_UNDERLINE_THICKNESS",e.BULLET_POINT_PARSING_PREFIX="BULLET_POINT_PARSING_PREFIX",e.TOOLBAR_SIZE="TOOLBAR_SIZE",e.FIX_ALL_CONFIG="FIX_ALL_CONFIG",e.IGNORE_EDITOR_WITH_ATTRIBUTES="IGNORE_EDITOR_WITH_ATTRIBUTES",e.SHOW_TOOLBAR_ON_EMPTY_INPUT_AREA="SHOW_TOOLBAR_ON_EMPTY_INPUT_AREA",e.MAIN_CONTENT_SCRIPT_FILENAME="MAIN_CONTENT_SCRIPT_FILENAME",e.SPECIAL_INTRODUCTORY_TEASER_ENABLED="SPECIAL_INTRODUCTORY_TEASER_ENABLED",e.TERMS_OF_SERVICE_MODAL_ENABLED="TERMS_OF_SERVICE_MODAL_ENABLED",e.LOLLIPOP_CONFIG="LOLLIPOP_CONFIG",e.NORMALIZE_SPACE="NORMALIZE_SPACE",e.USE_CSS_CUSTOM_HIGHLIGHTS="USE_CSS_CUSTOM_HIGHLIGHTS",e.STRIP_WRAPPING_QUOTES_FROM_SENTENCE="STRIP_WRAPPING_QUOTES_FROM_SENTENCE",e.GDOCS_MENU_BUTTONS="GDOCS_MENU_BUTTONS",e.SUPPORTS_TRIAL="SUPPORTS_TRIAL",e.DISABLE_WHEN_QB_EXTENSION_IS_PRESENT="DISABLE_WHEN_QB_EXTENSION_IS_PRESENT"}(e||(e={}));const t={[e.CHROME_EXTENSION_ID]:"oldceeleldhonbafppcapldpdifcinji",[e.NORMALIZE_SPACE]:!1,[e.SHOW_PARTIAL_RECO_UNDERLINE]:!1,[e.EXTN_PREFIX]:"lt",[e.COLORS_GRAMMAR]:{UNDERLINE:"#f2b24c",SELECTED_UNDERLINE:"#f2b24c",BACKGROUND:"rgba(242,179,77,0.3)",EMPHASIZE:"rgba(241,179,76,0.1)"},[e.COLORS_SPELLING]:{UNDERLINE:"#EB5757",SELECTED_UNDERLINE:"#EB5757",BACKGROUND:"rgba(235,88,88,0.2)",EMPHASIZE:"rgba(239,88,88,0.1)"},[e.COLORS_STYLE]:{UNDERLINE:"#8F7FFF",SELECTED_UNDERLINE:"#8F7FFF",BACKGROUND:"rgba(142,128,255,0.2)",EMPHASIZE:"rgba(138,128,255,0.2)",TITLE:"#5C4CFF"},[e.COLORS_PARAPHRASE]:{UNDERLINE:"#8F7FFF",BACKGROUND:"rgba(142,128,255,0.2)",EMPHASIZE:"rgba(138,128,255,0.2)",TITLE:"#5C4CFF"},[e.COLORS_RECOMMENDATION]:{UNDERLINE:"#80B3E2",SELECTED_UNDERLINE:"#0067C5",BACKGROUND:"rgba(0, 103, 199, 0.16)",EMPHASIZE:"rgba(0, 103, 199, 0.16)"},[e.COLORS_RECOMMENDATION_TEASE]:{UNDERLINE:"#CF9F0280",SELECTED_UNDERLINE:"#CF9F02",BACKGROUND:"rgba(242,181,24,0.16)",EMPHASIZE:"rgba(242,181,24,0.16)"},[e.SUPPORTED_LANGUAGES]:["ar","ast-es","be-by","br-fr","ca-es","ca-es-valencia","crh-ua","da-dk","de-at","de-ch","de-de","el-gr","en-au","en-ca","en-gb","en-nz","en-us","en-za","eo","es","fa","ga-ie","fr","gl-es","it","ja-jp","km-kh","nl","no","pl-pl","pt-ao","pt-br","pt-mz","pt-pt","ro-ro","ru-ru","sk-sk","sl-si","sv","ta-in","tl-ph","uk-ua","zh-cn"],[e.CARD_LAYOUT]:{TARGET_BOX_HORIZONTAL_MARGIN:0,TARGET_BOX_VERTICAL_MARGIN:5,HEADER_HEIGHT:36,FOOTER_HEIGHT:36,KEYBOARD_HINT_HEIGHT:60,MIN_HEIGHT_PARAPHRASE:200,MIN_HEIGHT_TOOLBOX:230,MAX_HEIGHT_TOOLBOX:368},[e.INSTALLED_ATTRIBUTE]:"data-lt-installed",[e.SITE_INIT_ATTRIBUTE]:"data-lt-site",[e.INPUT_AREA_INIT_ATTRIBUTE]:"data-lt-tweaks",[e.TMP_ID_ATTRIBUTE]:"data-lt-tmp-id",[e.AI_RULE_ID_REGEX]:/^(QB|AI)_/,[e.VALID_START_SENTENCE_REGEX]:"[^•]",[e.VALID_END_SENTENCE_REGEX]:".",[e.MULTI_SENTENCE_SELECTION_FOR_PARAPHRASE_ALLOWED]:!1,[e.MAX_TEXT_LENGTH_ALLOWED_FOR_PAGELESS]:15e3,[e.MAX_TEXT_LENGTH_ALLOWED]:1e4,[e.SELECTED_UNDERLINE_THICKNESS]:2,[e.BULLET_POINT_PARSING_PREFIX]:"• ",[e.TOOLBAR_SIZE]:{width:20,height:20},[e.FIX_ALL_CONFIG]:{FIX_GC_ERRORS:!0,FIX_RECOMMENDATIONS:!1,FIX_STYLE_ERRORS:!1},[e.IGNORE_EDITOR_WITH_ATTRIBUTES]:["spellcheck"],[e.SHOW_TOOLBAR_ON_EMPTY_INPUT_AREA]:!1,[e.MAIN_CONTENT_SCRIPT_FILENAME]:"/content.js",[e.SPECIAL_INTRODUCTORY_TEASER_ENABLED]:!0,[e.TERMS_OF_SERVICE_MODAL_ENABLED]:!1,[e.LOLLIPOP_CONFIG]:{LOLLIPOP_THEME:"purple",LOLLIPOP_CSS_PATH:"/content/styles/lollipop.css",ONBOARDING_IMAGE_PATH:"/assets/images/toolbox/lollipop-onboarding-lt.webp",ONBOARDING_BORDER_RADIUS:"8px",LOLLIPOP_CIRCLE_IMAGE_PATH:"/assets/images/toolbox/lollipop-icon.svg",LOLLIPOP_CIRCLE_GDOCS_IMAGE_PATH:"/assets/images/toolbox/lollipop-icon-gdocs.svg",SUPPORTS_DARK_MODE:!0,ONBOARDING_LANDING_PAGE_URL:"https://languagetool.org/text-cursor",TOOLBOX_IFRAME_PATH:"/toolbox/toolbox.html",TOOLBOX_AVAILABLE_UI_LANGUAGES:["de","en","es","fr","nl","pt-br"],PPHR_SUPPORTS_MULTISENTENCE:!0,TOOLBOX_HOTKEY:void 0,TRACKING_SAMPLING_RATE:100,DEEP_LINK_INTO_TOOLBOX:!1},[e.STRIP_WRAPPING_QUOTES_FROM_SENTENCE]:!0,[e.USE_CSS_CUSTOM_HIGHLIGHTS]:!1,[e.GDOCS_MENU_BUTTONS]:!0,[e.SUPPORTS_TRIAL]:!0,[e.DISABLE_WHEN_QB_EXTENSION_IS_PRESENT]:!0};class s{constructor(){this.extnConfig=t}static getInstance(){return this.instance||self._qb_lt_config||(this.instance=new s,self._qb_lt_config=this.instance),this.instance||self._qb_lt_config}get(e){return this.extnConfig[e]}set(e,t){this.extnConfig[e]=t}setAll(e){this.extnConfig=e}getAll(){return this.extnConfig}}const n=s.getInstance(),i="https://api.languagetool.org/v2",a="https://api.languagetoolplus.com/v2",o=[502,503,504],c=18e4,l=(n.get(e.MAX_TEXT_LENGTH_ALLOWED),Number.MAX_SAFE_INTEGER,/@(languagetool(er)?|quillbot|scribbr|learneo|coursehero|symbolab|litcharts|spellboy)\.(com|org|de|nl)$/i),u=["de","de-CH","ru","sv","pt","pt-BR","el","en","eo","it","fr","es","uk","sk","sl","pl","da","ro","nl","ca"],g={UKRAINE:{countries:["UA","BY"],percent:50},"ITALY-DISCOUNT":{countries:["IT"],percent:20},"SPAIN-DISCOUNT":{countries:["ES"],percent:20},SOUTH_EUROPE:{countries:["RO","AL","GR","ME","EE","LT","LV","BG","CY","MT","SK","SI","RS","HR","XK","HU","MD","TR","PT"],percent:20},AFRICA:{countries:["NG","ET","EG","CD","CG","TZ","KE","UG","DZ","SD","MA","AO","MZ","TN","CI","DJ","SZ","MU","GQ","GA","BW","SO","CD","ER","MG"],percent:50},ASIA:{countries:["ID","PK","BD","VN","MM","PH","UZ","MY","NP","KZ","KH","UZ","TH","YE","SY","JO"],percent:50},LATIN_AMERICA:{countries:["PE","VE","EC","SV","DO","BO","SR","AR","HN","BZ","CR","PA","GT","NI","GY","UY","HT","JM","TT","CU"],percent:50},BRAZIL:{countries:["BR"],percent:50}},d="Basic",h="Premium",m=["EN_QUOTES","PASSIVE_VOICE","DASH_RULE","SENTENCE_FRAGMENT","PONCTUATION_DOUBLE","TOO_LONG_SENTENCE","COMETES_TIPOGRAFIQUES","APOSTROF_TIPOGRAFIC","FALSCHE_VERWENDUNG_DES_BINDESTRICHS","HALBGEVIERTSTRICH","PARAGRAF_LEERZEICHEN","TYPOGRAFISCHE_APOSTROPHE","TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN","TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN_CH","TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN_2","PUNCTUATION_PARAGRAPH_END","FINAL_STOPS","FINAL_PUNCTUATION","SMART_QUOTES","PT_SMART_QUOTES","DASH_SPACE_RULES","HIPHEN_SPACE_RULES","BRAK_KROPKI","DYWIZ","CUDZYSLOW_DRUKARSKI","TYPOGRAFISCHE_AANHALINGSTEKENS","TYPOGRAFISCHE_AANHALINGSTEKENS_2","EINDE_ZIN_ONVERWACHT","BACKTICK","GEDACHTESTREEPJE","OPTIONAL_HYPHEN","COMILLAS_TIPOGRAFICAS","COMETES_TIPOGRAFIQUES","GL_SMART_QUOTES"],p=["OXFORD_SPELLING_Z_NOT_S"],_=["de","fr"],E=/[\"“”„]$/,f=/^[\"“”„]/,S="⁣",A=12096e5,T=/school|schule|bildung|academ|colegio|college|escola|universi|\.edu\b|educat|gnspes\.ca|dwightlondon\.org|k12\.nj\.us/i;
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class R{static _contructor(){if(this._isInitialized)return;R._isChromium=navigator.userAgent.includes("Chrome/")||navigator.userAgent.includes("Chromium/"),R._isFirefox=navigator.userAgent.includes("Firefox/"),R._isThunderbird=navigator.userAgent.includes("Thunderbird/"),R._isOpera=navigator.userAgent.includes("OPR/"),R._isEdge=navigator.userAgent.includes("Edg/"),R._isOldEdge=navigator.userAgent.includes("Edge/"),R._isSafari=(navigator.userAgent.includes("Safari/")||navigator.userAgent.includes("AppleWebKit"))&&!R._isChromium&&!R._isEdge&&!R._isOpera,R._isYaBrowser=navigator.userAgent.includes("YaBrowser/"),R._isChrome=R._isChromium&&!R._isOpera&&!R._isEdge&&!R._isOldEdge&&!R._isYaBrowser;const e=navigator.userAgent.match(/Chrome\/(\d+)/);e&&(R._isUnsupportedChrome=parseInt(e[1])<67&&!navigator.userAgent.includes("Edge/"));const t=navigator.userAgent.match(/Firefox\/(\d+)/);t&&(R._isUnsupportedFirefox=parseInt(t[1])<60),this._isInitialized=!0}static getOS(){return navigator.userAgent.includes("Macintosh")?"Mac":navigator.userAgent.includes("Windows")?"Windows":navigator.userAgent.includes("CrOS")?"CrOS":navigator.userAgent.includes("Linux")?"Linux":"Other"}static isChromium(){return R._isChromium}static isChrome(){return R._isChrome}static isThunderbird(){return R._isThunderbird}static isFirefox(){return R._isFirefox}static isOpera(){return R._isOpera}static isEdge(){return R._isEdge}static isSafari(){return R._isSafari}static isYaBrowser(){return R._isYaBrowser}static isUnsupportedChrome(){return R._isUnsupportedChrome}static isUnsupportedFirefox(){return R._isUnsupportedFirefox}static isUnsupportedBrowser(){return R.isUnsupportedChrome()||R.isUnsupportedFirefox()}static getBrowserName(){return R.isChrome()?"Chrome":R.isFirefox()?"Firefox":R.isOpera()?"Opera":R.isEdge()?"Edge":R.isSafari()?"Safari":R.isYaBrowser()?"Yandex":"Unknown Browser"}static getUserAgentIdentifier(){let e="webextension";return this.isChrome()?e+="-chrome":this.isFirefox()?e+="-firefox":this.isOpera()?e+="-opera":this.isEdge()?e+="-edge":this.isYaBrowser()?e+="-chrome":this.isSafari()?e+="-safari":e+="-unknown",e+"-ng"}static isTouchDevice(){if(!("ontouchstart"in self))return!1;const e=navigator.userAgent.includes("Android");return this.isIOS()||e}static isIOS(){const e=navigator.userAgent.includes("iPhone OS"),t=navigator.userAgent.includes("Macintosh")&&Boolean(navigator.maxTouchPoints&&navigator.maxTouchPoints>2);return e||t}static isIOSTouchDevice(){return"ontouchstart"in self&&this.isIOS()}static isMacApp(){return navigator.userAgent.includes("AppleWebKit/")&&navigator.userAgent.includes("LanguageTool/")&&!navigator.userAgent.includes("Chrome/")&&!navigator.userAgent.includes("Chromium/")}static isWindowsApp(){return navigator.userAgent.includes("LanguageToolWindows/")}}R._isChromium=!1,R._isChrome=!1,R._isFirefox=!1,R._isThunderbird=!1,R._isOpera=!1,R._isOldEdge=!1,R._isEdge=!1,R._isSafari=!1,R._isYaBrowser=!1,R._isUnsupportedChrome=!1,R._isUnsupportedFirefox=!1,R._isInitialized=!1,R._contructor();let C,I;try{C=new RegExp("\\p{L}","u")}catch(e){C=/[a-zäöüß]/i}function P(e){return C.test(e)}try{I=new RegExp("(?:\\p{Emoji}|\\u200d|\\ufe0e|\\ufe0f)","u")}catch(e){I=/_^/}const L=["\b","\t"," "," "," "," "," "," "," "," "," "," ","‏","　"];const b=new RegExp("["+L.join("")+"]","g");const N=["­","​","‌","‍","‪","‫","‬","‭","⁠","\ufeff"];new RegExp("["+N.join("")+"]");new RegExp("["+N.join("")+"]","g");const O=new RegExp("^⁣+");const y=new RegExp("⁣+$");const x=function(){const e=/^[A-ZÈÉÊÁÀÂÓÒÔÚÙÛÍÌÎÄÜÖ]+[A-ZÈÉÊÁÀÂÓÒÔÚÙÛÍÌÎÄÜÖ\-!?#@=%().:;<>'’´`"”“*+,\s]+[A-ZÈÉÊÁÀÂÓÒÔÍÌÎÄÜÖ]$/;return function(t){return e.test(t)}}();function v(e,t){const{start:r,end:s=r}=t||{start:-1};if(!e||-1===r)return;const n=e.map(e=>Array.isArray(e)?e:[e.start,e.end]).findIndex(([e,t])=>r>=e&&s<=t);return n<0?void 0:e[n]}let D,k,w,U;!function(){const e=/(?:\S+\s+){0,4}\S+$/,t=/^\S+(?:\s+\S+){0,4}/;D=(e,t,r=t,s=!0)=>{const[n,i]=(()=>{try{const e=s?"":["\\p{Emoji}","\\u200d","\\ufe0e","\\ufe0f"].join("");return[new RegExp("^\\s*(-?[\\p{L}#*"+e+"]+){0,3}-?\\s*$","u"),new RegExp("^\\s*[\\p{L}#*"+e+"]+(-[\\p{L}#*"+e+"]+){0,3}\\s*$","u")]}catch{return[/^\s*(-?[a-zäöüß#*]+){0,3}-?\s*$/i,/^\s*[a-zäöüß#*]+(-[a-zäöüß#*]+){0,3}\s*$/i]}})(),a=e=>{return!s&&(t=e,I.test(t));var t},o=e.substring(t,r),[{length:c=0}]=o.match(/^[^\S]*/),[{length:l=0}]=o.match(/[^\S]*$/);if(!n.test(o))return null;const u=(()=>{const r=t+c,s=e.substring(0,r).split(/[^\S]+/);return X(s[s.length-1]).reverse()})(),g=(()=>{const t=r-l,[s]=e.substring(t).split(/[^\S]+/);return X(s)})(),d=Math.max(u.length,g.length);let h=!1,m=!1,p=t,_=r;for(let e=0;e<d;e++){const t=u[e],r=t&&(P(t)||a(t)||"-"===t),s=g[e],n=s&&(P(s)||a(s)||"-"===s);if(r&&!h?p-=t.length:h=!0,n&&!m?_+=s.length:m=!0,h&&m)break}c>0&&(p+=c),l>0&&(_-=l);const E=e.substring(p,_);return i.test(E)?{start:p,end:_}:null},k=(r,s,n=s,i,a=!0)=>{const o=D(r,s,n,a);if(!o)return null;const c=v(i,{start:s,end:n});let l="",u="",g="";if(c)g=r.substring(c.start,c.end).trim(),l=r.slice(c.start,o.start).trim(),u=r.slice(o.end,c.end).trim();else{const s=e.exec(r.substring(0,o.start).trim());l=s?s[0]:"",l=l.replace(/^.+\n\n/,"");const n=t.exec(r.substring(o.end).trim());u=n?n[0]:"",u=u.replace(/\n\n.+/,"")}return{word:r.substring(o.start,o.end),position:o,sentence:g,beforeText:l,afterText:u}}}(),function(){let e;const t=[['"','"'],["'","'"],["“","”"],["„","“"],["‘","’"],["‚","‘"],["«","»"],["»","«"],["`","`"],["´","´"],["{","}"],["[","]"],["(",")"],["<",">"]],r="[^\\S]",s="[.,:;¡!¿?]",n="[\\udc00-\\udfff\\ud800-\\udb7f\\u200d\\ufe0e\\ufe0f\\p{Emoji_Presentation}\\p{Emoji_Modifier}\\p{Emoji}]";let i,a,o,c;const l=/(?:\S+\s+){0,4}\S+$/,u=/^\S+(?:\s+\S+){0,4}/;try{const t=[r,s,n].join("|");i=new RegExp(`(?:${t})`,"u"),a=new RegExp(`^(?:${t})*`,"u"),o=new RegExp(`(?:${t})*$`,"u"),e=new RegExp("^\\s*\\p{L}+(-\\p{L}+)*\\s*$","u"),c=new RegExp("^\\p{L}+$","u")}catch{const t=[r,s].join("|");i=new RegExp(`(?:${t})`),a=new RegExp(`^(?:${t})*`),o=new RegExp(`(?:${t})*$`),e=/^\s*[a-zäöüß]+(-[a-zäöüß]+)*\s*$/i,c=/^[a-zäöüß]+$/i}w=(s,n,l=n,u)=>{const g=s.substring(n,l),d=n===l,h=d?s.substring(n-1,l):"",m=d?s.substring(n,l+1):"",p=!!d&&0===[h,m].filter(e=>!!e.match(c)).length,_=g.split(new RegExp(`${r}+`)).length>5,[E=""]=g.match(a),[f=""]=g.match(o),S=E.length,A=f.length,T=[E.trim(),f.trim()];if(p||_)return null;const R=function(e,t){const{start:r}=t||{start:-1};if(!e||-1===r)return;const s=e.sort((e,t)=>e.start-t.start).find(e=>{if(r<=e.end&&r>=e.start)return!0});return s||void 0}(u,{start:n,end:l})?.start||0,C=function(e,t){const{end:r}=t||{end:-1};if(!e||void 0===r||-1===r)return;const s=e.sort((e,t)=>e.start-t.start).find(e=>{if(r<=e.end&&r>=e.start)return!0});return s||void 0}(u,{start:n,end:l})?.end||s.length-1;let I=n+S;for(;I>R;){const[e]=s[I-1].match(i)||[];if(e){0===S&&(T[0]+=e.trim());break}I--}let P=l-1-A;for(;P<C-1;){const[e]=s[P+1].match(i)||[];if(e){0===A&&(T[1]+=s[P+1].trim());break}P++}if(P+=1,I===R&&P===C)return null;const L=s.substring(I,P);if(L.split(e).length>=6)return null;let b=!1,N=!1;for(const[e,r]of t){b||!L.startsWith(e)||L.slice(1).includes(r)||(I+=1,b=!0,T[0]+=L[0]);const t=L.length-1;N||!L.endsWith(r)||L.slice(0,t).includes(e)||(P-=1,N=!0,T[1]+=L[t])}return{start:I,end:P,omittedCharacters:T}},U=(e,t,r=t,s)=>{let n=w(e,t,r,s);if(!n)return null;const i=v(s,{start:t,end:r});n=(()=>{if(!i)return n;const t=e.slice(i.start,n.start),r=e.slice(n.end,i.end),s=!t||!!t.match(/^[¡¿]+$/),a=!r||!!r.match(/^[.!?]+$/);return s&&a&&(n={start:i.start,end:i.end,omittedCharacters:["",""]}),n})();let a="",o="",c="";if(i)c=e.substring(i.start,i.end).trim(),a=e.slice(i.start,n.start).trim(),o=e.slice(n.end,i.end).trim();else{const t=l.exec(e.substring(0,n.start).trim());a=t?t[0]:"",a=a.replace(/^.+\n\n/,"");const r=u.exec(e.substring(n.end).trim());o=r?r[0]:"",o=o.replace(/\n\n.+/,"")}return U.trackOmittedCharacters?.(n.omittedCharacters),{phrase:e.substring(n.start,n.end),position:{start:n.start,end:n.end},sentence:c,beforeText:a,afterText:o}}}();const M=e=>{const t=S.charCodeAt(0).toString(16),r=new RegExp(`^(?:[^\\S]|•|\\u${t})+$`),s=new RegExp(`^(?:[^\\S]|\\u${t})+$`),n=e.split("").reverse().join(""),i=Math.floor(e.length/2);let a,o,c=0,l=0;for(let t=0;t<i;t++){const i=e.charAt(t),u=n.charAt(t);if(!0!==a&&i.match(r)?(c+=1,a=!1):a=!0,!0!==o&&u.match(s)?(l+=1,o=!1):o=!0,a&&o)break}return[c,l]};function G(e,t){if(e===t)return null;let r=0;const s=Math.max(e.length,t.length);for(r=0;r<s&&e[r]===t[r];r++);let n=0;const i=Math.min(e.length,t.length);for(;r+n<i;){if(e[e.length-n-1]!==t[t.length-n-1])break;n++}return{from:r,oldFragment:e.substring(r,e.length-n),newFragment:t.substring(r,t.length-n)}}function F(e,t,r=!1){const s=[];r&&(e=re(e),t=re(t));const n=e.split("\n"),i=t.split("\n");let a=0;const o=Math.max(n.length,i.length);for(a=0;a<o&&n[a]===i[a];a++);let c=0;const l=Math.min(n.length,i.length);for(;a+c<l;){if(n[n.length-c-1]!==i[i.length-c-1])break;c++}let u=0;for(let e=0;e<a;e++)u+=n[e].length+1;let g=u;for(let e=a;e<o-c;e++){const t=e<n.length-c?n[e]:null,r=e<i.length-c?i[e]:null;t===r&&u===g||s.push({oldText:t,newText:r,oldOffset:u,newOffset:g,textDiff:G(t||"",r||"")}),null!==t&&(u+=t.length+1),null!==r&&(g+=r.length+1)}if(u!==g)for(let e=c-1;e>=0;e--){const t=n[n.length-e-1],r=i[i.length-e-1];s.push({oldText:t,newText:r,oldOffset:u,newOffset:g,textDiff:null}),u+=t.length+1,g+=r.length+1}return s}function B(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/`/g,"&#x60;").replace(/\//g,"&#x2F;")}function H(e,t){let r=0,s=e.length-1;for(;r<=s;){const n=r+Math.ceil((s-r)/2),i=t(e[n]);if(i>0)r=n+1;else{if(!(i<0)){for(let r=n;r>0;r--)if(0!==t(e[r-1]))return e[r];return e[0]}s=n-1}}return null}function W(e){const t=[];return e.forEach(e=>{-1===t.indexOf(e)&&t.push(e)}),t}function j(e){return null===e||"object"!=typeof e?e:e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e):Array.isArray(e)?Array.from(e):Object.assign({},e)}function $(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);const t=Array.isArray(e)?[]:{};for(const r in e)t[r]=$(e[r]);return t}let z=null;function X(e){return Intl.Segmenter?(z||(z=new Intl.Segmenter(void 0,{granularity:"grapheme"})),Array.from(z.segment(e),e=>e.segment)):[...e]}function V(){if("about:blank"===location.href||"about:srcdoc"===location.href)try{return(self.opener||self.parent).location.href}catch(e){}return location.href}function q(e,t=e){if(e.startsWith("about:blank"))return"blank";if(e.startsWith("about:srcdoc"))return"srcdoc";if(e.startsWith("file:"))return"file";e&&!/^([a-z\-]+:\/\/)/i.test(e)&&(e="http://"+e);try{return new URL(e).hostname}catch(e){return t}}function Y(e){return q(e).toLowerCase().trim().replace(/^www\./,"")}function K(e,t){const r=Y(t);return(e||[]).some(e=>{const t=Y(e);return t===r||r.endsWith("."+t)})}var Z;!function(e){e.GC="GC",e.GC_RECOMMENDATION="GC_RECOMMENDATION",e.REPHRASING="PPHR"}(Z||(Z={}));const Q=function(){const e=/^\w+\.$/;return(t,r)=>{if(!t.isSpellingError)return!1;let s=t.originalPhrase;if(e.test(s)&&(s=s.substring(0,s.length-1)),r.includes(s))return!0;if(function(e){const t=e.charAt(0);return t===t.toUpperCase()&&t!==t.toLowerCase()}(s)){const e=(n=s).charAt(0).toLowerCase()+n.substr(1);if(r.includes(e))return!0}var n;return!1}}();!function(){const e=/[\u0300-\u036f]/g,t=/\u0142/g,r=/\u00F8/g}();function J(e,t,r,s,n=!1){return n?e<=s&&t>=r:e<s&&t>r}function ee(e,t,r,s=!1){if(s){if(t<=e&&e<r)return 0}else if(t<=e&&e<=r)return 0;return e-t}async function te(e,t,r,s){if(t.signal)throw new Error("cannot fetchWithTimeout if 'signal' is already set");const n=s??new AbortController;t.signal=n.signal;const i=self.setTimeout(()=>{s?.signal.removeEventListener("abort",a),n.abort()},r),a=()=>{clearTimeout(i)};return s?.signal.addEventListener("abort",a),await fetch(e,t).finally(()=>{clearTimeout(i)})}const re=e=>{return(t=e,t.replace(b," ")).replace(/[\u00A0]/g," ").normalize();var t};
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class se{constructor(){this._eventHandlers=new Map}subscribe(e,t){this._eventHandlers.has(e)||this._eventHandlers.set(e,[]),this._eventHandlers.get(e).push(t)}unsubscribe(e,t){const r=this._eventHandlers.get(e)?.indexOf(t)??-1;r>-1&&(this._eventHandlers.get(e).splice(r,1),this._eventHandlers.get(e).length||this._eventHandlers.delete(e))}fire(e,t){const r=this._eventHandlers.get(e);r&&r.forEach(e=>{try{e(t)}catch(e){console.error(e)}})}destroy(){this._eventHandlers.clear()}}const ne="EDITOR_STATE_SYNC_ACK",ie="EDITOR_STATE_FORCE_SYNC",ae="EDITOR_SURROUNDING_CONTEXT_FORCE_SYNC";class oe{constructor(){this.sessions=new Map,this.editorToSession=new Map,this.uniqueIdentifierToSession=new Map,this.hostOrigin="",this.hostUrl="",this.ongoingReinitializationPromises=new Map,this.ongoingSessionCreationPromises=new Map}static getInstance(e){if(!oe.instance&&(oe.instance=new oe,e))try{const t=new URL(e);oe.instance.hostOrigin=t.origin,oe.instance.hostUrl=e}catch(t){console.warn("Invalid URL provided, using as-is:",e),oe.instance.hostOrigin=e}return oe.instance}setHostUrl(e){try{const t=new URL(e);this.hostOrigin=t.origin}catch(t){console.warn("Invalid URL provided, using as-is:",e),this.hostOrigin=e}}getHostUrl(){return this.hostOrigin}async createWritingSession(e,t){if(this.uniqueIdentifierToSession.has(t)){const r=this.uniqueIdentifierToSession.get(t),s=this.sessions.get(r);return s.editorIds.has(e)||(this.removeEditorFromSession(e),s.editorIds.add(e),this.editorToSession.set(e,s.sessionId)),s.sessionId}let r=this.ongoingSessionCreationPromises.get(t);if(r){const t=await r,s=this.sessions.get(t);s&&!s.editorIds.has(e)&&(this.removeEditorFromSession(e),s.editorIds.add(e),this.editorToSession.set(e,t))}else r=this.performSessionCreation(e,t).finally(()=>{this.ongoingSessionCreationPromises.delete(t)}),this.ongoingSessionCreationPromises.set(t,r);return r}joinSession(e,t){const r=this.sessions.get(t);if(r)return this.removeEditorFromSession(e),r.editorIds.add(e),this.editorToSession.set(e,t),r}removeEditorFromSession(e){const t=this.editorToSession.get(e);if(t){const r=this.sessions.get(t);if(r&&(r.editorIds.delete(e),0===r.editorIds.size)){this.sessions.delete(t);for(const[e,r]of this.uniqueIdentifierToSession.entries())if(r===t){this.uniqueIdentifierToSession.delete(e);break}}this.editorToSession.delete(e)}}updateSurroundingContent(e,t){const r=this.sessions.get(e);r&&(r.surroundingContent=t)}getSession(e){const t=this.editorToSession.get(e);if(t)return this.sessions.get(t)}getEditorsInSameSession(e){const t=this.getSession(e);return t?Array.from(t.editorIds):[]}getSessionById(e){return this.sessions.get(e)}async generateSessionId(e,t){return await ge.createWritingSession(t,e)}async reIntializeWritingSession(e){let t=this.ongoingReinitializationPromises.get(e);return t||(t=this.performReinitialization(e).finally(()=>{this.ongoingReinitializationPromises.delete(e)}),this.ongoingReinitializationPromises.set(e,t)),t}async performReinitialization(e){const t=this.findUniqueIdentifierFromWritingSession(e);if(t){return await ge.createWritingSession(this.hostUrl,t)}return console.error("No unique identifier found for sessionId:",e),""}async performSessionCreation(e,t){const r=await this.generateSessionId(t,this.hostUrl);if(!r)return"";const s={sessionId:r,editorIds:new Set([e]),surroundingContent:""};return this.removeEditorFromSession(e),this.sessions.set(r,s),this.uniqueIdentifierToSession.set(t,r),this.editorToSession.set(e,r),r}findUniqueIdentifierFromWritingSession(e){for(const[t,r]of this.uniqueIdentifierToSession)if(r===e)return t}}
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
const ce=n.get(e.EXTN_PREFIX);function le(e,t,r){const s=new CustomEvent(t,{detail:r,cancelable:!0});return e.dispatchEvent(s)}class ue{}ue.eventNames={sentenceRangesChecked:`${ce}-environmentAdapter.sentenceRangesChecked`,incrementalCheckResponseReceived:`${ce}-environmentAdapter.incrementalCheckResponseReceived`};const ge=class{static _onMessage(e){switch(!0){case"sentence-splitter-response"===e.command:{const{checkTimestamp:t,sentenceRangesCheckedText:r,sentenceRangesCheckResult:s,sentenceRanges:n}=e.payload;return this.updateSentenceRanges(r,s,t,n),Promise.resolve()}case"reintialize-writing-session"===e.command:{const{sessionId:t}=e.payload;return t?oe.getInstance(V()).reIntializeWritingSession(t):Promise.reject("writing session not found")}case e.command===ne:{const{payload:t}=e;return this.onEditorStateSyncAck(t),Promise.resolve()}case e.command===ie:{const{payload:t}=e;return this.onEditorStateForceSync(t),Promise.resolve()}case e.command===ae:{const{payload:t}=e;return this.onEditorSurroundingContextForceSync(t),Promise.resolve()}case"incremental-check-response"===e.command:{const{currentCheckedText:t,data:r,instanceId:s,paragraph:n,previousCheckedText:i}=e.payload;return this.incrementalCheck(s,r,t,i,n),Promise.resolve()}}}static init(e){this._instance?this._instance=e:(this._instance=e,this.addEventListener())}static onEditorStateForceSync(e){le(document,ie,e)}static onEditorSurroundingContextForceSync(e){le(document,ae,e)}static onEditorStateSyncAck(e){le(document,ne,e)}static isProductionEnvironment(){return this._instance.isProductionEnvironment()}static addEventListener(){return this._instance.addEventListener(e=>this._onMessage(e))}static isRuntimeConnected(){return this._instance.isRuntimeConnected()}static getVersion(){return this._instance.getVersion()}static getTrackingId(){return this._instance.getTrackingId()}static getPinnedState(){return this._instance.getPinnedState()}static shouldTrack(){return this._instance.shouldTrack()}static getType(){return this._instance.getType()}static getBeforeUnloadEventName(){return this._instance.getBeforeUnloadEventName()}static getURL(e){return this._instance.getURL(e)}static getUILanguageCode(){return this._instance.getUILanguageCode()}static openWindow(e){return this._instance.openWindow(e)}static canLoadContentScripts(e){return this._instance.canLoadContentScripts(e)}static loadContentScripts(e,t){return this._instance.loadContentScripts(e,t)}static loadStylesheets(e,t){return this._instance.loadStylesheets(e,t)}static injectShadowStyles(e){return this._instance.injectShadowStyles(e)}static initializeLTAssistant(e,t={}){return this._instance.initializeLTAssistant(e,t)}static getPreferredLanguages(){return this._instance.getPreferredLanguages()}static startDictionarySync(){return this._instance.startDictionarySync()}static addWordToDictionary(e){return this._instance.addWordToDictionary(e)}static addWordsToDictionary(e){return this._instance.addWordsToDictionary(e)}static removeWordFromDictionary(e){return this._instance.removeWordFromDictionary(e)}static clearDictionary(){return this._instance.clearDictionary()}static updateDictionary(){return this._instance.updateDictionary()}static updateSentenceRanges(e,t,r,s){this._instance.updateSentenceRanges(e,t,r,s)}static incrementalCheck(e,t,r,s,n){this._instance.incrementalCheck(e,t,r,s,n)}static injectExecutor(){return this._instance.injectExecutor()}static destroyExecutor(){return this._instance.destroyExecutor()}static executeScript(e,t){return this._instance.executeScript(e,t)}static linkInputAreaProperties(e){return this._instance.linkInputAreaProperties(e)}static ping(){return this._instance.ping()}static loadSynonyms(e,t,r){return this._instance.loadSynonyms(e,t,r)}static abortSynonymsRequest(){return this._instance.abortSynonymsRequest()}static loadPhrases(e,t,r,s,n,i){return this._instance.loadPhrases(e,t,r,s,n,i)}static initializeUserActivity(e){return this._instance.initializeUserActivity(e)}static sendUserActivityPings(e){return this._instance.sendUserActivityPings(e)}static updateUserActivityTextStatistics(e,t){return this._instance.updateUserActivityTextStatistics(e,t)}static updateUserActivityAppliedSuggestions(e,t,r){return this._instance.updateUserActivityAppliedSuggestions(e,t,r)}static updateUserActivityAppliedRewritings(e){return this._instance.updateUserActivityAppliedRewritings(e)}static updateUserActivityMeta(e,t){return this._instance.updateUserActivityMeta(e,t)}static sendUserActivity(e){return this._instance.sendUserActivity(e)}static destroyUserActivity(e){return this._instance.destroyUserActivity(e)}static abortPhraseRequests(e){return this._instance.abortPhraseRequests(e)}static abortTranslateRequest(e){this._instance.abortTranslateRequest(e)}static loadSplitSentence(e,t,r,s,n){return this._instance.loadSplitSentence(e,t,r,s,n)}static trackEvent(e,t){return this._instance.trackEvent(e,t)}static pageLoaded(e,t,r,s,n){return this._instance.pageLoaded(e,t,r,s,n)}static ltAssistantStatusChanged(e,t){return"number"==typeof e?this._instance.ltAssistantStatusChanged(e,t):this._instance.ltAssistantStatusChanged(e)}static check(e,t,r,s,n,i,a,o,c){return this._instance.check(e,t,r,s,n,i,a,o,c)}static createWritingSession(e,t){return this._instance.createWritingSession(e,t)}static fetchRecommendationForSentence(e){return this._instance.fetchRecommendationForSentence(e)}static unlockRecommendation(e){return this._instance.unlockRecommendation(e)}static translateText(e){return this._instance.translateText(e)}static isOptionsPageSupported(){return this._instance.isOptionsPageSupported()}static openOptionsPage(e,t){return this._instance.openOptionsPage(e,t)}static isFeedbackFormSupported(){return this._instance.isFeedbackFormSupported()}static openFeedbackForm(e,t,r){return this._instance.openFeedbackForm(e,t,r)}static openPremiumPage(e,t=0,r=0,s=0,n="",i){return this._instance.openPremiumPage(e,t,r,s,n,i)}static updateSurroundingTextContext(e){return this._instance.updateSurroundingTextContext(e)}static forceSyncEditorState(e){return this._instance.forceSyncEditorState(e)}static checkForPaidSubscription(){return this._instance.checkForPaidSubscription()}static canUseShadowDom(){return this._instance.canUseShadowDom()}static abortAllRequests(e){return this._instance.abortAllRequests(e)}static getTermsOfServiceInfo(e){return this._instance.getTermsOfServiceInfo(e)}static acceptTermsOfService(e){return this._instance.acceptTermsOfService(e)}static syncUserData(){return this._instance.syncUserData()}};var de,he=function(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})};
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
const me=n.get(e.EXTN_PREFIX);class pe{}pe.eventNames={localeChanged:`${me}-i18nManager.localeChanged`};const _e=(he(de=class{static init(e){this._instance=e}static addEventListener(e,t){this._instance.addEventListener(e,t)}static setLocale(e){this._instance.setLocale(e)}static getMessage(e,t){return this._instance.getMessage(e,t)}static getLanguageNameForCode(e){return this.getMessage(this._languageCodeToTranslationKeyMap[e])}},"i18nManager"),de._languageCodeToTranslationKeyMap={ar:"ar",ast:"ast","ast-es":"ast",be:"be","be-by":"be",br:"br","br-fr":"br",ca:"ca","ca-es":"ca","ca-es-valencia":"ca_ES_valencia","crh-ua":"crh","da-dk":"da_DK",de:"de","de-at":"de_AT","de-ch":"de_CH","de-de":"de_DE",el:"el","el-gr":"el",en:"en","en-au":"en_AU","en-ca":"en_CA","en-gb":"en_GB","en-nz":"en_NZ","en-us":"en_US","en-za":"en_ZA",eo:"eo",es:"es","es-es":"es",fa:"fa",ga:"ga","ga-ie":"ga",fr:"fr","fr-fr":"fr",gl:"gl","gl-es":"gl",it:"it",ja:"ja","ja-jp":"ja",km:"km","km-kh":"km",nl:"nl",no:"no",pl:"pl","pl-pl":"pl",pt:"pt","pt-ao":"pt_AO","pt-br":"pt_BR","pt-mz":"pt_MZ","pt-pt":"pt_PT",ro:"ro","ro-ro":"ro","ru-ru":"ru",sk:"sk","sk-sk":"sk",sl:"sl","sl-si":"sl",sv:"sv",ta:"ta","ta-in":"ta",tl:"tl","tl-ph":"tl",uk:"uk","uk-ua":"uk",zh:"zh","zh-cn":"zh"},de);
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class Ee{static get SUPPORTED_LANGUAGES(){return this._supportedLanguages||(this._supportedLanguages=n.get(e.SUPPORTED_LANGUAGES).map(e=>({code:e,name:_e.getLanguageNameForCode(e)})),this._supportedLanguages.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),this._isSubscribed||(_e.addEventListener(pe.eventNames.localeChanged,()=>this._supportedLanguages=null),this._isSubscribed=!0)),this._supportedLanguages}static isLanguageVariant(e){return e.code.includes("-")}static getPrimaryLanguageCode(e){return e.split("-")[0]}static formatLanguageCode(e){const t=e.split("-");return 1===t.length?t[0]:2===t.length?t[0]+"-"+t[1].toUpperCase():t[0]+"-"+t[1].toUpperCase()+"-"+t[2]}static getUserLanguageCode(){for(const e of navigator.languages){if(e.includes("-")&&e.startsWith(navigator.language))return e}return navigator.language}static getUserLanguageCodes(){const e=Array.from(navigator.languages,e=>this.getPrimaryLanguageCode(e).toLowerCase());try{e.push(this.getPrimaryLanguageCode(ge.getUILanguageCode()).toLowerCase())}catch(e){}return W(e)}static getPreferredLanguageVariant(e){const t={"en-in":"en-us","en-ie":"en-gb"},r=navigator.languages||[];for(let s of r){s=s.toLowerCase(),s=t[s]||s;for(const t of e){const e=t.toLowerCase();if(s.length>2&&s===e)return t}}return null}static getLanguagesForGeoIPCountry(){return new Promise(function(e,t){let r=!1;const s=self.setTimeout(()=>{r=!0,t(new Error("geoip timeout"))},15e3);fetch("https://languagetool.org/webextension/init",{method:"GET",mode:"cors",referrerPolicy:"no-referrer",headers:{Accept:"application/json"}}).then(e=>e.json()).then(t=>{if(!r){const r=(t.geoIpCountry||"").toUpperCase();e({geoIpLanguages:t.geoIpLanguages||[],geoIpCountry:r}),clearTimeout(s)}}).catch(e=>{console.error(e),r||(t(e),clearTimeout(s))})})}static getSynonymsRequestLanguage(e){let t=this.getPrimaryLanguageCode(e);return"de-ch"===e.toLowerCase()?t="de-CH":"pt-br"===e.toLowerCase()&&(t="pt-BR"),u.includes(t)?t:null}}Ee._supportedLanguages=null,Ee._isSubscribed=!1,Ee.ALL_LANGUAGES=[{code:"af",name:"Afrikaans"},{code:"ak",name:"Akan"},{code:"am",name:"አማርኛ"},{code:"an",name:"aragonés"},{code:"ar",name:"عربي"},{code:"as",name:"অসমীয়া"},{code:"ast",name:"Asturianu"},{code:"be",name:"Беларуская"},{code:"bg",name:"Български"},{code:"bm",name:"Bamanankan"},{code:"bn",name:"বাংলা"},{code:"br",name:"Brezhoneg"},{code:"bs",name:"босански"},{code:"ca",name:"Català"},{code:"cs",name:"čeština"},{code:"cy",name:"Cymraeg"},{code:"da",name:"Dansk"},{code:"de",name:"Deutsch"},{code:"el",name:"Ελληνικά"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"es",name:"Español"},{code:"et",name:"Eesti keel"},{code:"eu",name:"Euskara"},{code:"fa",name:"فارسی"},{code:"fi",name:"suomi"},{code:"fj",name:"Vosa vaka-Viti"},{code:"fr",name:"Français"},{code:"ga",name:"Gaeilge"},{code:"gd",name:"Gàidhlig"},{code:"gl",name:"Galego"},{code:"gn",name:"Avañe'ẽ"},{code:"gu",name:"ગુજરાતી"},{code:"ha",name:"هَرْشَن هَوْسَ‎"},{code:"he",name:"עברית"},{code:"hi",name:"हिन्दी"},{code:"hr",name:"hrvatski"},{code:"hu",name:"magyar"},{code:"hy",name:"Հայերեն"},{code:"ia",name:"Interlingua"},{code:"id",name:"Bahasa Indonesia"},{code:"ig",name:"Ásụ̀sụ̀ Ìgbò"},{code:"is",name:"íslenska"},{code:"it",name:"Italiano"},{code:"ja",name:"日本語"},{code:"kk",name:"Қазақ"},{code:"km",name:"ខ្មែរ"},{code:"kn",name:"ಕನ್ನಡ"},{code:"ko",name:"한국어"},{code:"ku",name:"Kurdî"},{code:"ks",name:"كشمیری"},{code:"la",name:"Latina"},{code:"lg",name:"Luganda"},{code:"lo",name:"ພາສາລາວ"},{code:"lt",name:"Lietuvių"},{code:"lv",name:"Latviešu"},{code:"mg",name:"malagasy"},{code:"mi",name:"Māori"},{code:"ml",name:"മലയാളം"},{code:"mk",name:"Македонски"},{code:"mn",name:"Монгол"},{code:"mr",name:"मराठी"},{code:"ms",name:"Melayu"},{code:"my",name:"မြန်မာဘာသာ"},{code:"nb",name:"Norsk bokmål"},{code:"ne",name:"नेपाली"},{code:"nn",name:"Norsk nynorsk"},{code:"no",name:"Norsk"},{code:"nl",name:"Nederlands"},{code:"nr",name:"isiNdebele"},{code:"oc",name:"Occitano"},{code:"or",name:"ଓଡ଼ିଆ"},{code:"pa",name:"ਪੰਜਾਬੀ"},{code:"pl",name:"Polski"},{code:"ps",name:"پښتو"},{code:"pt",name:"Português"},{code:"rm",name:"rumantsch"},{code:"ro",name:"românesc"},{code:"ru",name:"Русский"},{code:"rw",name:"Ikinyarwanda"},{code:"sa",name:"संस्कृत"},{code:"si",name:"සිංහල"},{code:"sk",name:"slovenčina"},{code:"sl",name:"Slovenščina"},{code:"so",name:"Soomaali"},{code:"sr",name:"Српски"},{code:"ss",name:"siSwati"},{code:"st",name:"Sesotho"},{code:"sv",name:"Svenska"},{code:"ta",name:"தமிழ்"},{code:"te",name:"తెలుగు"},{code:"th",name:"ภาษาไทย"},{code:"tl",name:"Tagalog"},{code:"fil",name:"Filipino"},{code:"tr",name:"Türkçe"},{code:"ts",name:"Xitsonga"},{code:"tt",name:"Tatarça"},{code:"uk",name:"Українська"},{code:"ur",name:"اُردو"},{code:"uz",name:"Oʻzbek tili"},{code:"ve",name:"Tshivenḓa"},{code:"vi",name:"Tiếng Việt"},{code:"yo",name:"عِدعِ يوْرُبا"},{code:"zh",name:"中文"},{code:"zu",name:"isiZulu"}],Ee.POPULAR_LANGUAGES=["de","en","es","fr","nl","pl","pt","ru","uk","zh","it","hi"];r(6326);const fe=["de","en","es","fr","nl","pt-br"],Se=(String.fromCharCode(32),String.fromCharCode(160),"\b\t          ‏　");new RegExp("^["+Se+"]$"),new RegExp("["+Se+"]","g");Intl.Segmenter&&new Intl.Segmenter(void 0,{granularity:"grapheme"});Error;const Ae="​‌‍­⁠‪‫‬‭";new RegExp("^["+Ae+"]$"),new RegExp("["+Ae+"]"),new RegExp("["+Ae+"]","g");const Te=e=>e.replace("_","-").toLocaleLowerCase(),Re=e=>fe.includes(String(e)),Ce=e=>{const t=String(e),r=Te(t),[s]=(e=>Te(e).split("-")[0])(t);switch(!0){case Re(r):return r;case Re(s):return s;default:return"en"}};const Ie=class{static init(e){this._instance=e}static getUiLanguage(){const t=n.get(e.LOLLIPOP_CONFIG).TOOLBOX_AVAILABLE_UI_LANGUAGES,r=Ce(ge.getUILanguageCode());return t.includes(r)?r:"en"}static getToolboxEnvironment(e){return this._instance.getToolboxEnvironment(e)}static getToolboxConfig(e){return this._instance.getToolboxConfig(e)}static preApplyToolboxResult(e){return this._instance.preApplyToolboxResult(e)}static canSeeLollipop(e){return this._instance.canSeeLollipop(e)}static isUsedForRephrasing(){return this._instance.isUsedForRephrasing()}static isPremiumParaphraseMode(e,t){return this._instance.isPremiumParaphraseMode(e,t)}static getParaphraserSkill(e){return this._instance.getParaphraserSkill(e)}static isParaphraserSentenceSkill(e){return this._instance.isParaphraserSentenceSkill(e)}},Pe=n.get(e.EXTN_PREFIX);class Le{static get DEFAULT_SETTINGS(){return null===this.DEFAULT_SETTINGS_CACHED&&(this.DEFAULT_SETTINGS_CACHED={apiServerUrl:i,autoCheck:!0,knownEmail:"",username:"",password:"",token:"",userId:null,motherTongue:"",geoIpLanguages:[],geoIpCountry:"",preferredLanguages:[],forcePreferredLanguages:!1,enVariant:Ee.getPreferredLanguageVariant(["en-US","en-GB","en-AU","en-CA","en-NZ","en-ZA"])||"en-US",deVariant:Ee.getPreferredLanguageVariant(["de-DE","de-AT","de-CH"])||"de-DE",ptVariant:Ee.getPreferredLanguageVariant(["pt-PT","pt-BR","pt-MZ","pt-AO"])||"pt-BR",caVariant:"ca-ES",dictionary:[],hasSynonymsEnabled:!1,hasPickyModeEnabledGlobally:!1,openCardHotkey:"",isDictionarySynced:!1,ignoredRules:[],disabledDomains:[],disabledEditorGroups:[],ignoreCheckOnDomains:[],disableRecommendationOnDomains:[],autoCheckOnDomains:[],remainingRephrasingsAmount:null,remainingRephrasingsDate:null,hasRephrasingEnabled:!0,hasContextMenuOptionEnabled:!0,hasLollipopEnabled:!1,lastMigration:null,translateLanguages:[]}),this.DEFAULT_SETTINGS_CACHED}static _combineObjects(e,t){const r=$(e);for(const e in r)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}static _dec2hex(e){return("0"+e.toString(16)).substr(-2)}static _generateUniqueId(){const e=new Uint8Array(8);return crypto.getRandomValues(e),Array.from(e,Le._dec2hex).join("")}static _isListContainsDomain(e,t){return K(e,t)}static getDefaultSettings(){return $(Le.DEFAULT_SETTINGS)}static getDefaultPrivacySettings(){return j(Le.DEFAULT_PRIVACY_SETTINGS)}constructor(){this._eventBus=new se,this._onReadyCallbacks=[]}addEventListener(e,t){this._eventBus.subscribe(e,t)}removeEventListener(e,t){this._eventBus.unsubscribe(e,t)}disableDomain(e){const t=Y(e),r=this.getSettings(),s="object"==typeof r.disabledDomains?r.disabledDomains:[];return s.push(t),this.updateSettings({disabledDomains:s})}enableDomain(e){const t=Y(e),r=this.getSettings();let s="object"==typeof r.disabledDomains?r.disabledDomains:[];return s=s.filter(e=>{const r=Y(e);return r!==t&&!t.endsWith("."+r)}),this.updateSettings({disabledDomains:s})}addToDomainSettings(e,t){const r=Y(e),s=this.getSettings()[t]||[];return s.push(r),this.updateSettings({[t]:W(s)})}removeFromDomainSettings(e,t){const r=Y(e);let s=this.getSettings()[t]||[];return s=s.filter(e=>{const t=Y(e);return t!==r&&!r.endsWith("."+t)}),this.updateSettings({[t]:s})}isInternalTester(){const e=this.getSettings();return this.getUIState().showRuleId||l.test(e.username)||"quillbotautomation+1@gmail.com"===e.username}disableEditorGroup(e,t){const r=Y(e),s=this.getSettings(),n="object"==typeof s.disabledEditorGroups?s.disabledEditorGroups:[];return n.push({domain:r,editorGroupId:t}),this.updateSettings({disabledEditorGroups:n})}enableEditorGroup(e,t){const r=Y(e),s=this.getSettings(),n="object"==typeof s.disabledEditorGroups?s.disabledEditorGroups:[],i=n.filter(e=>!(e.domain===r&&e.editorGroupId===t));return i.length!==n.length?this.updateSettings({disabledEditorGroups:i}):Promise.resolve()}enableDomainAndEditorGroup(e,t){return this.getCheckSettings(e,t).isEditorGroupDisabled&&this.enableEditorGroup(e,t),this.enableDomain(e)}grantUnlimitedRephrasings(){return this.updateSettings({remainingRephrasingsAmount:null,remainingRephrasingsDate:null})}restrictRephrasings(){const{remainingRephrasingsAmount:e,remainingRephrasingsDate:t}=this.getSettings();return this.updateSettings({remainingRephrasingsAmount:e??3,remainingRephrasingsDate:t||(new Date).toISOString()})}enablePaidSubscription(){return this.updateUIState({hasPaidSubscription:!0,hasPaidSubscriptionEnded:!1})}disablePaidSubscription(){const{hasPaidSubscription:e,hasPaidSubscriptionEnded:t}=this.getUIState();return this.updateUIState({hasPaidSubscription:!1,hasPaidSubscriptionEnded:t||!0===e})}isPremium(){return this.getUIState().hasPaidSubscription||Ne.isRunning()}getIgnoredRuleIds(){return this.getManagedSettings().disableIgnoredRules?[]:this.getSettings().ignoredRules.map(e=>e.id)}hasIgnoredRule(e){return this.getIgnoredRuleIds().includes(e)}addIgnoredRule(e){const{ignoredRules:t}=this.getSettings();this.hasIgnoredRule(e.id)||this.updateSettings({ignoredRules:[...t,e]})}async removeIgnoredRule(e){if(this.hasIgnoredRule(e)){const t=this.getSettings().ignoredRules.filter(t=>t.id!==e);await this.updateSettings({ignoredRules:t})}}hasRephrasingEnabled(){return!this.hasCustomServer()&&(!Ne.isFunctionalityLocked()&&(!!Ie.canSeeLollipop(this)||this.getSettings().hasRephrasingEnabled))}destroy(){this._eventBus.destroy(),this._onReadyCallbacks=[]}}Le.eventNames={settingsChanged:`${Pe}-storageController.settingsChanged`,userCredentialsChanged:`${Pe}-storageController.userCredentialsChanged`,configurationChanged:`${Pe}-storageController.configurationChanged`,privacySettingsChanged:`${Pe}-storageController.privacySettingsChanged`,uiStateChanged:`${Pe}-storageController.uiStateChanged`},Le.DEFAULT_SETTINGS_CACHED=null,Le.DEFAULT_MANAGED_SETTINGS={apiServerUrl:"",loginUrl:"",disablePrivacyConfirmation:!1,disablePersonalDictionary:!1,disableIgnoredRules:!1,disableOpenInEditor:!1,allowedURLs:[]},Le.DEFAULT_REMOTE_CONFIGURATION={unsupportedDomains:[]},Le.DEFAULT_PRIVACY_SETTINGS={allowRemoteCheck:!1,hasStatisticsCollectionEnabled:!0,hasMLDataCollectionEnabled:!1,acceptedTermsOfServiceVersion:null,lastTermsOfServiceModalShown:null,hasOptedIntoThirdPartyAiGrammarChecking:!0,hasOptedIntoThirdPartyAiParaphrasing:!0},Le.DEFAULT_STATISTICS={sessionCount:0,appliedSuggestions:0,appliedSynonyms:0,hiddenErrors:[],firstVisit:null,lastActivity:null,ratingValue:null,premiumClicks:0,lastPing:null,hasInstalledQBExtension:!1},Le.DEFAULT_UI_STATE={hasSeenPrivacyConfirmationDialog:!1,hasPaidSubscription:!1,hasPaidSubscriptionEnded:!1,hasRated:!1,hasUsedValidator:!1,hasSeenOnboarding:!1,hasSeenNewGoogleDocsTeaser:!1,hasSeenNewGoogleSlidesTeaser:!1,hasSeenGoogleDocsMenuBarHint:!1,lastChangelogNov2024Seen:null,changelogNov2024CountdownEnd:null,changelogNov2024Coupon:null,showRuleId:!1,dialogPosition:"default",countMode:"characters",hasSeenTurnOnMessagePopup:!1,isDarkModeEnabled:!1,skipFixAllConfirmation:!1,skipFixAllOverLimitConfirmation:!1,hasClickedLollipop:!1},Le.DEFAULT_TEST_FLAGS={testGroups:{},experiments:{}},Le.DEFAULT_TRIAL_SETTINGS={isTrialSupportedInCountry:!1,trialToken:null,trialStartedAt:null,lastTrialTokenAttempt:null,trialUserType:null,hasSeenTrialPage:!1},Le.DEFAULT_COPY_PASTE_INFO={copiedText:"",copiedAt:null,copiedFrom:null};class be{static init(e){this._instanceCtor=e}static create(){return this._instanceCtor()}}class Ne{static init(){this._storageController=this._storageController||be.create()}static isEligible(){if(!n.get(e.SUPPORTS_TRIAL))return!1;if("extension"!==ge.getType())return!1;if(navigator.webdriver)return!1;if(!R.isChromium()&&!R.isFirefox())return!1;if((this._storageController.hasCustomLogin()||this._storageController.hasCustomServer())&&!this._storageController.isInternalTester())return!1;const{hasPaidSubscription:t,hasPaidSubscriptionEnded:r}=this._storageController.getUIState();if(t||r)return!1;if(!this._storageController.getTrialSettings().isTrialSupportedInCountry)return!1;if(!this._storageController.getPrivacySettings().allowRemoteCheck)return!1;const{username:s}=this._storageController.getSettings();return!s||!T.test(s)}static isRunning(){if(!this.isEligible())return!1;const{trialStartedAt:e}=this._storageController.getTrialSettings();return!!e&&e+A>=Date.now()}static getStartDate(){const{trialStartedAt:e}=this._storageController.getTrialSettings();return e?new Date(e):null}static getEndDate(){const{trialStartedAt:e}=this._storageController.getTrialSettings();return e?new Date(e+A):null}static hasEnded(){const{trialStartedAt:e}=this._storageController.getTrialSettings();return!!e&&e+A<Date.now()}static isFunctionalityLocked(){return this.isEligible()&&this.hasEnded()}static hasUpgraded(){const{trialStartedAt:e}=this._storageController.getTrialSettings(),{hasPaidSubscription:t}=this._storageController.getUIState();return Boolean(e&&t)}static canStart(){return this.isEligible()&&!this._storageController.getTrialSettings().trialStartedAt}static getRemainingDays(){if(!this.isRunning())return null;const e=this.getEndDate();if(!e)return null;const t=new Date;return(e.getTime()-t.getTime())/1e3/60/60/24}static start(e){return this.canStart()?this._storageController.updateTrialSettings({trialUserType:e,trialStartedAt:Date.now()}):Promise.reject("Cannot start, isEligible:"+this.isEligible()+" isRunning:"+this.isRunning())}static getCoupon(){if(!this.isRunning()&&!this.isFunctionalityLocked())return null;const e=this.getEndDate();if(!e)return null;if((new Date).getTime()-e.getTime()>2592e6)return null;const t=this._storageController.getActiveCoupon();return t&&t.percent>20?t:{code:"TRIAL",percent:20}}static getToken(){return this._storageController.getTrialSettings().trialToken?.jwt||null}static getStatus(){return this.hasUpgraded()?"upgraded":this.isRunning()?"started":this.hasEnded()?"ended":this.isEligible()?"eligible":"ineligible"}static getUserType(){const{trialUserType:e}=this._storageController.getTrialSettings();return e}}class Oe{static merge(e,t=!1,r=!1,s=!1){let{errors:n,pickyErrors:i,premiumErrors:a,premiumPickyErrors:o,sentenceRanges:c=[],recommendationErrors:l=[]}=this.filterAndMigrateErrors(e.existing.errors,e.existing.pickyErrors,e.existing.premiumErrors,e.existing.premiumPickyErrors,e.existing.recommendationErrors,e.existing.sentenceRanges,e.existingCheckedText,e.newCheckedText,e.existingRecommendationCheckedText,e.newRecommendationCheckedText,r,s);this.mergeParagraphLevelErrors(n,i,a,o,l,c,e.new.paragraphLevel.errors,e.new.paragraphLevel.pickyErrors,e.new.paragraphLevel.premiumErrors,e.new.paragraphLevel.premiumPickyErrors,e.new.paragraphLevel.recommendationErrors||[],e.new.paragraphLevel.sentenceRanges),this.mergeTextLevelErrors(n,i,a,o,e.new.textLevel.errors,e.new.textLevel.pickyErrors,e.new.textLevel.premiumErrors,e.new.textLevel.premiumPickyErrors);const u=this.getDuplicateErrors(e.existing,e.existingCheckedText,e.newCheckedText,e.existingRecommendationCheckedText,e.newRecommendationCheckedText);return this.sortErrors(n,i,a,o,l),this.setIdsOnErrors(n,i,a,o,l,u),n=this.migrateOffsetsToOriginalText(n,e.newCheckedText.usedParts),i=this.migrateOffsetsToOriginalText(i,e.newCheckedText.usedParts),a=this.migrateOffsetsToOriginalText(a,e.newCheckedText.usedParts),o=this.migrateOffsetsToOriginalText(o,e.newCheckedText.usedParts),l=this.migrateOffsetsToOriginalText(l,e.newRecommendationCheckedText.usedParts),c=this.migrateOffsetsToOriginalText(c,e.newCheckedText.usedParts),t&&(i=i.filter(e=>!m.includes(e.rule.id)),i.forEach(e=>{e.rule.id="HIDDEN_RULE",e.fixes=[]}),a=[...a,...o,...i],o=[],i=[],this.sortErrorsByOffset(a)),{errors:n,pickyErrors:i,premiumErrors:a,premiumPickyErrors:o,recommendationErrors:l,sentenceRanges:c}}static getDuplicateErrors(e,t,r,s,n){let{errors:i,pickyErrors:a,premiumErrors:o,premiumPickyErrors:c,recommendationErrors:l=[]}=e;i=this.migrateOffsetsToValuableText(i,t.usedParts),a=this.migrateOffsetsToValuableText(a,t.usedParts),o=this.migrateOffsetsToValuableText(o,t.usedParts),c=this.migrateOffsetsToValuableText(c,t.usedParts),l=this.migrateOffsetsToValuableText(l,s.usedParts);const u=F(t.text,r.text),g=F(s.text,n.text),d=(e,t)=>{if(!e.isParagraphLevelCheck)return!0;const r=H(t,t=>{const r=t.oldOffset;if(null===t.oldText)return e.start>=r?1:-1;const s=t.oldOffset+t.oldText.length+1;return ee(e.start,r,s,!0)});return!(!r||!r.textDiff)||void 0};return i=i.filter(e=>d(e,u)),a=a.filter(e=>d(e,u)),o=o.filter(e=>d(e,u)),c=c.filter(e=>d(e,u)),l=l.filter(e=>d(e,g)),i=this.migrateOffsetsBetweenTexts(i,u),a=this.migrateOffsetsBetweenTexts(a,u),o=this.migrateOffsetsBetweenTexts(o,u),c=this.migrateOffsetsBetweenTexts(c,u),l=this.migrateOffsetsBetweenTexts(l,g),{errors:i,pickyErrors:a,premiumErrors:o,premiumPickyErrors:c,recommendationErrors:l}}static migrateOffsetsToValuableText(e,t){const r=[];for(const s of e){const e=H(t,e=>ee(s.start,e.originalStart,e.originalEnd,!0)),n=H(t,e=>ee(s.end,e.originalStart,e.originalEnd));if(!e||!n)continue;const i=$(s);i.start-=e.posDiff,i.end-=n.posDiff,i.length=i.end-i.start,r.push(i)}return r}static migrateOffsetsBetweenTexts(e,t,r,s,n,i){let a,o=!1,c=!1,l=!1;"string"==typeof t&&"string"==typeof r?(a=F(t,r),o="boolean"==typeof s&&s,c="boolean"==typeof n&&n,l="boolean"==typeof i&&i):(a=t,o="boolean"==typeof r&&r,c="boolean"==typeof s&&s,l="boolean"==typeof n&&n);const u=[];for(const t of e){const e=H(a,e=>{const r=e.oldOffset;if(null===e.oldText)return t.start>=r?1:-1;const s=e.oldOffset+e.oldText.length+1;return ee(t.start,r,s,!0)}),r=$(t);if(e){if(e.textDiff){if(o)continue;{const t=e.oldOffset+e.textDiff.from,s=t+e.textDiff.oldFragment.length,n=!c;if(J(t,s,r.start,r.end,n)){if(l){if(r.start>t&&r.end<s)continue;const n=e.textDiff.newFragment.length-e.textDiff.oldFragment.length;r.start>t&&(r.start=r.start+n),r.end>=t&&(r.end=r.end+n),r.length=r.end-r.start,r?.rule?.phraseDiff?.forEach(r=>{const s=e.textDiff.newFragment.length-e.textDiff.oldFragment.length;r.sourceStart>t&&(r.sourceStart+=s),r.sourceEnd>t&&(r.sourceEnd+=s)}),u.push(r)}continue}if(r.start>=s){const t=e.textDiff.newFragment.length-e.textDiff.oldFragment.length;r.start+=t,r.end+=t,r?.rule?.phraseDiff?.forEach(e=>{e.sourceStart+=t,e.sourceEnd+=t,e.targetEnd+=t,e.targetStart+=t})}}}r.start+=e.newOffset-e.oldOffset,r.end=r.start+r.length,r?.rule?.phraseDiff?.forEach(t=>{const r=t.sourceEnd-t.sourceStart,s=t.targetEnd-t.targetStart;t.sourceStart+=e.newOffset-e.oldOffset,t.sourceEnd=t.sourceStart+r,t.targetStart+=e.newOffset-e.oldOffset,t.targetEnd=t.targetStart+s})}u.push(r)}return u}static migrateOffsetsToOriginalText(e,t){const r=[];for(const s of e){const e=H(t,e=>ee(s.start,e.start,e.end,!0)),n=H(t,e=>ee(s.end,e.start,e.end));if(!e||!n)continue;const i=$(s);i.start+=e.posDiff,i.end+=n.posDiff,i.length=i.end-i.start,r.push(i)}return r}static filterAndMigrateErrors(e,t,r,s,n,i,a,o,c,l,u=!1,g=!1){g?n=(n||[]).filter(e=>e.isParagraphLevelCheck):(e=e.filter(e=>e.isParagraphLevelCheck),t=t.filter(e=>e.isParagraphLevelCheck),r=r.filter(e=>e.isParagraphLevelCheck),s=s.filter(e=>e.isParagraphLevelCheck)),e=this.migrateOffsetsToValuableText(e,a.usedParts),t=this.migrateOffsetsToValuableText(t,a.usedParts),r=this.migrateOffsetsToValuableText(r,a.usedParts),s=this.migrateOffsetsToValuableText(s,a.usedParts),n=this.migrateOffsetsToValuableText(n||[],c.usedParts),i=this.migrateOffsetsToValuableText(i||[],a.usedParts);const d=F(a.text,o.text),h=F(c.text,l.text);return u?(e=this.migrateOffsetsBetweenTexts(e,a.text,o.text,!1,!0),t=this.migrateOffsetsBetweenTexts(t,a.text,o.text),r=this.migrateOffsetsBetweenTexts(r,a.text,o.text),s=this.migrateOffsetsBetweenTexts(s,a.text,o.text),n=this.migrateOffsetsBetweenTexts(n,c.text,l.text,!1,!0),i=this.migrateOffsetsBetweenTexts(i,a.text,o.text,!1,!0,!0)):(e=this.migrateOffsetsBetweenTexts(e,d,!0),t=this.migrateOffsetsBetweenTexts(t,d,!0),r=this.migrateOffsetsBetweenTexts(r,d,!0),s=this.migrateOffsetsBetweenTexts(s,d,!0),n=this.migrateOffsetsBetweenTexts(n,h,!1,!1),i=this.migrateOffsetsBetweenTexts(i,d,!0)),{errors:e,pickyErrors:t,premiumErrors:r,premiumPickyErrors:s,recommendationErrors:n,sentenceRanges:i}}static mergeParagraphLevelErrors(e,t,r,s,n,i,a,o,c,l,u,g=[]){e.push(...a),t.push(...o),r.push(...c),s.push(...l),n.push(...u),i.push(...g)}static mergeTextLevelErrors(e,t,r,s,n,i,a,o){for(const t of n)e.some(e=>e.start===t.start&&e.end===t.end)||e.push(t);for(const e of i)t.some(t=>t.start===e.start&&t.end===e.end)||t.push(e);for(const e of a)r.some(t=>t.start===e.start&&t.end===e.end)||r.push(e);for(const e of o)s.some(t=>t.start===e.start&&t.end===e.end)||s.push(e)}static sortErrors(e,t,r,s,n){this.sortErrorsByOffset(e),this.sortErrorsByOffset(t),this.sortErrorsByOffset(r),this.sortErrorsByOffset(s),this.sortErrorsByOffset(n)}static sortErrorsByOffset(e){e.sort((e,t)=>e.start===t.start?e.isParagraphLevelCheck?1:-1:e.start>t.start?1:-1)}static migrateErrorsBetweenSameOriginalTexts(e,t,r){const s=[];for(const n of e){let e=n.start,i=n.end,a=H(t.usedParts,t=>ee(e,t.originalStart,t.originalEnd,!0)),o=H(t.usedParts,e=>ee(i,e.originalStart,e.originalEnd));if(!a||!o)continue;if(e-=a.posDiff,i-=o.posDiff,a=H(r.usedParts,t=>ee(e,t.start,t.end,!0)),o=H(r.usedParts,e=>ee(i,e.start,e.end)),!a||!o)continue;e+=a.posDiff,i+=o.posDiff;const c=$(n);c.start=e,c.end=i,c.length=i-e,s.push(c)}return s}static setIdsOnErrors(e,t,r,s,n,i){function a(e,t){if(e.id)return;const r=t.find(t=>{return s=e,(r=t).start===s.start&&r.end===s.end&&r.isParagraphLevelCheck===s.isParagraphLevelCheck;var r,s});e.id=r?r.id:"error:"+ ++Oe.INCREMENTAL_ID}e.forEach(e=>a(e,i.errors)),t.forEach(e=>a(e,i.pickyErrors)),r.forEach(e=>a(e,i.premiumErrors)),s.forEach(e=>a(e,i.premiumPickyErrors)),n.forEach(e=>a(e,i.recommendationErrors||[]))}static sortSentenceRanges(e){e.sort(({start:e},{start:t})=>e-t)}}Oe.INCREMENTAL_ID=0;
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class ye{constructor(e=document){this._window=e.defaultView,this._document=e,this.clearCache()}_getElementCache(e){let t=this._elementCache.get(e);return t||(t={},this._elementCache.set(e,t)),t}_consolidateSVGTransformMatrix(e){const t={a:1,b:0,c:0,d:1,e:0,f:0};for(let r=0;r<e.transform.baseVal.length;r++){const s=e.transform.baseVal[r];1===s.type?(t.a=s.matrix.a,t.b=s.matrix.b,t.c=s.matrix.c,t.d=s.matrix.d,t.e=s.matrix.e,t.f=s.matrix.f):2===s.type?(t.e=s.matrix.e,t.f=s.matrix.f):3===s.type?(t.a=s.matrix.a,t.d=s.matrix.d):5===s.type?t.b=s.matrix.b:6===s.type&&(t.c=s.matrix.c)}return t}clearCache(){this._documentVisibleBox=null,this._documentGap=null,this._documentScroll=null,this._elementCache=new WeakMap}_contains(e,t){return e&&e!==t&&function(e,t){let r=t;for(;r&&r.parentNode;){if(r===e||r.parentNode===e)return!0;r=r.parentNode instanceof DocumentFragment?r.parentNode.host:r.parentNode}return!1}(e,t)}contains(e,t){return this._contains(e,t)}_getComputedStyle(e,t,r){let s,n;return"object"==typeof t?(s=t,n=""):(s=r,n=t),s.computedStyle||(s.computedStyle=new Map),s.computedStyle.has(n)||s.computedStyle.set(n,this._window.getComputedStyle(e,n||null)),s.computedStyle.get(n)}getComputedStyle(e,t=""){return this._getComputedStyle(e,t,this._getElementCache(e))}_getComputedStyleMap(e,t){return e.computedStyleMap?(t.computedStyleMap||(t.computedStyleMap=e.computedStyleMap()),t.computedStyleMap):null}getComputedStyleMap(e){return this._getComputedStyleMap(e,this._getElementCache(e))}getInlineStyle(e,t){return e.style instanceof CSSStyleDeclaration?e.style.getPropertyValue(t):""}getStyle(e,t,r){let s,n;return"string"==typeof r?(s=t,n=r):(s="",n=t),this.getStyles(e,s,[n])[n]}getStyles(e,t,r){const s="string"==typeof t?t:"",n=this._getElementCache(e),i=this._getComputedStyle(e,s,n);let a=null;if(Array.isArray(t))a=t;else if(Array.isArray(r))a=r;else{a=[];for(let e=0;e<i.length;e++)a.push(i[e])}const o={};for(const t of a)if("line-height"===t||"lineHeight"===t){const r=this.getInlineStyle(e,t);r&&r.includes("px")?o[t]=r:o[t]=i[t]||""}else if("font"!==t||i[t])if("transform"===t&&e instanceof SVGGElement&&R.isSafari()&&e.hasAttribute("transform")){const r=this._consolidateSVGTransformMatrix(e);o[t]=`matrix(${r.a}, ${r.b}, ${r.c}, ${r.d}, ${r.e}, ${r.f})`}else o[t]="zoom"===t?i[t]||"1":i[t]||"";else{const r=i["font-style"],s=i["font-variant"],n=i["font-weight"],a=i["font-size"],c=this.getInlineStyle(e,"line-height")||i["line-height"]||"",l=i["font-family"];o[t]=`${r} ${s} ${n} ${a} ${c?"/ "+c:""} ${l}`}return o}getExactStyle(e,t){return this.getExactStyles(e,[t])[t]}getExactStyles(e,t){function r(e){return"number"==typeof e.value&&"string"==typeof e.unit}const s=this._getElementCache(e),n=this._getComputedStyleMap(e,s);if(n){const e={};for(const s of t){const t=n.get(s);t?r(t)?"number"===t.unit?e[s]=t.value.toString():e[s]=t.value+t.unit:e[s]=t.toString():e[s]=""}return e}return this.getStyles(e,t)}setStyle(e,t,r,s=!1){Array.isArray(e)||(e=[e]);const n={[t]:r};this.setStyles(e,n,s)}setStyles(e,t,r=!1){Array.isArray(e)||(e=[e]);for(const s of e)for(const e in t){let n=t[e].trim();const i=r||ye.IMPORTANT_REG_EXP.test(n);n=n.replace(ye.IMPORTANT_REG_EXP,""),s.style.setProperty(e,n,i?"important":"")}}copyStyles(e,t,r,s=!1){const n=this.getStyles(e,r);this.setStyles(t,n,s)}resetStyles(e,t,r=!1){Array.isArray(e)||(e=[e]);let s="";for(const e in t){let n=t[e].trim();r&&!ye.IMPORTANT_REG_EXP.test(n)&&(n+=" !important"),s+=`${e}: ${n};`}for(const t of e)t.style.cssText=s}removeStyle(e,t){Array.isArray(e)||(e=[e]),this.removeStyles(e,[t])}removeStyles(e,t){Array.isArray(e)||(e=[e]);for(const r of e)for(const e of t)r.style.removeProperty(e)}getBoundingClientRect(e){return this._getBoundingClientRect(e,this._getElementCache(e))}_getBoundingClientRect(e,t){return t.boundingClientRect||(t.boundingClientRect=$(e.getBoundingClientRect())),t.boundingClientRect}getRelativeClientRect(e,t){const r=this._getBoundingClientRect(e,this._getElementCache(e)),s=this._getBoundingClientRect(t,this._getElementCache(t)),n=r.top-s.top,i=r.left-s.left,a=r.width,o=r.height;return{top:n,right:i+a,bottom:n+o,left:i,width:a,height:o}}_getBorderBox(e,t,r,s){const n="borderBox"+(t?"WithScroll":"")+(r?"WithScale":"");if(!s[n]){const i=this._getBoundingClientRect(e,s);let{top:a,left:o,width:c,height:l}=i;if(r){const t=this.getZoom(e);a*=t,o*=t,c*=t,l*=t}else{const t=this._getScaleFactor(e,s);c/=t.x,l/=t.y}if(t){const t=this.getDocumentScroll();if(a+=t.top,o+=t.left,this._document.body&&this._contains(this._document.body,e)){const e=this.getDocumentGap();a-=e.top,o-=e.left}}s[n]={top:a,right:o+c,bottom:a+l,left:o,width:c,height:l}}return s[n]}getBorderBox(e,t=!0,r=!0){return this._getBorderBox(e,t,r,this._getElementCache(e))}_getPaddingBox(e,t,r,s){const n="paddingBox"+(t?"WithScroll":"")+(r?"WithScale":"");if(!s[n]){let{top:i,left:a,width:o,height:c}=this._getBorderBox(e,t,r,s),l={x:1,y:1};r&&(l=this._getScaleFactor(e,s));const u=r?this._getZoom(e,s):1,g=this._getComputedStyle(e,s),d=(parseFloat(g["border-top-width"])||0)*l.y*u,h=(parseFloat(g["border-right-width"])||0)*l.x*u,m=(parseFloat(g["border-bottom-width"])||0)*l.y*u,p=(parseFloat(g["border-left-width"])||0)*l.x*u;let _=0,E=0;if("BackCompat"!==this._document.compatMode||e!==this._document.body||e!==this._document.scrollingElement){let{width:t,height:r}=this._getClientWidthAndHeight(e,s);t=t*l.x*u,r=r*l.y*u;let n=o;n%1>0&&"offsetWidth"in e&&(n=e.offsetWidth*l.x*u);let i=c;i%1>0&&"offsetHeight"in e&&(i=e.offsetHeight*l.y*u),_=n-p-t-h,E=i-d-r-m,_<1&&(_=0),E<1&&(E=0)}i+=d,a+=p,o=o-p-_-h,c=c-d-E-m,this._isRTL(e,s)&&(a+=_),s[n]={top:i,right:a+o,bottom:i+c,left:a,width:o,height:c,border:{top:d,right:h,bottom:m,left:p}}}return s[n]}getPaddingBox(e,t=!0,r=!0){return this._getPaddingBox(e,t,r,this._getElementCache(e))}_getContentBox(e,t,r,s){const n="contentBox"+(t?"WithScroll":"")+(r?"WithScale":"");if(!s[n]){let{top:i,left:a,width:o,height:c,border:l}=this._getPaddingBox(e,t,r,s),u={x:1,y:1};r&&(u=this._getScaleFactor(e,s));const g=r?this._getZoom(e,s):1,d=this._getComputedStyle(e,s),h=(parseFloat(d["padding-top"])||0)*u.y*g,m=(parseFloat(d["padding-right"])||0)*u.x*g,p=(parseFloat(d["padding-bottom"])||0)*u.y*g,_=(parseFloat(d["padding-left"])||0)*u.x*g;i+=h,a+=_,o=o-_-m,c=c-h-p,s[n]={top:i,right:a+o,bottom:i+c,left:a,width:o,height:c,border:l,padding:{top:h,right:m,bottom:p,left:_}}}return s[n]}getContentBox(e,t=!0,r=!0){return this._getContentBox(e,t,r,this._getElementCache(e))}_getClientWidthAndHeight(e,t){let r=e.clientWidth,s=e.clientHeight;if(0===r&&0===s&&"offsetWidth"in e){const n=this._getComputedStyle(e,t);"inline"===n.display&&(r=e.offsetWidth-parseInt(n["border-left-width"])-parseInt(n["border-right-width"]),s=e.offsetHeight-parseInt(n["border-top-width"])-parseInt(n["border-bottom-width"]))}return{width:r,height:s}}_getScrollDimensions(e,t,r){const s="scrollDimensions"+(t?"WithScale":"");if(!r[s]){let n=e.scrollWidth,i=e.scrollHeight;if(0===n&&(0===i||0===e.clientHeight)){const t=this._getClientWidthAndHeight(e,r);n=t.width,i=t.height}if(t){const t=this._getScaleFactor(e,r),s=this._getZoom(e,r);n=n*t.x*s,i=i*t.y*s}r[s]={width:n,height:i}}return r[s]}getScrollDimensions(e,t=!0){return this._getScrollDimensions(e,t,this._getElementCache(e))}_getScrollPosition(e,t,r,s){const n="scrollPosition"+(t?"WithScale":"")+(r?"WithZoom":"");if(!s[n]){let i={x:1,y:1};t&&(i=this._getScaleFactor(e,s));const a=r?this._getZoom(e,s):1,o=e===this._document.body&&"BackCompat"===this._document.compatMode,c=o?0:e.scrollTop*i.y*a,l=o?0:e.scrollLeft*i.x*a;s[n]={top:c,left:l}}return s[n]}getScrollPosition(e,t=!0,r=t){return this._getScrollPosition(e,t,r,this._getElementCache(e))}_isPositionFixed(e,t){if(void 0===t.isPositionFixed){t.isPositionFixed=!1;let r=e;for(;r;){if("fixed"===this.getStyle(r,"position")){t.isPositionFixed=!0;break}r=r.parentElement}}return t.isPositionFixed}isPositionFixed(e){return this._isPositionFixed(e,this._getElementCache(e))}_getContainingBlock(e,t,r){const s="absolute"===t,n=s?"containingBlockForAbsolutePosition":"containingBlockForFixedPosition";let i=r[n];if(void 0===i){i=null;const t=[document.documentElement,document.body],r=["layout","paint","strict","content"],n=["transform","perspective"];let a=e;for(;a&&!t.includes(a);){const e=this.getStyles(a,["position","transform","perspective","will-change","filter","contain","container-type","backdrop-filter"]);if(s&&"static"!==e.position||"none"!==e.transform||"none"!==e.perspective||"none"!==e.filter||r.includes(e.contain)||n.includes(e["will-change"])||"normal"!==e["container-type"]||"none"!==e["backdrop-filter"]&&""!==e["backdrop-filter"]||R.isFirefox()&&"filter"===e["will-change"]){i=this.getPaddingBox(a);break}a=a.parentElement}}return r[n]=i,i}getContainingBlock(e,t="absolute"){return this._getContainingBlock(e,t,this._getElementCache(e))}getScaleFactor(e){return this._getScaleFactor(e,this._getElementCache(e))}_getScaleFactor(e,t){if(void 0===t.scaleFactor){if(e instanceof SVGElement){let t=1;const r=e.getAttribute("transform")||"",s=/scale\((\d+(\.\d+)?)\)/.exec(r);return s&&(t=+s[1]),{x:t,y:t}}{const r=this._getBoundingClientRect(e,t),s=e.offsetWidth,n=e.offsetHeight;t.scaleFactor={x:1,y:1},r.width>0&&s>0&&Math.abs(r.width-s)>1&&(t.scaleFactor.x=r.width/s),r.height>0&&n>0&&Math.abs(r.height-n)>1&&(t.scaleFactor.y=r.height/n)}}return t.scaleFactor}_getZoom(e,t){if(R.isFirefox()||R.isThunderbird())return 1;if("number"!=typeof t.zoom){let r=1,s=e;for(;s&&s!==this._document.documentElement;){r*=+this.getStyle(s,"zoom"),s=s.parentNode instanceof ShadowRoot&&s.parentNode.host instanceof HTMLElement?s.parentNode.host:s.parentElement}t.zoom=r}return t.zoom}getZoom(e){return this._getZoom(e,this._getElementCache(e))}_getStackingContextWithZIndex(e){const t=this.getComputedStyle(e),r=parseInt(t.zIndex||"");if(isNaN(r))return null;if(t.position&&ye.NON_STATIC_POSITIONS.indexOf(t.position)>-1)return{zIndex:r};if(e.parentElement){const t=this.getComputedStyle(e.parentElement);if("flex"===t.display||"grid"===t.display)return{zIndex:r}}return null}getZIndex(e,t=this._document.documentElement){let r="auto",s=e;if(!s.ownerDocument)return"auto";const n=s.ownerDocument.defaultView;if(!n)throw new Error("Failed to retrieve the current element's window object.");const{Element:i,ShadowRoot:a}=n;for(;s&&s!==this._document&&s!==t&&s instanceof i;){const e=this._getStackingContextWithZIndex(s);e&&(r=e.zIndex),s=s.parentNode instanceof a?s.parentNode.host:s.parentElement}return r}_isRTL(e,t){return"boolean"!=typeof t.isRTL&&(t.isRTL="rtl"===this.getStyle(e,"direction")),t.isRTL}isRTL(e){return this._isRTL(e,this._getElementCache(e))}isStackingContext(e){const t=this.getComputedStyle(e);return!!(t.position&&ye.NON_STATIC_POSITIONS.indexOf(t.position)>-1)||("none"!==t.transform||"none"!==t.filter||"none"!==t.clipPath||"none"!==t.perspective||Number(t.opacity)<1)}_getTextClientRects(e){const t=this._document.createRange();return t.setStart(e.node,e.start),t.setEnd(e.node,e.end),Array.from(t.getClientRects())}getTextBoundingBoxes(e,t,r=!0){Array.isArray(e)||(e=[e]);const s=[];let n=0,i=0;if(r){const e=this.getDocumentScroll();if(n+=e.top,i+=e.left,this._document.body&&this._contains(this._document.body,t)){const e=this.getDocumentGap();n-=e.top,i-=e.left}}for(const t of e)try{const e=this._getTextClientRects(t);for(const t of e){if(t.width<ye.MIN_TEXT_BOX_WIDTH)continue;const e=s[s.length-1],r=t.top+n,a=t.right+i,o=t.bottom+n,c=t.left+i,l=t.width,u=t.height;e&&e.right===c&&e.top===r&&e.bottom===o&&e.height===u?(e.right=a,e.width=e.width+l):s.push({top:r,right:a,bottom:o,left:c,width:l,height:u})}}catch(e){}return s}getRelativeTextBoundingBoxes(e,t,r=this.getScrollPosition(t)){Array.isArray(e)||(e=[e]);const s=[],n=this.getPaddingBox(t,!1,!1),i=n.left-r.left,a=n.top-r.top;for(const t of e)try{const e=this._getTextClientRects(t);for(const t of e){if(t.width<ye.MIN_TEXT_BOX_WIDTH)continue;const e=s[s.length-1],r=t.top-a,n=t.right-i,o=t.bottom-a,c=t.left-i,l=t.width,u=t.height;e&&e.right===c&&e.top===r&&e.bottom===o&&e.height===u?(e.right=n,e.width=e.width+l):s.push({top:r,right:n,bottom:o,left:c,width:l,height:u})}}catch(e){console.error("LT range error",e)}const o=this.getScaleFactor(t);for(const e of s)e.top=Math.round(e.top/o.y),e.right=Math.round(e.right/o.x),e.bottom=Math.round(e.bottom/o.y),e.left=Math.round(e.left/o.x),e.width=e.right-e.left,e.height=e.bottom-e.top;return s}getRelativeTextBoundingBox(e,t){const r=this.getRelativeTextBoundingBoxes(e,t),s=Math.min(...r.map(e=>e.top)),n=Math.max(...r.map(e=>e.right)),i=Math.max(...r.map(e=>e.bottom)),a=Math.min(...r.map(e=>e.left));return{top:s,right:n,bottom:i,left:a,width:n-a,height:i-s}}_hasRelativePosition(e,t){const r=this._getComputedStyle(e,t).position||"static";return ye.NON_STATIC_POSITIONS.indexOf(r)>-1}getDocumentGap(){if(!this._documentGap&&(this._documentGap={top:0,left:0},this._document.body&&this._hasRelativePosition(this._document.body,this._getElementCache(this._document.body)))){const e=this.getBorderBox(this._document.documentElement),t=this.getBorderBox(this._document.body);let r=this._document.documentElement.offsetTop,s=this._document.documentElement.offsetLeft;if(R.isFirefox()||R.isThunderbird()){let e=null;0===r&&(e=this.getComputedStyle(this._document.documentElement),r=parseInt(e["margin-top"])||0),0===s&&(e=e||this.getComputedStyle(this._document.documentElement),s=parseInt(e["margin-left"])||0)}const n=t.top-e.top+r,i=t.left-e.left+s,a=this.getComputedStyle(this._document.body),o=parseFloat(a["border-top-width"])||0,c=parseFloat(a["border-left-width"])||0;this._documentGap={top:n+o,left:i+c}}return this._documentGap}getDocumentVisibleBox(){if(!this._documentVisibleBox){const e=this.getDocumentScroll();let t=this._document.documentElement.clientHeight,r=this._document.documentElement.clientWidth;R.isThunderbird()&&(t=self.innerHeight,r=self.innerWidth),this._documentVisibleBox={top:e.top,right:e.left+r,bottom:e.top+t,left:e.left,width:r,height:t}}return this._documentVisibleBox}getDocumentScroll(){if(!this._documentScroll){const e=this._document.documentElement&&this._document.documentElement.scrollTop||this._document.body&&this._document.body.scrollTop||0,t=this._document.documentElement&&this._document.documentElement.scrollLeft||this._document.body&&this._document.body.scrollLeft||0;this._documentScroll={top:e,left:t}}return this._documentScroll}_isScrollable(e,t,r){if("boolean"==typeof r.isScrollable?.[t])return r.isScrollable?.[t];r.isScrollable??(r.isScrollable={});const s=this.getComputedStyle(e);return"x"===t?(r.isScrollable.x=e.scrollWidth>e.clientWidth||"scroll"===s.overflowX,r.isScrollable.x):"y"===t?(r.isScrollable.y=e.scrollHeight>e.clientHeight||"scroll"===s.overflowY,r.isScrollable.y):void 0}isScrollable(e,t){return this._isScrollable(e,t,this._getElementCache(e))}}ye.IMPORTANT_REG_EXP=/!important$/,ye.TRANSFORM_MATRIX_REG_EXP=/(?:matrix|scale)\(([\d\.]+),/,ye.NON_STATIC_POSITIONS=["relative","fixed","absolute","sticky"],ye.MIN_TEXT_BOX_WIDTH=.1;var xe=r(4629),ve=r.n(xe);function De(){return ve()}
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
n.get(e.EXTN_PREFIX);(()=>{const e=(e,t,r,s)=>{const n=e.ownerDocument;let i=n.elementFromPoint(r,s);if(!i)return!1;if(e===i||e.contains(i))return!0;if(!t.length)return!1;return t.find(e=>e.contains(i))&&(i=n.elementsFromPoint(r,s).find(e=>!1===t.some(t=>t.contains(e)))||null),Boolean(i&&(e===i||e.contains(i)))}})();function ke(e,t,r){const s=new CustomEvent(t,{detail:r,cancelable:!0});return e.dispatchEvent(s)}(()=>{let e;const t=[]})(),(()=>{let e=null,t=[];function r(r){if(!r.some(e=>e.removedNodes.length>0))return;const n=[];for(const e of t)we(e.element)||(e.callback(e.element),n.push(e),e.signal?.removeEventListener("abort",s));t.filter(e=>!n.includes(e)),t.length||(e.disconnect(),null)}function s(r){t.filter(e=>e.signal===r.currentTarget),t.length||(e.disconnect(),null)}})();function we(e){if(e.ownerDocument&&e.ownerDocument.contains(e))return!0;let t=e;for(;t&&t.parentNode;){if(t.parentNode===document)return!0;t.parentNode instanceof DocumentFragment?t.parentNode.host:t.parentNode}return!1}new Set(["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"]);function Ue(e){return function(e){return e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(e)&&"ShadowRoot"===Object.getPrototypeOf(e).constructor.name}function Me(e,t,r,s=Date.now().toString()){const n=self,i=void 0!==n.screenLeft?n.screenLeft:n.screenX,a=void 0!==n.screenTop?n.screenTop:n.screenY,o=n.innerWidth?n.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,c=n.innerHeight?n.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,l=o/n.screen.availWidth,u=(o-t)/2/l+i,g=(c-r)/2/l+a;return n.open(e,s,`\n      scrollbars=yes,\n\t  resizable=yes,\n      width=${t/l},\n      height=${r/l},\n      top=${g},\n      left=${u}\n      `)}(function(){let e,t=null;const r=t=>{t.origin.match(/^chrome|moz|safari/)&&e(t.data)}})(),function(){const e="GET_LOGIN_CREDENTIALS";let t,r=null;const s=e=>{t(e.data)}}();Array.from({length:16},(e,t)=>t.toString(16));const Ge=/^(https?:\/\/)?localhost(:[0-9]{1,5})?(\/.*)?$/i,Fe=/^(https?:\/\/)?[a-z0-9]+([-.]{1}[a-z0-9]+)*\.[a-z]{2,15}(:[0-9]{1,5})?(\/.*)?$/i,Be=/^(?:https?:\/\/)?(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}(?::[0-9]{1,5})?$/;function He(e){return Ge.test(e)||Fe.test(e)||Be.test(e)}function We(e){return e.filter(e=>He(e))}function je(e){return We(e).map(e=>{try{return q(e)}catch{return null}}).filter(e=>!!e)}new Map([["paraphrase","rephrase"],["correct","correct"]]),new Map([["hover","hover"],["click","click"],["toolbar","click"],["dblClick","click"],["dblPress","click"]]);const $e={hallo:"de",moin:"de",viele:"de",servus:"de",gruezi:"de",kacke:"de",und:"de","und los":"de","na denn":"de",gut:"de",eins:"de",nie:"de",immer:"de",neein:"de",neeein:"de",neeeein:"de",stimmts:"de",das:"de",den:"de",hier:"de",sowas:"de","och nö":"de","hey du":"de","na gut":"de","hallo leute":"de","hey leute":"de",nagut:"de",ahoi:"de",bald:"de",juhu:"de",juchu:"de",alter:"de",fertig:"de",korrekt:"de",digga:"de",diggah:"de",digger:"de",gratis:"de",schade:"de",nicht:"de",meins:"de",willkommen:"de",schuldigung:"de",tschuldigung:"de",entschuldigung:"de",hö:"de",höhö:"de",sicher:"de",bitte:"de",klappt:"de",krass:"de",funzt:"de",hä:"de",häh:"de",hähä:"de",passt:"de",nee:"de",tschö:"de",tschöh:"de",du:"de",sie:"de",prima:"de",grüezi:"de",grüzi:"de",komme:"de",jepp:"de",japp:"de",anbei:"de","guten tag":"de","gute tag":"de","dank dir":"de",oha:"de",herr:"de",frau:"de",ja:"de",oja:"de",jo:"de",nö:"de",nöö:"de",nööö:"de",geil:"de",klasse:"de",nix:"de","oh ja":"de","oh je":"de",ohje:"de",oje:"de",wieso:"de",wann:"de",achso:"de",was:"de",ups:"de",hihi:"de",hihihi:"de",bitteschön:"de","bitte schön":"de",dankeschön:"de","danke schön":"de","besten dank":"de","vielen dank":"de","ja klar":"de","ja, klar":"de",au:"de",aua:"de",tja:"de",bäh:"de",ähm:"de",ähem:"de",hoppla:"de",uff:"de",zack:"de",bumm:"de",pfui:"de",hurra:"de",puh:"de",mist:"de",hi:"en",hey:"en",wassup:"en",wazzup:"en",yo:"en",oh:"en",done:"en",dollar:"en",yay:"en",yep:"en",nope:"en",please:"en",pls:"en",damn:"en",dammit:"en",shit:"en",bad:"en",usa:"en",rofl:"en",lol:"en",wtf:"en",huh:"en",thx:"en",ugh:"en",like:"en",ouch:"en",boo:"en",booo:"en",boooo:"en",no:"en",noo:"en",nooo:"en",noooo:"en",nooooo:"en","see ya":"en","see you":"en","love u":"en",yea:"en",hooray:"en",best:"en",jeez:"en",yeez:"en",geez:"en",woah:"en",omg:"en",gosh:"en",si:"es","mui bien":"es",oye:"es",vale:"es",que:"es",anda:"es",orale:"es",correcto:"es",ay:"es",eh:"es",claro:"es",hala:"es",bien:"es",cabron:"es",joder:"es",culo:"es",pendejo:"es","maldita sea":"es",hostia:"es",como:"es",cómo:"es",ajá:"es",aja:"es","como dice":"es",carajo:"es",jajaja:"es",jejeje:"es",perdon:"es",donde:"es",dale:"es",portada:"es",oi:"pt",ola:"pt",olá:"pt",tchau:"pt",adeus:"pt",beleza:"pt","ate logo":"pt","e ai":"pt","e aí":"pt",xau:"pt",oba:"pt",nossa:"pt",poxa:"pt",então:"pt",entao:"pt",uau:"pt",bom:"pt",certo:"pt",ufa:"pt",eita:"pt",otimo:"pt",ótimo:"pt","está ótimo":"pt","esta otimo":"pt","cruz credo":"pt",salut:"fr",coucou:"fr",daccord:"fr",accord:"fr",bonne:"fr",bonsoir:"fr","bon jour":"fr","bon soir":"fr","d'acc":"fr","d´acc":"fr","d`acc":"fr",allo:"fr",merde:"fr",ouf:"fr",aie:"fr",bon:"fr",zut:"fr",boum:"fr",donc:"fr",mince:"fr",comment:"fr",pardon:"fr",quand:"fr",beurk:"fr",putain:"fr",connard:"fr","a propos":"fr","quand meme":"fr","oh la la":"fr","miam miam":"fr","merci beacoup":"fr","ca va":"fr",dag:"nl",hoi:"nl",goedemorgen:"nl",welkom:"nl",dank:"nl","dank u":"nl","dank je":"nl",bedankt:"nl",verdorie:"nl",godverdomme:"nl",verdomme:"nl",klote:"nl",kloten:"nl",kak:"nl",kut:"nl",lul:"nl",flikker:"nl",hé:"nl",czesc:"pl","bon dia":"ca","si us plau":"ca","moltes gràcies":"ca","moltes gracies":"ca","com estàs":"ca","com estas":"ca","fins aviat":"ca",gràcies:"ca",gracies:"ca",perdó:"ca",enhorabona:"ca",índex:"ca"},ze=/^([Hh]allo|[Ll]ieber?|[Mm]oin|[Nn]a|[Ss]ervus|[Dd]anke|Grüe?zi|Gruezi|Herr|Frau|Fräulein)\s[A-ZÄÖÜ][a-zäüß]/,Xe=/(\b|^)(guten\s(tag|abend|morgen)|sehr\sgeehrter?)(\b|$)/,Ve=/^ol[aáà]\s|((\b|^)(boa\snoite|bom\sdia)(\b|$))/,qe=/(\b|^)(bon\sdia|moltes\sgr[aà]cies|bona\ssort|no\spassa\sres|com\sest[àa]s)(\b|$)/,Ye=/^[¿¡.…]+$/,Ke=/[!.:;…?,]+$/;const Ze=.5,Qe=(e,t,r)=>e>=t&&e<=r;const Je=/\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}\b/gi,et=/\b(?:(https?|ftp|mailto|tel|wss):\/\/|www\.|(chrome|moz|safari)(-extension)?:\/\/|file:\/\/)[^\s]+/gi,tt=/@[A-Z0-9._-]+/gi,rt=/[\-~\$]?[0-9]+/g,st=/^([0-9a-z]+\.)(\s|$)/gim,nt=/[\u25CF\u25CB\u25C6\u27A2\u25A0\u25A1\u2605\u274F\u2794\u21B5\u2756\u25AA\u2751\u2022]+(\s|$)/gim,it=/^[-*](\s|$)/gim,at=/\b([0-9]+[.,][0-9]+[.,][0-9]+[.,][0-9]+|[0-9]+[.,][0-9]+[.,][0-9]+|[0-9]+[.,][0-9]+)\b/g,ot=/(?<=(\s|^))(:\-?[\)(DPpoO]|;\-?\)|(xo|xO|XO){1,10}|xD|XD|\<3)(?=(\s|$))/g,ct=/[\u2665\u2661\u2764]+/g,lt=/\b[A-Z\-]{1,10}[\-_]?\d{2,100}\b/gi,ut=/\u203D/g,gt=/(\!{2,50}|\?{2,50}|(\?\!){2,50}|\.{4,50}|\-{2,10}|\:{2,50}|\;{2,50}|…{2,50}|\_{2,50}|\,{2,50}|\<{2,50}|\>{2,50}|\#{2,50}|\*{2,50}|\+{2,50}|\={2,50}|\/{2,50}|\\{2,50}|\%{2,50}|\~{2,50})/g,dt=/[—–-]+/g,ht=/\u2011+/g,mt=/[\uFEFF\u200B\u200C\u200D\u00AD\u2060\u2063\u202A\u202B\u202C\u202D]+/g,pt=/\s+/g,_t=/^\/[a-z\-_]+/gm,Et=/(?<=(\s|^))#[a-z0-9]+/gi,ft=/(?<=(\s|^))[#%_\$€§*><~]+(?=(\s|$))/g,St=/\b[a-z0-9-_\/\.]+\.(com?|de|co\.uk|ch|at|fr|org|dk|se|no|info|net|eu|ai|io|nl|pl|ru|com\.br|br|pt|it|ca|com\.mx|mx|cn|mp[43]|jpe?g|gif|php|html?|s?css|jsx?|mov|png|web[mp]|pdf|docx?|xlsx?|pptx?|txt|rtf|bmp|svg|odt|zip|rar|gz|tar|app|dmg|exe|cad|psd|dotx?|tiff?|tsx?|woff|xml|csv|wav|ogg|pkg|rpm|iso|sql|php|email|eml|msi|otf|ttf|aspx?|py|java|swift|ods|sys|log|avi|wmv|m4v|sh)\b/gi,At=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF]|[\uFE00-\uFE0F]|[\u2B50-\u2B52])/g,Tt=["haw","hmn","co","fy","gd","cbk","und"],Rt={fil:"tl"};class Ct{static supported(e=[]){return self.LanguageDetector&&"function"==typeof self.LanguageDetector.create&&"function"==typeof self.LanguageDetector.availability&&!e.includes("uk")&&!e.includes("br")&&!e.includes("ast")&&!e.includes("crh")&&this.isAtLeastChromeVersion(138)}static isAtLeastChromeVersion(e){return navigator.userAgent.includes("Chrome/")&&Number((navigator.userAgent.match(/Chrome\/(\d+)/)||[void 0,0])[1])>=e&&!navigator.userAgent.includes("Chromium/")&&!navigator.userAgent.includes("Edge/")&&!navigator.userAgent.includes("Edg/")&&!navigator.userAgent.includes("YaBrowser/")&&!navigator.userAgent.includes("OPR/")&&!navigator.userAgent.includes("Brave/")}static async init(){if(this.supported()&&["downloadable","available"].includes(await self.LanguageDetector.availability()))try{this._browserLanguageDetector=this._browserLanguageDetector||await self.LanguageDetector.create()}catch(e){}}static async detect(e,t,r=!1){if(!this.supported(t))throw new Error("Language detection unsupported");if("unavailable"===await self.LanguageDetector.availability())throw new Error("Language detection unavailable");let s=this.normalizeText(e);s||(s=e.trim()),s=s.slice(0,1e4);let n=this.normalizeLanguages(t);n.length&&s.length<50&&!r&&(n=this.addLanguagesToDetect(n,s));const i=function(e,t){if(e.length>50)return null;const r=e.trim(),s=r.replace(Ye,"").replace(Ke,"").trim().toLowerCase();if(t.includes("de")&&(ze.test(r)||Xe.test(s)))return"de";if(t.includes("pt")&&Ve.test(s))return"pt";if(t.includes("ca")&&qe.test(s))return"ca";const n=$e[s];return n&&t.includes(n)?n:null}(s,t);if(i)return{language:i,confidence:.99};this._browserLanguageDetector=this._browserLanguageDetector||await self.LanguageDetector.create();let a=await this._browserLanguageDetector.detect(s);return a=a.filter(e=>!Tt.includes(e.detectedLanguage)&&!e.detectedLanguage.endsWith("-Latn")),!r&&1===a.length&&a[0].confidence>.9&&s.length>10&&s.split(" ").length>1?{language:this.mapToSupportedLanguageCode(a[0].detectedLanguage),confidence:a[0].confidence}:(!t.includes("gl")&&(t.includes("pt")||t.includes("ca")||t.includes("es"))&&(a=a.filter(e=>"gl"!==e.detectedLanguage)),n.length&&(s.length<50||r)&&(a=a.filter(e=>n.includes(e.detectedLanguage.toLowerCase()))),a[0]?{language:this.mapToSupportedLanguageCode(this.getPrimaryLanguageCode(a[0].detectedLanguage)),confidence:a[0].confidence}:null)}static normalizeText(e){return e=this.stripEmojis(e),e=this.stripEmailAdresses(e),e=this.stripURLs(e),e=this.stripSmileys(e),e=this.stripBulletPoints(e),e=this.stripFileNamesAndDomains(e),e=this.stripTokensWithNumbers(e),e=this.stripNumbers(e),e=this.stripMentions(e),e=this.stripUnicodeHearts(e),e=this.stripInvisibleWhitespace(e),e=this.stripChatCommands(e),e=this.stripHashTags(e),e=this.stripRepeatedWords(e),e=this.stripLeftoverChars(e),e=this.normalizePunctuation(e),e=this.normalizeHyphens(e),(e=this.normalizeWhitespace(e)).trim()}static stripEmojis(e){return e.replace(At,"")}static stripEmailAdresses(e){return e.replace(Je,"")}static stripURLs(e){return e.replace(et,"")}static stripFileNamesAndDomains(e){return e.replace(St,"")}static stripBulletPoints(e){return e.replace(st,"").replace(nt,"").replace(it,"")}static stripMentions(e){return e.replace(tt,"")}static stripSmileys(e){return e.replace(ot,"")}static stripUnicodeHearts(e){return e.replace(ct,"")}static stripTokensWithNumbers(e){return e.replace(lt,"")}static stripHashTags(e){return e.replace(Et,"")}static stripNumbers(e){return e.replace(at,"").replace(rt,"")}static stripInvisibleWhitespace(e){return e.replace(mt,"")}static stripChatCommands(e){return e.replace(_t,"")}static stripLeftoverChars(e){return e.replace(ft,"")}static stripRepeatedWords(e){try{return e.replace(new RegExp("(?<![\\p{L}])([\\p{L}]+(?:-[\\p{L}]+)*)(?:\\s+\\1)+(?![\\p{L}])","giu"),"$1")}catch(t){return e.replace(/(^|[^a-zäöüß-])([a-zäöüß]+(?:-[a-zäöüß]+)*)(?:\s+\2)+(?![a-zäöüß-])/gi,"$1$2")}}static normalizeHyphens(e){return e.replace(dt,"-").replace(ht,"-")}static normalizePunctuation(e){return e.replace(ut,"!").replace(gt,(e,t)=>t.charAt(0))}static normalizeWhitespace(e){return e.replace(pt,e=>e.includes("\n")?"\n":" ")}static addLanguagesToDetect(e,t){return e=W(e.concat(function(e){e=e.slice(0,50);let t=0,r=0,s=0,n=0,i=0,a=0,o=0,c=0,l=0,u=0,g=0;for(let d=0;d<e.length;d++){const h=e[d]??"",m=h.charCodeAt(0);/\s/.test(h)||/\d/.test(h)||"."===h||g++,Qe(m,1536,1791)&&t++,Qe(m,1024,1279)&&r++,(Qe(m,19968,40959)||Qe(m,12352,12447)||Qe(m,12448,12543))&&s++,Qe(m,6016,6143)&&n++,Qe(m,2946,3066)&&i++,(Qe(m,880,1023)||Qe(m,7936,8191))&&a++,Qe(m,2304,2431)&&o++,Qe(m,3584,3711)&&c++,(Qe(m,1424,1535)||Qe(m,64285,64320))&&l++,(Qe(m,44032,55215)||Qe(m,4352,4607)||Qe(m,12592,12687)||Qe(m,43360,43391)||Qe(m,55216,55295))&&u++}if(0===g)return[];const d=e=>e/g,h=[];return d(t)>=Ze&&h.push("ar","fa"),d(r)>=Ze&&h.push("ru","uk","be"),d(s)>=Ze&&h.push("zh","ja"),d(n)>=Ze&&h.push("km"),d(i)>=Ze&&h.push("ta"),d(a)>=Ze&&h.push("el"),d(o)>=Ze&&h.push("hi","mr"),d(c)>=Ze&&h.push("th"),d(l)>=Ze&&h.push("he"),d(u)>=Ze&&h.push("ko"),h}(t))),t.includes("ß")&&!e.includes("de")&&e.push("de"),!t.includes("ł")&&!t.includes("Ł")||e.includes("pl")||e.push("pl"),!t.includes("¡")&&!t.includes("¿")||e.includes("es")||e.push("es"),e}static mapToSupportedLanguageCode(e){return Rt[e]||e}static normalizeLanguages(e){return e.map(e=>this.getPrimaryLanguageCode(e))}static getPrimaryLanguageCode(e){return e.split("-")[0].toLowerCase()}}
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class It{static getServerBaseUrl(e,t=!1,r=!0){const s=r&&(t?this._useFallbackServerForParagraphLevelRequests:this._useFallbackServerForTextLevelRequests)&&!e.apiServerUrl;return e.apiServerUrl&&!this._isLanguageToolServer(e.apiServerUrl)?e.apiServerUrl:e.isPremium||e.user||e.apiServerUrl===a?s?"https://languagetoolplus.com/api/v2":a:s?"https://api-fallback.languagetool.org/v2":i}static _getServerFullUrl(e,t=!1){const r=this.getServerBaseUrl(e,t),s=r.endsWith("/")?"":"/",n=new URL(r+s+"check");return n.searchParams.set("c","1"),n.searchParams.set("instanceId",e.instanceId),e.version&&n.searchParams.set("v",e.version),n.toString()}static _abortTextLevelCheckRequest(e){this._textLevelAbortControllers.has(e)&&(this._textLevelAbortControllers.get(e).abort(),this._textLevelAbortControllers.delete(e))}static _abortParagraphLevelCheckRequest(e){this._paragraphLevelAbortControllers.has(e)&&(this._paragraphLevelAbortControllers.get(e).abort(),this._paragraphLevelAbortControllers.delete(e))}static _abortLanguageDetectionRequest(e){this._languageDetectionAbortControllers.has(e)&&(this._languageDetectionAbortControllers.get(e).abort(),this._languageDetectionAbortControllers.delete(e))}static _abortRecommendationRequest(e){const t=this._recommendationAbortControllers.get(e);t&&(t.abort(),this._recommendationAbortControllers.delete(e))}static abortTextLevelCheck(e){this._abortTextLevelCheckRequest(e)}static abortParagraphLevelCheck(e){this._abortParagraphLevelCheckRequest(e)}static abortLanguageDetection(e){this._abortLanguageDetectionRequest(e)}static abortRecommendation(e){this._abortRecommendationRequest(e)}static _prepareText(e){return e.replace(this.ZWNJ_REGEXP,this.ZWS)}static _joinInChunks(e,t=5e3){const r=[];let s=0,n=[];return e.forEach(e=>{s>t&&(s=0,n=[]),n.push(e),s+=e.text.length,r.includes(n)||r.push(n)}),r}static _getRequestData(e,t,r){const s=new URLSearchParams,n={text:e};r.recipientInfo&&(r.recipientInfo.address||r.recipientInfo.fullName)&&(n.metaData={EmailToAddress:r.recipientInfo.address,FullName:r.recipientInfo.fullName}),s.append("data",JSON.stringify(n));const i=Boolean(r.isPremium||!r.apiServerUrl||r.apiServerUrl&&r.apiServerUrl.startsWith(a)||r.apiServerUrl&&!this._isLanguageToolServer(r.apiServerUrl));if(i&&r.user&&"password"in r.user?(s.append("username",r.user.email),s.append("password",r.user.password)):i&&r.user&&"token"in r.user&&(s.append("username",r.user.email),s.append("tokenV2",r.user.token)),s.append("textSessionId",r.instanceId),!r.isPremium&&r.enableHiddenMatches&&s.append("enableHiddenRules","true"),r.motherTongue&&_.includes(r.motherTongue)&&s.append("motherTongue",r.motherTongue),"normal"!==r.checkLevel&&s.append("level",r.checkLevel.replace("hidden-","")),t)s.append("language",t.code);else{s.append("language","auto"),s.append("noopLanguages",r.preferredLanguages.join(","));const e=this._getPreferredVariants(r.languageVariants);e.length>0&&s.append("preferredVariants",e.toString())}if(r.testGroups){const e=[];for(const[t,s]of Object.entries(r.testGroups))s&&e.push(t);e.length&&s.append("abtest",e.join(","))}if(s.append("preferredLanguages",r.preferredLanguages.join(",")),r.forcePreferredLanguages&&s.append("forcePreferredLanguages","true"),r.writingGoalId){const e=this.HIGH_LEVEL_GOALS.find(e=>e.id===r.writingGoalId);e&&s.append("toneTags",e.tags.join(","))}const o=["WHITESPACE_RULE"].concat(r.disabledRules.filter(e=>p.includes(e)));return s.append("disabledRules",o.join(",")),r.userAgent&&s.append("useragent",r.userAgent),s}static _getHeaders(e){if(!e.accessToken)return;const t=new Headers;return t.append("Authorization",`Bearer ${e.accessToken}`),t}static _getPreferredVariants(e){return Object.values(e)}static _getTextLevelRequestData(e,t,r){const s=this._getRequestData(e,t,r);return s.append("mode","textLevelOnly"),s}static _getParagraphLevelCheckRequestData(e,t,r){const s=this._getRequestData(e,t,r);return s.append("mode","allButTextLevelOnly"),s.append("allowIncompleteResults",String(r.allowIncompleteResults||!1)),s}static async _sendRequest(e,t,r=5e4){const s=fetch(e,t).catch(t=>{throw"AbortError"===t.name?{reason:"AbortError",status:0,response:t.message||""}:{reason:"ConnectionError",status:0,url:e.replace(/\?.*/,""),response:t.message||""}}).then(this._checkForException).then(e=>e.json()),n=new Promise((t,s)=>{setTimeout(()=>{s({reason:"TimeoutError",status:0,url:e.replace(/\?.*/,""),response:""})},r)});return Promise.race([s,n])}static _isConnectionOrServerIssue(e){return o.includes(e.status)||["ConnectionError","TimeoutError"].includes(e.reason)}static _getGraphemesCount(e,t,r=0){for(let s=r;s<e.length;s++){if(t<=0)return s-r;t-=e[s].length}return e.length-r}static _getCodepointsCount(e,t,r=0){let s=0;for(let n=r;n<Math.min(e.length,r+t);n++)s+=e[n].length;return s}static _correctMatches(e,t,r){if(t!==r){const s=X(t),n=X(r);for(const t of e){const e=It._getGraphemesCount(s,t.offset),r=It._getGraphemesCount(s,t.length,e);t.offset=It._getCodepointsCount(n,e),t.length=It._getCodepointsCount(n,r,e)}}return e}static _getLeftText(e,t,r,s=15,n=!1,i=[],a="auto",o=!1){let c=Math.max(t-s,0);if(n&&i.length>0){const e=i.find(e=>t>=e.start&&t<=e.end);e&&(c=o?e.start:Math.max(c,e.start))}if(r){const r=e.lastIndexOf("\n",t);r>=c&&(c=r+1)}let l=e.substring(c,t).replace(this.NON_ALPHANUMERIC_AT_BEGINNING_REGEXP,""),u=!1;return u="always"===a?0!==c:"never"!==a&&!(0===c||r&&"\n"===e[c-1]||n&&i.some(e=>c===e.start)),u&&(l="..."+l),l}static _getRightText(e,t,r,s=15,n=!1,i=[],a="auto",o=!1){let c=Math.min(t+s,e.length);if(n&&i.length>0){const e=i.find(e=>t>=e.start&&t<=e.end);e&&(c=o?e.end:Math.min(c,e.end))}if(r){const r=e.indexOf("\n",t);-1!==r&&r<=c&&(c=r)}let l=e.substring(t,c).replace(this.NON_ALPHANUMERIC_AT_END_REGEXP,""),u=!1;return u="always"===a?c!==e.length:"never"!==a&&!(c===e.length||r&&"\n"===e[c]||n&&i.some(e=>c===e.end)),u&&(l+="..."),l}static _transformMatches(e,t,r,s=!1,n,i=[]){return e.map(e=>{const a=e.rule.id.startsWith("DB_"),o=this.SPELLING_RULES_ID.some(t=>e.rule.id.includes(t)),c=this.STYLE_ISSUE_TYPES.some(t=>e.rule.issueType===t),l="typographical"===e.rule.issueType&&"CASING"!==e.rule.category.id||"PUNCTUATION"===e.rule.category.id||"TYPOGRAPHY"===e.rule.category.id||e.rule.category.id.includes("KOMMA"),u=Boolean(e.rule.tags&&e.rule.tags.includes("picky")),g="RECOMMENDATION"===e.rule.issueType||"PHRASAL_RECOMMENDATION"===e.rule.issueType,d=!1===e.rule.showInline,h=t.substr(e.offset,e.length),m=n?.strictByParagraph??s,p=n?.useSentenceAwareContext??!1,_=n?.shortContext,E=_?.maxContextLength??15,f=_?.ellipsisMode??"auto",S=_?.forceCompleteSentences??!1,A=n?.longContext,T=A?.maxContextLength??60,R=A?.ellipsisMode??"auto",C=A?.forceCompleteSentences??!1,I=`${It._getLeftText(t,e.offset,m,E,p,i,f,S)}|${h}|${It._getRightText(t,e.offset+e.length,m,E,p,i,f,S)}`,P=It._getLeftText(t,e.offset,!0,T,p,i,R,C),L=It._getRightText(t,e.offset+e.length,!0,T,p,i,R,C),b=`${B(P)}<lt-em>${B(h)}</lt-em>${B(L)}`;let N="";e.shortMessage&&e.shortMessage.length<60&&e.shortMessage!==e.message&&(N=e.shortMessage.replace(this.PUNCTUATION_AT_END,""));const O=e.replacements.map(e=>({value:e.value,htmlValue:e.htmlValue,prefix:e.prefix,suffix:e.suffix,type:e.type,shortDescription:e.shortDescription}));return{isParagraphLevelCheck:s,rule:e.rule,isCustomError:a,isSpellingError:o,isStyleError:c,isPunctuationError:l,isPicky:u,isRecommendation:g,isOptional:d,contextForSureMatch:e.contextForSureMatch,language:{code:r.code,name:r.name},description:e.message,shortDescription:N,goodExample:e.goodExample,badExample:e.badExample,start:e.offset,end:e.offset+e.length,length:e.length,originalPhrase:h,contextPhrase:I,longContextPhrase:b,fixes:O,isLocked:e.isLocked}})}static _adjustErrors(e,t,r){const s=r.recipientInfo?r.recipientInfo.fullName.split(" ").filter(e=>e):[];return e.filter(e=>{if(!e.isPicky&&e.rule.id.startsWith("QB_NEW_")&&1===e.fixes.length&&e.originalPhrase+"."===e.fixes[0].value&&(e.end===t.length||"\n"===t.substring(e.end,e.end+1))&&(e.isPicky=!0,!r.checkLevel.includes("picky")))return!1;if(e.originalPhrase.startsWith(S)){const t=e.originalPhrase.length;if(e.originalPhrase=e.originalPhrase.replace(O,""),e.start+=t-e.originalPhrase.length,e.fixes[0]&&e.originalPhrase===e.fixes[0].value)return!1}if(e.originalPhrase.endsWith(S)){const t=e.originalPhrase.length;if(e.originalPhrase=function(e){return e.replace(y,"")}(e.originalPhrase),e.end-=t-e.originalPhrase.length,e.fixes[0]&&e.originalPhrase===e.fixes[0].value)return!1}e.fixes=e.fixes.filter(t=>t.value!=="("+e.originalPhrase+")"&&t.value!==e.originalPhrase&&"(suggestion limit reached)"!==t.value&&"(se ha alcanzado el límite de sugerencias)"!==t.value&&"(Vorschlagslimit erreicht)"!==t.value),e.language.code.startsWith("en")&&x(e.originalPhrase)&&!/[a-z]/i.test(e.contextPhrase)&&e.fixes.forEach(t=>{t.value.toLowerCase()!==e.originalPhrase.toLowerCase()&&(t.value=t.value.toUpperCase())}),"PT_CLICHE_REPLACE"!==e.rule.id&&"PT_WORDINESS_REPLACE"!==e.rule.id||e.fixes.forEach(t=>{(t.value.startsWith("REFORMULAR")||t.value.startsWith("APAGAR")||t.value.startsWith("ESPECIFICAR"))&&(e.description=e.description.replace(/\sÉ preferível dizer.+(REFORMULAR|APAGAR|ESPECIFICAR).+$/,""),t.value="")});if(this.EMAIL_SIGNATURE_SEPARATOR_REGEXP.test(e.originalPhrase))return!1;if(this.INVISIBLE_PHRASE_REGEXP.test(e.originalPhrase))return!1;if(e.rule.id.endsWith("WORD_REPEAT_BEGINNING_RULE")&&this.ONLY_NUMBERS_REGEXP.test(e.originalPhrase))return!1;if("LEERZEICHEN_HINTER_DOPPELPUNKT"===e.rule.id&&this.COLON_WHITESPACE_REGEXP.test(e.originalPhrase))return!1;const n=t.substring(e.start-25,e.start),i=t.substr(e.end,25);if(r.ignoreCapitalizationErrorsAtLineStart&&"UPPERCASE_SENTENCE_START"===e.rule.id&&this.PREVENT_MID_SENTENCE_CAPITALIZATION.test(n))return!1;if(r.ignoreCapitalizationErrorsAtLineStart&&"PUNCTUATION_PARAGRAPH_END"===e.rule.id&&this.PREVENT_MID_SENTENCE_PUNCTUATION.test(i))return!1;if("DE_CASE"===e.rule.id&&this.BULLET_POINT_REGEXP.test(n))return!1;if("DE_CASE"===e.rule.id&&this.NUMBER_WITH_PARENTHESIS_AT_END_REGEXP.test(n))return!1;if("DE_CASE"===e.rule.id&&this.PIPE_AT_END_REGEXP.test(n))return!1;if("DE_CASE"===e.rule.id&&this.MARKDOWN_HEADLINE_REGEXP.test(n))return!1;if("DE_CASE"===e.rule.id&&this.EMOJI_SENTENCE_START_REGEXP.test(n))return!1;if("LEERZEICHEN_HINTER_DOPPELPUNKT"===e.rule.id&&this.MARKDOWN_INLINE_FORMAT_AT_BEGINNING_REGEXP.test(i))return!1;if("LEERZEICHEN_HINTER_DOPPELPUNKT"===e.rule.id&&this.WIKI_MARKUP_AT_END_REGEXP.test(n))return!1;if(e.rule.id.endsWith("UNPAIRED_BRACKETS")&&this.ONE_LETTER_AT_END_REGEXP.test(n))return!1;if(e.rule.id.endsWith("UNPAIRED_BRACKETS")&&this.NUMBER_WITH_DOT_AT_END_REGEXP.test(n))return!1;if("SENTENCE_WHITESPACE"===e.rule.id&&n.endsWith("{!"))return!1;if("SENTENCE_WHITESPACE"===e.rule.id&&this.SINGLE_UPPERCASE_LETTER_REGEXP.test(e.originalPhrase)&&this.ABBREVIATION_AT_END_REGEXP.test(n))return!1;if("SENTENCE_WHITESPACE"===e.rule.id&&"net"===e.originalPhrase.toLowerCase())return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&this.NET_AT_BEGINNING_REGEXP.test(i))return!1;if(e.rule.id.startsWith("AI_")&&1===e.fixes.length&&e.originalPhrase.replace(this.INVISIBLE_CHARS_REGEXP,"")===e.fixes[0].value)return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&e.originalPhrase.endsWith(")")&&n.endsWith(this.ZWS))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&e.originalPhrase.endsWith(".")&&this.FILE_TYPE_AT_BEGINNING_REGEXP.test(i))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&n.endsWith("(")&&(",)"===e.originalPhrase||".)"===e.originalPhrase))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&n.endsWith("\n")&&[")","}","]","."].includes(e.originalPhrase))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&i.startsWith("/"))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&e.originalPhrase.includes(this.ZWS))return!1;if("WORT1_BINDESTRICH_SPACE_WORT2"===e.rule.id&&e.originalPhrase.endsWith(this.ZWS))return!1;if("MULTIPLICATION_SIGN"===e.rule.id&&(this.AT_LEAST_TWO_LETTERS_AT_END_REGEXP.test(n)||!i||this.PUNCTUATION_AT_BEGINNING_REGEXP.test(i)))return!1;if("ZBEDNA_SPACJA_PRZED"===e.rule.id&&e.originalPhrase.includes(this.ZWS))return!1;if("UNLIKELY_OPENING_PUNCTUATION"===e.rule.id&&this.PUNCTUATION_SPACE_AT_END_REGEXP.test(n))return!1;if("WORD_CONTAINS_UNDERSCORE"===e.rule.id&&(!this.LOWERCASE_REGEXP.test(e.originalPhrase)||e.originalPhrase.includes("-")||e.originalPhrase.includes("__")||this.SLASH_AT_END_REGEXP.test(n)||this.SLASH_AT_BEGINNING_REGEXP.test(i)))return!1;if("WORD_CONTAINS_UNDERSCORE"===e.rule.id&&n.endsWith("[")&&i.startsWith("]"))return!1;if("WORD_CONTAINS_UNDERSCORE"===e.rule.id&&E.test(n)&&f.test(i))return!1;if("WORD_CONTAINS_UNDERSCORE"===e.rule.id&&(n.endsWith("=")||n.endsWith("&")||n.endsWith("?")))return!1;if(["APOS_INCORRECT","LOOSE_ACCENTS"].includes(e.rule.id)&&"`"===e.originalPhrase)return!1;if(["_2_AANH_B","FALSCHES_ANFUEHRUNGSZEICHEN_2"].includes(e.rule.id)&&"``"===e.originalPhrase)return!1;if("DASH_RULE"===e.rule.id&&i.startsWith(" [")&&(!n||n.endsWith("\n")))return!1;if(e.isSpellingError&&e.originalPhrase.length>6&&e.fixes.length>4&&e.language.code.startsWith("de")&&(e.fixes.length=4),e.isSpellingError||"WORD_CONTAINS_UNDERSCORE"===e.rule.id){const t=e.originalPhrase.charAt(0),a=e.originalPhrase.toLowerCase();if(Q(e,r.dictionary))return!1;if((i.startsWith("_")||n.endsWith("_"))&&!e.language.code.startsWith("de"))return!1;if(e.originalPhrase.startsWith("$")&&i.startsWith("}")&&n.endsWith("{"))return!1;if(e.originalPhrase.startsWith("$")&&e.originalPhrase.endsWith("$"))return!1;if(this.HTML_ENTITIES.includes(e.originalPhrase)&&n.endsWith("&")||this.HTML_ENTITIES_WITH_AND.includes(e.originalPhrase)||this.HTML_ENTITIES_WITH_AND.includes("&"+e.originalPhrase))return!1;if(this.COMMON_TLDS.some((e,t)=>a.endsWith("."+e)||this.COMMON_TLD_WITH_DOT_REGEXPS[t].test(i)))return!1;if(this.DOT_WITH_PREFIX_REGEXP.test(n)&&this.COMMON_TLDS.includes(a))return!1;if(this.COMMON_FILE_TYPES.some((e,t)=>a.endsWith("."+e)||this.COMMON_FILE_TYPE_WITH_DOT_REGEXPS[t].test(i)))return!1;if(this.DOT_WITH_PREFIX_REGEXP.test(n)&&this.COMMON_FILE_TYPES.includes(a))return!1;const o="@"===t||this.MENTION_SYMBOL_AT_BEGINNING_REGEXP.test(n),c="#"===t||this.HASH_SYMBOL_AT_BEGINNING_REGEXP.test(n);if(o||c)return!1;if(s.some(t=>t===e.originalPhrase))return!1;if(this.WAVY_DASH_REGEXP.test(e.originalPhrase))return!1;for(const t of s)if(t.toLowerCase()===e.originalPhrase.toLowerCase()&&!e.fixes.some(e=>e.value===t)){e.fixes.unshift({value:t});break}}return!0})}static _processResponse(t,r,s,i,a,o=!1,c=!1,l=!1){t.matches=this._correctMatches(t.matches,s,i);let u=this._transformMatches(t.matches,i,t.language,o,a?.contextConfig,r);u=this._adjustErrors(u,i,a);let g=[];const d=[],h=[];if(r=this._correctMatches(r.filter(({start:e,end:t})=>t-e>-1).map(({start:e,end:t,detectedLanguages:r,checkStatus:s})=>({offset:e,length:t-e,detectedLanguages:r,checkStatus:s})),s,i).map(({offset:e,length:t,detectedLanguages:r,checkStatus:s})=>({start:e,end:e+t,length:t,detectedLanguages:r,checkStatus:s})),c)return{errors:[],premiumErrors:[],pickyErrors:[],premiumPickyErrors:[],sentenceRanges:r};if(l){const t=n.get(e.FIX_ALL_CONFIG);return{errors:u.filter(e=>!(!e.isRecommendation||t.FIX_RECOMMENDATIONS)||(!(!e.isStyleError||t.FIX_STYLE_ERRORS)||!t.FIX_GC_ERRORS)),premiumErrors:[],pickyErrors:[],premiumPickyErrors:[],sentenceRanges:r}}return a.debug&&u.forEach(e=>{e.description=(e.rule.isPremium?"prem:":"")+e.rule.id+"["+(e.rule.subId||"")+"] "+e.description}),t.hiddenMatches&&(g=g.concat(this._transformMatches(t.hiddenMatches,i,t.language,o,a?.contextConfig,r))),"hidden-picky"===a.checkLevel&&(u=u.filter(e=>!e.isPicky||(h.push(e),!1)),t.hiddenMatches&&(g=g.filter(e=>!e.isPicky||(d.push(e),!1)))),{errors:u,premiumErrors:g,pickyErrors:h,premiumPickyErrors:d,sentenceRanges:r}}static _correctErrorOffsets(e,t){const r=[];let s=0;for(const n of e){const e=n.text.length;for(const i of t)if(i.start>=s&&i.end<=s+e){const e=Object.assign({},i);e.start=e.start-s+n.offset,e.end=e.start+e.length,e.rule?.phraseDiff?.forEach(e=>{e.sourceStart=e.sourceStart-s+n.offset,e.sourceEnd=e.sourceEnd-s+n.offset,e.targetEnd=e.targetEnd-s+n.offset,e.targetStart=e.targetStart-s+n.offset}),r.push(e)}s+=e+2}return r}static async checkTextLevel(e,t,r){e=this._prepareText(e);const s=Boolean(r.adapter);if(!e.trim()||s)return{language:t,errors:[],premiumErrors:[],pickyErrors:[],premiumPickyErrors:[]};this._abortTextLevelCheckRequest(r.instanceId),this._textLevelAbortControllers.set(r.instanceId,new AbortController),this._useFallbackServerForTextLevelRequests&&Date.now()-this._mainServerUnavailabilityTimeStamp>=c&&(this._useFallbackServerForTextLevelRequests=!1);const n=e.normalize(),i=this._getServerFullUrl(r,!1),a={method:"post",mode:"cors",credentials:"omit",body:this._getTextLevelRequestData(n,t,r),headers:this._getHeaders(r),signal:this._textLevelAbortControllers.get(r.instanceId).signal};return this._sendRequest(i,a).then(t=>{const{errors:s,premiumErrors:i,pickyErrors:a,premiumPickyErrors:o}=this._processResponse(t,[],n,e,r);return{language:{code:t.language.code,name:t.language.name,detectedLanguage:t.language.detectedLanguage},errors:s,premiumErrors:i,pickyErrors:a,premiumPickyErrors:o}}).catch(s=>{if(this._isConnectionOrServerIssue(s)){this._abortTextLevelCheckRequest(r.instanceId);if(!r.apiServerUrl&&!this._useFallbackServerForTextLevelRequests)return this._useFallbackServerForTextLevelRequests=!0,this._mainServerUnavailabilityTimeStamp=Date.now(),this.checkTextLevel(e,t,r)}throw s})}static _buildSentenceRanges(e,t){if(!t.extendedSentenceRanges&&!t.sentenceRanges)return[];let r=t.extendedSentenceRanges;r||(r=(t.sentenceRanges||[]).map(e=>({from:e[0],to:e[1],detectedLanguages:[{language:t.language.code.split("-")[0],rate:1}]})));return((e,t)=>{const r=new RegExp(S,"g"),s=[];for(const n of e){const{start:e,end:i}=n,a=t.substring(e,i);if(!a.replace(r,"").trim())continue;const[o,c]=M(a),l=e+o,u=l+a.length-o-c,g=u-l;s.push({start:l,end:u,length:g,detectedLanguages:n.detectedLanguages,checkStatus:n.checkStatus})}return s})(r.map(e=>({start:e.from,end:e.to,length:e.to-e.from,detectedLanguages:e.detectedLanguages.map(e=>({language:e.language,confidence:e.rate})),checkStatus:e.checkStatus})),e)}static cancelAllRequests(e){this._abortParagraphLevelCheckRequest(e),this._abortLanguageDetectionRequest(e),this._abortTextLevelCheckRequest(e),this._abortRecommendationRequest(e)}static async checkParagraphLevel(t,r,s,i,a,o,l){t.forEach(e=>{e.text=this._prepareText(e.text)});if(!t.some(e=>!!e.text.trim())){const e={input:{acceptChangeType:Z.GC,language:r?.code,paragraphs:t,editorCompleteText:i||"",preferredVariants:this._getPreferredVariants(s.languageVariants),disableRecommendations:s.disableRecommendations,replacementText:o?.replacementText,hasUserAppliedFix:!1,changedParagraphsSentencesLength:a,appliedFixAll:l,writingGoal:s.writingGoalId,changedContent:s.changedContent||[]},signal:this._paragraphLevelAbortControllers.get(s.instanceId).signal,handleResponseCallback:(e,r)=>{if("editor_content_save_ack"===r)s?.handleResponseCallback?.(e,"editor_content_save_ack");else{const n=this._postProcessParagraphLevelCheckResult(e,t,t.map(e=>e.text).join("\n\n").normalize(),t.map(e=>e.text).join("\n\n"),s,u,a,l);s.handleResponseCallback?.(n,r)}},metaData:{instanceId:s.instanceId,tabId:s.tabId,hostUrl:s.hostUrl||"",hostCategory:s.hostCategory,writingSessionId:s.writingSessionId,lastEditorContentSavedTimestamp:s.lastEditorContentSavedTimestamp}};return s?.adapter?.grammarCheck?.(e),{language:r,errors:[],premiumErrors:[],pickyErrors:[],premiumPickyErrors:[],isIncompleteResult:!1,areErrorsSuppressed:!1}}this._abortParagraphLevelCheckRequest(s.instanceId),this._paragraphLevelAbortControllers.set(s.instanceId,new AbortController),this._useFallbackServerForParagraphLevelRequests&&Date.now()-this._mainServerUnavailabilityTimeStamp>=c&&(this._useFallbackServerForParagraphLevelRequests=!1);let u=!1;if(o&&o.ruleId){const t=n.get(e.AI_RULE_ID_REGEX);u=t.test(o.ruleId)}const g=this._getServerFullUrl(s,!0);let d=[t];s.adapter||(d=this._joinInChunks(t));const h=[];for(const e of d){const t=e.map(e=>e.text).join("\n\n"),n=t.normalize(),c={method:"post",mode:"cors",credentials:"omit",body:this._getParagraphLevelCheckRequestData(n,r,s),headers:this._getHeaders(s),signal:this._paragraphLevelAbortControllers.get(s.instanceId).signal},d=(r,i)=>{if("editor_content_save_ack"===i)s.handleResponseCallback?.(r,"editor_content_save_ack");else{const o=this._postProcessParagraphLevelCheckResult(r,e,n,t,s,u,a,l);s.handleResponseCallback?.(o,i)}};let m;m="REPHRASING"===o?.ruleId?Z.REPHRASING:o?.isRecommendation?Z.GC_RECOMMENDATION:Z.GC;const p={input:{acceptChangeType:m,language:r?.code,paragraphs:e,editorCompleteText:i||"",preferredVariants:this._getPreferredVariants(s.languageVariants),disableRecommendations:s.disableRecommendations,replacementText:o?.replacementText,hasUserAppliedFix:!!o&&u,changedParagraphsSentencesLength:a,appliedFixAll:l,writingGoal:s.writingGoalId,changedContent:s.changedContent||[],responseType:s.responseType},signal:this._paragraphLevelAbortControllers.get(s.instanceId).signal,handleResponseCallback:d,metaData:{instanceId:s.instanceId,tabId:s.tabId,hostUrl:s.hostUrl||"",hostCategory:s.hostCategory,writingSessionId:s.writingSessionId,lastEditorContentSavedTimestamp:s.lastEditorContentSavedTimestamp}},_=(s.adapter?s.adapter?.grammarCheck(p):this._sendRequest(g,c)).then(r=>this._postProcessParagraphLevelCheckResult(r,e,n,t,s,u,a,l));h.push(_)}return Promise.all(h).then(e=>{const t=e[0].language,r=e[0].areErrorsSuppressed,s=e[0].metaData;return{language:t,errors:Array.prototype.concat.apply([],e.map(e=>e.errors)),premiumErrors:Array.prototype.concat.apply([],e.map(e=>e.premiumErrors)),premiumPickyErrors:Array.prototype.concat.apply([],e.map(e=>e.premiumPickyErrors)),pickyErrors:Array.prototype.concat.apply([],e.map(e=>e.pickyErrors)),isIncompleteResult:e.some(e=>e.isIncompleteResult),sentenceRanges:Array.prototype.concat.apply([],e.filter(e=>Boolean(e.sentenceRanges)).map(e=>e.sentenceRanges)),areErrorsSuppressed:r,metaData:s}}).catch(e=>{if(this._isConnectionOrServerIssue(e)){this._abortParagraphLevelCheckRequest(s.instanceId);if((!s.apiServerUrl||this._isLanguageToolServer(s.apiServerUrl))&&!this._useFallbackServerForParagraphLevelRequests)return this._useFallbackServerForParagraphLevelRequests=!0,this._mainServerUnavailabilityTimeStamp=Date.now(),this.checkParagraphLevel(t,r,s,i)}throw e})}static _postProcessParagraphLevelCheckResult(e,t,r,s,n,i,a,o){const{language:c,warnings:l}=e,u=e.ignoreRanges||[];n.debug&&u.length&&(e.matches=this._filterErrorsInIgnoredRanges(e.matches,u),e.hiddenMatches&&(e.hiddenMatches=this._filterErrorsInIgnoredRanges(e.hiddenMatches,u)),this._addIgnoredRangeMatches(r,e.matches,u));let g=this._buildSentenceRanges(r,e);const d=n.adapter?.grammarCheck?i:i&&1===t.length&&g.length===a,{errors:h,premiumErrors:m,pickyErrors:p,premiumPickyErrors:_,...E}=this._processResponse(e,g,r,s,n,!0,d,o);g=E.sentenceRanges;const f=this._correctErrorOffsets(t,h),S=this._correctErrorOffsets(t,m),A=this._correctErrorOffsets(t,p),T=this._correctErrorOffsets(t,_);return g=this._correctErrorOffsets(t,g),{language:{code:c.code,name:c.name},errors:f,premiumErrors:S,pickyErrors:A,premiumPickyErrors:T,isIncompleteResult:!!l&&l.incompleteResults,areErrorsSuppressed:d,sentenceRanges:g,metaData:e?.metaData}}static async checkRecommendation(e,t){e.isForcedRecommendation||this._abortRecommendationRequest(e.instanceId);const r=new AbortController;this._recommendationAbortControllers.set(e.instanceId,r);const s={input:{language:e.language.code,texts:e.texts,priorities:e.priorities,writingGoal:e.writingGoal||""},metaData:{...t?.metaData}};if(t?.adapter){const n=await t.adapter.recommendation(s,{...t.options,signal:t.options?.signal||r.signal});let i=[];t.contextConfig?.useSentenceAwareContext&&e.texts.length>0&&(i=e.texts.map(t=>{const r=t.offset,s=t.offset+t.text.length;return{start:r,end:s,length:s-r,detectedLanguages:[{language:e.language.code.split("-")[0],confidence:1}]}}));return this._transformMatches(n.matches||[],e.originalText,e.language,!0,t.contextConfig,i)}return new Promise(e=>{e([])})}static async unlockRecommendation(e,t){return await(t.adapter?.unlockRecommendation({lockId:e,metaData:t.metaData}))}static translateText(e,t){return t.adapter.translate(e)}static _filterErrorsInIgnoredRanges(e,t){return e.filter(e=>{const r=e.offset,s=e.offset+e.length;return!t.some(e=>r>=e.from&&r<=e.to||s>=e.from&&s<=e.to)})}static _addIgnoredRangeMatches(e,t,r){r.forEach(r=>{let s=r.to-r.from;const n=e.substring(r.from,r.to).match(/\s+$/);n&&(s-=n[0].length);const i={offset:r.from,length:s,rule:{id:"IGNORED_RANGE",category:{id:"IGNORED_RANGE",name:"Ignored Range"},issueType:"ignoredRange",description:"",isPremium:!1},contextForSureMatch:0,message:"This text is in a different language than the rest of the text.",shortMessage:"Different language: "+r.language.code,replacements:[]};t.push(i)})}static async detectLanguage(e,t,r){e=this._prepareText(e);const s=Boolean(r.adapter);if(!e.trim()||t||s)return{language:t,errors:[],premiumErrors:[],pickyErrors:[],premiumPickyErrors:[]};this._abortLanguageDetectionRequest(r.instanceId),this._languageDetectionAbortControllers.set(r.instanceId,new AbortController),this._useFallbackServerForLanguageDetection&&Date.now()-this._mainServerUnavailabilityTimeStamp>=c&&(this._useFallbackServerForLanguageDetection=!1);const n=e.substr(0,1e3).normalize(),i=this._getServerFullUrl(r,!1),a={method:"post",mode:"cors",credentials:"omit",body:this._getTextLevelRequestData(n,t,r),headers:this._getHeaders(r),signal:this._languageDetectionAbortControllers.get(r.instanceId).signal};return this._sendRequest(i,a).then(e=>({language:{code:e.language.code,name:e.language.name},errors:[],premiumErrors:[],premiumPickyErrors:[],pickyErrors:[]})).catch(s=>{if(this._isConnectionOrServerIssue(s)){this._abortLanguageDetectionRequest(r.instanceId);if((!r.apiServerUrl||this._isLanguageToolServer(r.apiServerUrl))&&!this._useFallbackServerForLanguageDetection)return this._useFallbackServerForLanguageDetection=!0,this._mainServerUnavailabilityTimeStamp=Date.now(),this.detectLanguage(e,t,r)}throw s})}static _isLanguageToolServer(e){return!!e&&(e.includes("api.languagetool.org")||e.includes("languagetool.org/api")||e.includes("api.languagetoolplus.com"))}static checkForPaidSubscription(e,t,r,s=a){return new Promise((n,i)=>{s+=s.endsWith("/")?"check":"/check";const a=new URLSearchParams;a.append("language","en-us"),a.append("data",JSON.stringify({text:"The languagetool testrule 8634756."})),e&&t?(a.append("username",e),a.append("password",t)):e&&r&&(a.append("username",e),a.append("tokenV2",r));const o={method:"post",mode:"cors",credentials:"omit",body:a};this._sendRequest(s,o).then(e=>{const t=e.matches.some(e=>"PREMIUM_FAKE_RULE"===e.rule.id);n(t)}).catch(i)})}static addWordToDictionary(e,t){if(Boolean(t.adapter))return;const r=this.getServerBaseUrl(t),s=r.endsWith("/")?"":"/",n=new URL(r+s+"words/add");if(t.user&&"token"in t.user)n.searchParams.set("username",t.user.email),n.searchParams.set("tokenV2",t.user.token);else{if(!t.user||!("password"in t.user))return Promise.reject(new Error("Not logged-in for adding words to dictionary"));n.searchParams.set("username",t.user.email),n.searchParams.set("password",t.user.password)}return n.searchParams.set("word",e.trim()),fetch(n.toString(),{method:"POST"}).then(e=>e.ok?Promise.resolve():Promise.reject(new Error(`Status: ${e.status}`)))}static getLanguageVariant(t,r){if("en"===(t=t.toLowerCase()))return r.languageVariants.en||"en-us";if("de"===t)return r.languageVariants.de||"de-de";if("pt"===t)return r.languageVariants.pt||"pt-pt";if("ca"===t)return r.languageVariants.ca||"ca-es";return n.get(e.SUPPORTED_LANGUAGES).find(e=>e===t||e.startsWith(t+"-"))||t}static check(e,t,r,s,n,i,a,o,c){return"client"===o?this.checkWithClientLanguageDetection(e,t,r,s,n,i,a,c):this.checkWithServerLanguageDetection(e,t,r,s,n,i,a)}static async checkWithClientLanguageDetection(e,t,r,s,n,i,a,o){if(!t){let c=null,l=null;try{c=await Ct.detect(e,r.preferredLanguages,r.forcePreferredLanguages)}catch(e){l=e.message}if(!c)return o&&o(l||"Could not detect language"),this.checkWithServerLanguageDetection(e,t,r,s,n,i,a);if(t={code:this.getLanguageVariant(c.language,r),name:""},!this.isSupportedLanguage(t.code))return{textLevelResult:{...this.EMPTY_ERRORS_RESPONSE,language:{code:"zz",name:"NoopLanguage"}},paragraphLevelResult:{...this.EMPTY_ERRORS_RESPONSE,sentenceRanges:[],isIncompleteResult:!1,areErrorsSuppressed:!1,language:{code:"zz",name:"NoopLanguage"}}}}const c=[];r.skipTextLevelCheck?c.push(Promise.resolve({...this.EMPTY_ERRORS_RESPONSE,language:t})):c.push(It.checkTextLevel(e,t,r)),c.push(It.checkParagraphLevel(s,t,r,e,n,i,a));const[l,u]=await Promise.all(c);return l.language&&(l.language.detectedLanguage={...t,source:"client"}),{textLevelResult:l,paragraphLevelResult:u}}static isSupportedLanguage(t){return n.get(e.SUPPORTED_LANGUAGES).some(e=>e===t.toLowerCase())}static async checkWithServerLanguageDetection(e,t,r,s,n,i,a){const o=[r.skipTextLevelCheck?It.detectLanguage(e,t,r):It.checkTextLevel(e,t,r),It.checkParagraphLevel(s,t,r,e,n,i,a)],[c,l]=await Promise.all(o);return c.language?.detectedLanguage&&(c.language.detectedLanguage.source="server"),{textLevelResult:c,paragraphLevelResult:l}}}It.SPELLING_RULES_ID=["SPELLER_RULE","MORFOLOGIK_RULE","HUNSPELL","SPELLING_RULE","ORTHOGRAPHY"],It.EMPTY_ERRORS_RESPONSE={errors:[],pickyErrors:[],premiumErrors:[],premiumPickyErrors:[]},It.STYLE_ISSUE_TYPES=["style","locale-violation","register"],It.EMAIL_SIGNATURE_SEPARATOR_REGEXP=/^[‐|\-]{2,}|[‐|\-]{2,}$/,It.ONLY_NUMBERS_REGEXP=/^[0-9]+$/,It.COLON_WHITESPACE_REGEXP=/^[;:]\s/,It.ONE_LETTER_AT_END_REGEXP=/(\s|^|\()[a-z]\.?\s?$/i,It.NUMBER_WITH_DOT_AT_END_REGEXP=/\d\.?\s?$/,It.NUMBER_WITH_PARENTHESIS_AT_END_REGEXP=/\d\.?\)\s$/,It.PUNCTUATION_AT_END=/(\.|\!)$/,It.BULLET_POINT_REGEXP=/(\u25b6\ufe0e|\u25BA|\*|-|–|\u2606|\u2605|\u25cf|\u2022|\u25e6|\u27A4|\u2714)\s+$/,It.LOWERCASE_REGEXP=/[a-z]/,It.DOT_WITH_PREFIX_REGEXP=/\w\.$/,It.SLASH_AT_END_REGEXP=/(\/|\\)$/,It.AT_LEAST_TWO_LETTERS_AT_END_REGEXP=/[a-z]{2}$/i,It.SLASH_AT_BEGINNING_REGEXP=/^(\/|\\)/,It.PUNCTUATION_AT_BEGINNING_REGEXP=/^\s?[\.\!\?,:…]/,It.PUNCTUATION_SPACE_AT_END_REGEXP=/[\.…\?\!]\s+/,It.MARKDOWN_HEADLINE_REGEXP=/^#{1,6}\s/m,It.MARKDOWN_INLINE_FORMAT_AT_BEGINNING_REGEXP=/^[\*\~\_\^\+\%\@]/m,It.WIKI_MARKUP_AT_END_REGEXP=/\[\[[a-z]+$/,It.PIPE_AT_END_REGEXP=/\|\s+$/,It.MENTION_SYMBOL_AT_BEGINNING_REGEXP=/@[a-z\.\-]*$/i,It.HASH_SYMBOL_AT_BEGINNING_REGEXP=/#[a-z\.\-]*$/i,It.EMOJI_SENTENCE_START_REGEXP=/(\.|!|\?|^)\s?(\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff])\s+/,It.ABBREVIATION_AT_END_REGEXP=/(\s|\(|^)[A-Z]\.$/,It.NET_AT_BEGINNING_REGEXP=/^net\b/i,It.SINGLE_UPPERCASE_LETTER_REGEXP=/^[A-Z]$/,It.NON_ALPHANUMERIC_AT_BEGINNING_REGEXP=/^[^a-z0-9äöüßáàâéèêíìîóòôúùû\.\?\!,\:\;¿¡]+/i,It.NON_ALPHANUMERIC_AT_END_REGEXP=/[^a-z0-9äöüßáàâéèêíìîóòôúùû\.\?\!,\:\;¿¡]+$/i,It.HTML_ENTITIES=["amp","nbsp","gt","lt","bull","euro","copy","laquo","raquo","hellip","middot"],It.HTML_ENTITIES_WITH_AND=It.HTML_ENTITIES.map(e=>`&${e}`),It.WAVY_DASH_REGEXP=/^\u3030+$/,It.INVISIBLE_PHRASE_REGEXP=/^[\u2063\uFEFF]+$/,It.INVISIBLE_CHARS_REGEXP=/[\u2063\uFEFF]/g,It.ZWNJ_REGEXP=/\u200B|\u200C/g,It.ZWS="\ufeff",It.PREVENT_MID_SENTENCE_CAPITALIZATION=/[\wáàâóòìíéèùúâôîêûäöüß,\)][\u0020\u00A0\uFEFF]*\n\n\n?[\u0020\u00A0\uFEFF"„»«“‘]*$/,It.PREVENT_MID_SENTENCE_PUNCTUATION=/^[\u0020\u00A0\uFEFF]*\n\n\n?[a-záàâóòìíéèùúâôîêûäöüß,\)]/,It.COMMON_TLDS=["com","co","org","net","de","info","biz","es","fr","be","in","gov","nl","ca","com.br","br","at","us","au","ru","pl","ly","it","cat","edu","jp","ko","cn","se","no","mil","ch","dk","com.mx","mx","eu","co.uk","uk","ir","cz","ua","kr","gr","tw","nz","co.nz","za","ro","vn","io","tr","me","fi","tv","xyz","pt","ie","app"],It.COMMON_TLD_WITH_DOT_REGEXPS=It.COMMON_TLDS.map(e=>new RegExp(`^\\.${e.replace(".","\\.")}\\b`,"i")),It.COMMON_FILE_TYPES=["jpeg","jpg","gif","png","bmp","indd","stl","svg","ai","sketch","ico","ics","env","amf","ps","psd","tiff","tif","mp3","wav","midi","mid","aif","mpa","ogg","wma","wpl","cda","7z","arj","deb","pkg","plist","rar","rpm","tar.gz","tar","zip","bin","dmg","iso","toast","vcd","csv","dat","db","log","mdb","sav","sql","xml","apk","bat","bin","cgi","com","exe","gadget","jar","py","js","jsx","json","wsf","ts","tsx","fnt","fon","otf","ttf","woff","woff2","rb","java","php","html","asp","aspx","cer","cfm","cgi","pl","css","scss","htm","jsp","part","rss","xhtml","key","odp","pps","ppt","pptx","class","cpp","cs","h","sh","swift","vb","ods","odt","xlr","xls","xlsx","xlt","xltx","bak","cab","cfg","cpl","cur","dll","dmp","msi","ini","tmp","3g2","3gp","avi","flv","h264","m4v","mkv","mov","mp4","mpg","mpeg","rm","swf","vob","wmv","doc","docx","dot","dotx","pdf","rtf","srx","text","tex","wks","wps","wpd","txt","yaml","yml","csl","md","adm"],It.COMMON_FILE_TYPE_WITH_DOT_REGEXPS=It.COMMON_FILE_TYPES.map(e=>new RegExp(`^[\\wáàâóòìíéèùúâôîêûäöüß\\-\\.\\(\\)]*?\\.${e}\\b`,"i")),It.FILE_TYPE_AT_BEGINNING_REGEXP=new RegExp(`(${It.COMMON_FILE_TYPES.join("|")})\b`,"i"),It.HIGH_LEVEL_GOALS=[{id:"professional",tags:["clarity","confident","formal","general","positive","professional"]},{id:"scientific",tags:["academic","clarity","formal","general","objective","povrem","scientific"]},{id:"persuasive",tags:["clarity","confident","general","persuasive","positive"]},{id:"personal",tags:["clarity","general","informal","positive","povadd"]},{id:"creative",tags:["clarity","general"]}],It._textLevelAbortControllers=new Map,It._paragraphLevelAbortControllers=new Map,It._languageDetectionAbortControllers=new Map,It._recommendationAbortControllers=new Map,It._useFallbackServerForTextLevelRequests=!1,It._useFallbackServerForParagraphLevelRequests=!1,It._useFallbackServerForLanguageDetection=!1,It._mainServerUnavailabilityTimeStamp=0,It._checkForException=e=>e.ok?e:e.text().catch(()=>"").then(t=>{const r=t.toLowerCase();if(r.includes("too many error"))throw{reason:"TooManyErrors",status:e.status,response:t};if(413===e.status||r.includes("text exceeds the limit"))throw{reason:"TextTooLong",status:e.status,response:t};if(t.toLowerCase().includes("checking took longer than"))throw{reason:"TimeoutError",status:e.status,url:e.url?e.url.replace(/\?.*/,"?..."):"unknown",response:t};if(429===e.status)throw{reason:"TooManyRequests",status:e.status,response:t};if(403===e.status){if(r.includes("client request size limit")||r.includes("client request limit")||r.includes("ip request limit")||r.includes("ip request size limit"))throw{reason:"TooManyRequests",status:e.status,response:t};if(r.includes("authexception"))throw{reason:"InvalidCredentials",status:e.status,response:t};throw{reason:"AccessDenied",status:e.status,response:t}}if(r.includes("checking took longer than"))throw{reason:"TimeoutError",status:e.status,url:e.url?e.url.replace(/\?.*/,"?..."):"unknown",response:t};throw{reason:"UnknownError",status:e.status,response:t}});
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class Pt extends Le{static _getStringSize(...e){let t=0;for(const r of e)for(let e=0;e<r.length;e++){const s=r.charCodeAt(e);t+=s<128?1:s<2048?2:s<65536?3:s<1<<21?4:s<1<<26?5:s<1<<31?6:Number.NaN}return t}static _getStorage(){const e=De();return this._shouldUseSyncedStorage()?e.storage.sync:e.storage.local}static _getLocalStorage(){return De().storage.local}static _shouldUseSyncedStorage(){return De().storage.sync&&!R.isFirefox()}static _getManagedStorage(){return De().storage.managed}constructor(){super(),this._onStoredDataChanged=(e,t)=>{const r=["username","token"].filter(t=>e.hasOwnProperty(t)&&e[t].oldValue!==e[t].newValue),s=[],n=[];for(const e of Pt.SETTINGS_CHUNKED_PROPERTIES)s.push(!1),n.push(new RegExp(`^${e}(_\\d+)?$`));let i=!1,a=!1,o=!1,c=!1;for(const r in e)if("managed"!==t){"local"===t&&(this._copyPasteInfo&&Le.DEFAULT_COPY_PASTE_INFO.hasOwnProperty(r)&&(this._copyPasteInfo[r]=e[r].newValue),this._trialSettings&&Le.DEFAULT_TRIAL_SETTINGS.hasOwnProperty(r)&&(this._trialSettings[r]=e[r].newValue));for(let e=0;e<Pt.SETTINGS_CHUNKED_PROPERTIES.length;e++)if(n[e].test(r)){s[e]=!0;break}if(this._settings&&Le.DEFAULT_SETTINGS.hasOwnProperty(r)&&!Pt.SETTINGS_CHUNKED_PROPERTIES.includes(r)){const t=!("oldValue"in e[r])&&Le.DEFAULT_SETTINGS[r]===e[r].newValue,s=e[r].oldValue!==e[r].newValue;this._settings[r]=e[r].newValue,i=!1===t&&s}this._configuration&&Le.DEFAULT_REMOTE_CONFIGURATION.hasOwnProperty(r)&&(this._configuration[r]=e[r].newValue,a=!0),this._privacySettings&&Le.DEFAULT_PRIVACY_SETTINGS.hasOwnProperty(r)&&(this._privacySettings[r]=e[r].newValue,o=!0),this._statistics&&Le.DEFAULT_STATISTICS.hasOwnProperty(r)&&(this._statistics[r]=e[r].newValue),this._uiState&&Le.DEFAULT_UI_STATE.hasOwnProperty(r)&&(this._uiState[r]=e[r].newValue,c=!0),this._testFlags&&Le.DEFAULT_TEST_FLAGS.hasOwnProperty(r)&&(this._testFlags[r]=e[r].newValue),"uniqueId"===r&&(this._uniqueId=e[r].newValue)}else this._managedSettings&&Le.DEFAULT_MANAGED_SETTINGS.hasOwnProperty(r)&&(this._managedSettings[r]=e[r].newValue);i&&(this._ensureIgnoredRuleTurnOffDate(),this._eventBus.fire(Le.eventNames.settingsChanged,e)),r.length&&this._eventBus.fire(Le.eventNames.userCredentialsChanged,r.reduce((t,r)=>({...t,[r]:e[r]}),{})),s.some(e=>e)&&this._storage.get().then(e=>{if(!this._settings)return;const t={};for(let r=0;r<Pt.SETTINGS_CHUNKED_PROPERTIES.length;r++)if(s[r]){const s=Pt.SETTINGS_CHUNKED_PROPERTIES[r];if(!Pt._isSettingsPropertyArrayName(s))continue;const n=this._joinChunks(e,s);t[s]={oldValue:this._settings[s],newValue:n},this._settings[s]=n}this._ensureIgnoredRuleTurnOffDate(),this._eventBus.fire(Le.eventNames.settingsChanged,t)}),a&&this._eventBus.fire(Le.eventNames.configurationChanged,e),o&&this._eventBus.fire(Le.eventNames.privacySettingsChanged,e),c&&this._eventBus.fire(Le.eventNames.uiStateChanged,e)},this._storage=Pt._getStorage(),this._managedStorage=Pt._getManagedStorage(),this._localStorage=Pt._getLocalStorage(),this._isInitialized=!1,this._loadData(),De().storage.onChanged.addListener(this._onStoredDataChanged)}_splitInChunks(e,t,r=this._storage.QUOTA_BYTES_PER_ITEM){const s=e[t];if(!s)return;let n=0,i=[],a=Pt._getStringSize(t,"[]");for(;s.length;){const o=s.shift(),c=JSON.stringify(o),l=Pt._getStringSize(`,${c}`);if(a+l<=r)i.push(o),a+=l;else{e[0===n?t:`${t}_${n}`]=i,n++,i=[o],a=Pt._getStringSize(`${t}_${n}`,`[${c}]`)}if(0===s.length){e[0===n?t:`${t}_${n}`]=i}}e[`${t}_${n+1}`]=[]}_joinChunks(e,t,r=this._storage.MAX_ITEMS){let s=e[t]||[];for(let n=1;n<r;n++){const r=e[`${t}_${n}`];if(void 0===r||0===r.length)break;s=s.concat(r)}return s}_loadData(){const e=this._storage.get().then(e=>{const t=Le._combineObjects(Le.DEFAULT_SETTINGS,e);for(const r of Pt.SETTINGS_CHUNKED_PROPERTIES)t[r]=this._joinChunks(e,r);for(const e of t.ignoredRules){if(void 0===e.description){const t=Le.DEFAULT_SETTINGS.ignoredRules.find(t=>t.id===e.id&&t.language===e.language);e.description=t?t.description:""}if(void 0===e.turnOffDate){const t=Le.DEFAULT_SETTINGS.ignoredRules.some(t=>t.id===e.id&&t.language===e.language);e.turnOffDate=t?null:new Date(2019,9,1)}else null!==e.turnOffDate&&(e.turnOffDate=new Date(e.turnOffDate))}t.disabledDomains=t.disabledDomains.map(e=>q(e,"")).filter(e=>e),t.ignoreCheckOnDomains=t.ignoreCheckOnDomains.map(e=>q(e,"")).filter(e=>e),t.autoCheckOnDomains=t.autoCheckOnDomains.map(e=>q(e,"")).filter(e=>e),this._settings=t,this._configuration=Le._combineObjects(Le.DEFAULT_REMOTE_CONFIGURATION,e),this._privacySettings=Le._combineObjects(Le.DEFAULT_PRIVACY_SETTINGS,e),this._statistics=Le._combineObjects(Le.DEFAULT_STATISTICS,e),this._uiState=Le._combineObjects(Le.DEFAULT_UI_STATE,e),this._testFlags=Le._combineObjects(Le.DEFAULT_TEST_FLAGS,e),e.uniqueId?this._uniqueId=e.uniqueId:(this._uniqueId=Le._generateUniqueId(),this._storage.set({uniqueId:this._uniqueId})),this._statistics.firstVisit||this.updateStatistics({firstVisit:Math.round(Date.now()/1e3)})}),t=this._managedStorage.get().then(e=>{this._managedSettings=Le._combineObjects(Le.DEFAULT_MANAGED_SETTINGS,e)}).catch(()=>{this._managedSettings=Le._combineObjects(Le.DEFAULT_MANAGED_SETTINGS,{})}),r=this._localStorage.get().then(e=>{this._trialSettings=Le._combineObjects(Le.DEFAULT_TRIAL_SETTINGS,e),this._copyPasteInfo=Le._combineObjects(Le.DEFAULT_COPY_PASTE_INFO,e)});Promise.all([e,t,r]).then(()=>{this._isInitialized=!0,this._onReadyCallbacks.forEach(e=>e(this)),this._onReadyCallbacks=[]})}_ensureIgnoredRuleTurnOffDate(){if(this._settings)for(const e of this._settings.ignoredRules)e.turnOffDate&&"string"==typeof e.turnOffDate&&(e.turnOffDate=new Date(e.turnOffDate))}isReady(){return this._isInitialized}onReady(e){this._isInitialized?e(this):this._onReadyCallbacks.push(e)}getUniqueId(){return this._uniqueId}getSettings(){return $(this._settings)}updateSettings(e){for(const t in e)if(!Le.DEFAULT_SETTINGS.hasOwnProperty(t))throw new Error(`Unknown setting ${t}`);if(Object.assign(this._settings||{},$(e)),void 0!==e.ignoredRules)for(const t of e.ignoredRules)t.turnOffDate&&"string"!=typeof t.turnOffDate&&(t.turnOffDate=t.turnOffDate.toISOString());if(!R.isFirefox()&&!R.isThunderbird()&&!R.isSafari()){e=$(e);for(let t=0;t<Pt.SETTINGS_CHUNKED_PROPERTIES.length;t++){const r=Pt.SETTINGS_CHUNKED_PROPERTIES[t];void 0!==e[r]&&Pt._isSettingsPropertyArrayName(r)&&this._splitInChunks(e,r)}}return this._storage.set(e)}getCheckSettings(e,t){if(!this._settings)return{isDomainDisabled:!1,isEditorGroupDisabled:!1,isAutoCheckEnabled:!0,isRecommendationsDisabled:!0};if(e===De().runtime.id)return{isDomainDisabled:!1,isEditorGroupDisabled:!1,isAutoCheckEnabled:!0,isRecommendationsDisabled:!0};const r=(this._settings.disabledEditorGroups||[]).some(r=>Y(r.domain)===Y(e)&&r.editorGroupId===t),s=Le._isListContainsDomain(this._settings.disabledDomains,e),n=(i=this._managedSettings?.allowedURLs||[]).length>0&&i.every(e=>He(e));var i;const a=!0;if(this._settings.autoCheck&&!n){return{isDomainDisabled:s,isEditorGroupDisabled:r,isAutoCheckEnabled:!Le._isListContainsDomain(this._settings.ignoreCheckOnDomains,e),isRecommendationsDisabled:a}}return{isDomainDisabled:s,isEditorGroupDisabled:r,isAutoCheckEnabled:Le._isListContainsDomain([...this._settings.autoCheckOnDomains,...je(this._managedSettings?.allowedURLs||[])],e),isRecommendationsDisabled:a}}hasLanguageToolAccount(){return Boolean(this._settings&&this._settings.username&&!this.hasCustomServer())}hasCustomServer(){return this._managedSettings&&this._managedSettings.apiServerUrl?this._managedSettings.apiServerUrl!==Le.DEFAULT_SETTINGS.apiServerUrl:Boolean(this._settings&&this._settings.apiServerUrl&&this._settings.apiServerUrl.trim()&&this._settings.apiServerUrl!==i&&this._settings.apiServerUrl!==a)}getCustomServerUrl(){if(this.hasCustomServer())return this._managedSettings.apiServerUrl||this._settings.apiServerUrl}hasCustomLogin(){return!!this._managedSettings?.loginUrl}getManagedSettings(){return j(this._managedSettings)}getConfiguration(){return j(this._configuration)}updateRemoteConfiguration(e){for(const t in e)if(!Le.DEFAULT_REMOTE_CONFIGURATION.hasOwnProperty(t))throw new Error(`Unknown configuration ${t}`);return this._configuration&&this._isInitialized&&!this._hasAnythingChanged(this._configuration,e)?Promise.resolve():(Object.assign(this._configuration||{},j(e)),this._storage.set(e))}isDomainSupported(e){return!this._configuration||!this._configuration.unsupportedDomains.includes("*")&&!Le._isListContainsDomain(this._configuration.unsupportedDomains,e)}isDomainExcludedByGroupPolicy(e){const t=We(this._managedSettings?.allowedURLs||[]);return!!t.length&&!1===K(t,e)}getPrivacySettings(){return j(this._privacySettings)}updatePrivacySettings(e){for(const t in e)if(!Le.DEFAULT_PRIVACY_SETTINGS.hasOwnProperty(t))throw new Error(`Unknown privacy setting ${t}`);return this._privacySettings&&this._isInitialized&&!this._hasAnythingChanged(this._privacySettings,e)?Promise.resolve():(Object.assign(this._privacySettings||{},e),this._storage.set(e))}getStatistics(){return $(this._statistics)}updateStatistics(e){for(const t in e)if(!Le.DEFAULT_STATISTICS.hasOwnProperty(t))throw new Error(`Unknown privacy setting ${t}`);return this._statistics&&this._isInitialized&&!this._hasAnythingChanged(this._statistics,e)?Promise.resolve():(Object.assign(this._statistics||{},e),this._storage.set(e))}getUIState(){return $(this._uiState)}updateUIState(e){for(const t in e)if(!Le.DEFAULT_UI_STATE.hasOwnProperty(t))throw new Error(`Unknown UI state ${t}`);return this._uiState&&this._isInitialized&&!this._hasAnythingChanged(this._uiState,e)?Promise.resolve():(Object.assign(this._uiState||{},e),this._storage.set(e))}_hasAnythingChanged(e,t){let r=!1;for(const s in t)if(t.hasOwnProperty(s)&&(t[s]!==e[s]||"object"==typeof t[s])){r=!0;break}return r}checkForPaidSubscription(){return new Promise((e,t)=>{this.onReady(()=>{const{username:r,password:s,token:n}=this.getSettings();let i;this.hasCustomServer()&&(i=this.getCustomServerUrl()),It.checkForPaidSubscription(r,s,n,i).then(t=>{t?(this.enablePaidSubscription(),this.grantUnlimitedRephrasings()):(this.disablePaidSubscription(),this.restrictRephrasings()),e(t)}).catch(t)})})}getTestFlags(){return j(this._testFlags)}updateTestFlags(e){for(const t in e)if(!Le.DEFAULT_TEST_FLAGS.hasOwnProperty(t))throw new Error(`Unknown test flag ${t}`);return Object.assign(this._testFlags||{},e),this._storage.set(e)}getActiveCoupon(){const{hasPaidSubscription:e}=this.getUIState();if(e)return null;const{geoIpCountry:t}=this.getSettings();return this._getDefaultCoupon(t)}_getDefaultCoupon(e){for(const t in g)if(g.hasOwnProperty(t)&&g[t].countries.includes(e))return{code:t,percent:g[t].percent};return null}isRelevantForChangelogCoupon(){return{status:!1,reason:-1}}startChangelogCoupon(){if(!this.canStartChangelogCoupon())return;const e=Date.now();var t,r;this.updateUIState({changelogNov2024Coupon:"2024-NOV-CHANGELOG",changelogNov2024CountdownEnd:e+1656e5+(t=0,r=72e5,t=Math.ceil(t),r=Math.floor(r),Math.floor(Math.random()*(r-t+1))+t)})}isChangelogCouponRunning(){if(!this.isRelevantForChangelogCoupon().status)return!1;const{changelogNov2024CountdownEnd:e}=this.getUIState();return Boolean(e&&e>Date.now())}canStartChangelogCoupon(){if(!this.isRelevantForChangelogCoupon().status)return!1;const e=Date.now(),{changelogNov2024CountdownEnd:t}=this.getUIState();return!t||e-t>7776e6}getTrialSettings(){return $(this._trialSettings)}updateTrialSettings(e){for(const t in e)if(!Le.DEFAULT_TRIAL_SETTINGS.hasOwnProperty(t))throw new Error(`Unknown trial setting ${t}`);return this._trialSettings&&this._isInitialized&&!this._hasAnythingChanged(this._trialSettings,e)?Promise.resolve():(Object.assign(this._trialSettings||{},e),this._localStorage.set(e))}getCopyPasteInfo(){return $(this._copyPasteInfo)}updateCopyPasteInfo(e){for(const t in e)if(!Le.DEFAULT_COPY_PASTE_INFO.hasOwnProperty(t))throw new Error(`Unknown copy/paste info ${t}`);return this._copyPasteInfo&&this._isInitialized&&!this._hasAnythingChanged(this._copyPasteInfo,e)?Promise.resolve():(Object.assign(this._copyPasteInfo||{},e),this._localStorage.set(e))}destroy(){this._isInitialized=!1,super.destroy();try{De().storage.onChanged.removeListener(this._onStoredDataChanged)}catch(e){}}}Pt.SETTINGS_CHUNKED_PROPERTIES=["dictionary","ignoredRules","disabledDomains","disabledEditorGroups","ignoreCheckOnDomains","autoCheckOnDomains"],Pt._isSettingsPropertyArrayName=e=>Pt.SETTINGS_CHUNKED_PROPERTIES.includes(e);const Lt=class{static init(e){this._instance=e,e.initialize()}static initialize(){this._instance.initialize()}static trackPageView(e,t){this._instance.trackPageView(e,t)}static trackDisabledRule(e,t,r,s){return this._instance.trackDisabledRule(e,t,r,s)}static trackDictionaryEvent(e,t,r){return this._instance.trackDictionaryEvent(e,t,r)}static trackEvent(e,t,r,s,n){this._instance.trackEvent(e,t,r,s,n)}static trackSampledEvent(e,t,r,s=100){Math.random()*s<1&&(s>1&&(t+=`:sampling_${s}`),this.trackEvent(e,t,r))}static trackInstall(){this._instance.trackInstall()}static trackActivity(){this._instance.trackActivity()}static trackUserActivity(){this._instance.trackUserActivity()}static trackError(e,t,r){this._instance.trackError(e,t,r)}static trackStat(e,t){this._instance.trackStat(e,t)}static trackPerformanceMetrics(e){this._instance.trackPerformanceMetrics(e)}static trackUserTextChangeMetrics(e){this._instance.trackUserTextChangeMetrics(e)}static trackHealthMetrics(e){this._instance.trackHealthMetrics(e)}static trackFixAllMetrics(e){this._instance.trackFixAllMetrics(e)}static trackUnderlineMismatchMetrics(e){this._instance.trackUnderlineMismatchMetrics(e)}static trackEmptyTextDiffMetrics(e){this._instance.trackEmptyTextDiffMetrics(e)}};_e.init(new
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class extends pe{addEventListener(e,t){}setLocale(e){}getMessage(e,t){return De().i18n.getMessage?De().i18n.getMessage(e,t):e}}),be.init(()=>new Pt),ge.init(new
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class extends ue{constructor(){super(...arguments),this._isProductionEnvironmentCached=null}incrementalCheck(e,t,r,s,n){throw new Error("Method not implemented.")}isProductionEnvironment(){if(null===this._isProductionEnvironmentCached){if(R.isSafari())return!0;R.isFirefox()||R.isThunderbird()?this._isProductionEnvironmentCached=!De().runtime.id.match("languagetool.dev"):this._isProductionEnvironmentCached="update_url"in De().runtime.getManifest()}return this._isProductionEnvironmentCached}isRuntimeConnected(){try{return De().runtime.getManifest(),!0}catch(e){return!1}}getVersion(){if(this.isRuntimeConnected()){const e=De().runtime.getManifest();return e&&e.version?e.version:"unknown"}return"unknown"}getTrackingId(){return R.isSafari()?"13":R.isThunderbird()?"22":"12"}shouldTrack(){return"1"!==navigator.doNotTrack&&!R.isFirefox()}getPinnedState(){const e=De();return e.action&&"function"==typeof e.action.getUserSettings?e.action.getUserSettings().then(e=>Promise.resolve("boolean"==typeof e.isOnToolbar?e.isOnToolbar:null)).catch(()=>Promise.resolve(null)):Promise.resolve(null)}getType(){return"extension"}getBeforeUnloadEventName(){return"pagehide"}getURL(e){return De().runtime.getURL(e)}getUILanguageCode(){return De().i18n.getUILanguage?De().i18n.getUILanguage():navigator.language}openWindow(e){De().runtime.sendMessage({command:"OPEN_URL",url:e})}injectExecutor(){return new Promise((e,t)=>{if(R.isThunderbird())return e();const r=setTimeout(()=>{t()},2e3),s=function(){const e=document.createElement("script");return e.setAttribute("data-cookieconsent","ignore"),e.setAttribute("data-uc-allowed","true"),e}();s.src=De().runtime.getURL("/content/executor.js"),s.async=!0,s.setAttribute("fetchpriority","low"),s.onload=function(){s.remove(),clearTimeout(r),e()},s.onerror=function(){s.remove(),clearTimeout(r),t()},(document.head||document.documentElement).appendChild(s)})}destroyExecutor(){ke(document,"lt-execute-destroy")}addEventListener(){}updateSentenceRanges(){}executeScript(e,t){const r=new self.Object;r.code=t,ke(e,"lt-execute-code",r)}linkInputAreaProperties(e){ke(e,"lt-execute-link-properties")}ping(){return new Promise((e,t)=>{const r=self.setTimeout(()=>t("timeout"),5e3);De().runtime.sendMessage({command:"BACKGROUND_PING"}).then(s=>{self.clearTimeout(r),"success"===s?e():t("unknown")}).catch(()=>{self.clearTimeout(r),t("error")})})}canLoadContentScripts(e){return"css"===e||2===De().runtime.getManifest().manifest_version}loadContentScripts(e,t){return this.isRuntimeConnected()&&this.canLoadContentScripts(t)?(De().runtime.getManifest().content_scripts.forEach(r=>{if("js"===t&&r.js){const t=r.js.map(e=>{const t=this.getURL(e);return fetch(t).then(e=>e.text())});return Promise.all(t).then(t=>{const r=t.join("\n");if("eval"in e&&"function"==typeof e.eval){if("safari"in e)try{e.eval("window.safari = window.safari || window.parent.safari;")}catch{}e.eval(r)}})}if("css"===t&&r.css)return this.loadStylesheets(e,r.css)}),Promise.resolve()):Promise.reject()}loadStylesheets(e,t){const r=(Array.isArray(t)?t.map(e=>[null,e]):Object.entries(t)).map(([e,t])=>{const r=this.getURL(t);return fetch(r).then(e=>e.text()).then(t=>[e,t])});return Promise.all(r).then(t=>{t.forEach(([t,r])=>{const s=e.document.createElement("style");s.textContent=r,t&&s.setAttribute("id",t),(e.document.head||e.document.documentElement).appendChild(s)})})}injectShadowStyles(e){!function(e,t){const r=t||"content/styles/shadow.css",s=De().runtime.getURL(r);if(!e.querySelector(`[href="${s}"]`)){const t=document.createElement("link");t.href=s,t.rel="stylesheet",e.append(t)}}(e)}initializeLTAssistant(e,t={}){return Promise.resolve()}getPreferredLanguages(){return De().runtime.sendMessage({command:"GET_PREFERRED_LANGUAGES"})}startDictionarySync(){return De().runtime.sendMessage({command:"START_DICTIONARY_SYNC"})}updateDictionary(){return De().runtime.sendMessage({command:"UPDATE_DICTIONARY"})}addWordToDictionary(e){const t={command:"ADD_WORD_TO_DICTIONARY",word:e};return De().runtime.sendMessage(t)}addWordsToDictionary(e){const t={command:"BATCH_ADD_WORDS_TO_DICTIONARY",words:e};return De().runtime.sendMessage(t)}removeWordFromDictionary(e){const t={command:"REMOVE_WORD_FROM_DICTIONARY",word:e};return De().runtime.sendMessage(t)}clearDictionary(){return De().runtime.sendMessage({command:"CLEAR_DICTIONARY"})}loadSynonyms(e,t,r){const s={command:"LOAD_SYNONYMS",wordContext:e,language:t,motherTongue:r};return De().runtime.sendMessage(s)}abortSynonymsRequest(){return De().runtime.sendMessage({command:"ABORT_SYNONYMS_REQUEST"})}loadPhrases(e,t,r,s,n,i){const a={command:"LOAD_PHRASES",uuid:e,phrase:t,language:r,inhouseOnly:s,user:n,mode:i};return De().runtime.sendMessage(a)}abortPhraseRequests(e){const t={command:"ABORT_PHRASE_REQUESTS",type:e};return De().runtime.sendMessage(t)}abortTranslateRequest(e){const t={command:"ABORT_TRANSLATE_REQUESTS",abortId:e};return De().runtime.sendMessage(t)}initializeUserActivity(e){const t={command:"INITIALIZE_USER_ACTIVITY",data:e};return De().runtime.sendMessage(t)}sendUserActivityPings(e){const t={command:"SEND_USER_ACTIVITY_PINGS",uuids:e};return De().runtime.sendMessage(t)}updateUserActivityTextStatistics(e,t){const r={command:"UPDATE_USER_ACTIVITY_TEXT_STATISTICS",uuid:e,stats:t};return De().runtime.sendMessage(r)}updateUserActivityAppliedSuggestions(e,t,r){const s={command:"UPDATE_USER_ACTIVITY_APPLIED_SUGGESTIONS",isPremium:r,type:t,uuid:e};return De().runtime.sendMessage(s)}updateUserActivityAppliedRewritings(e){const t={command:"UPDATE_USER_ACTIVITY_APPLIED_REWRITINGS",uuid:e};return De().runtime.sendMessage(t)}updateUserActivityMeta(e,t){const r={command:"UPDATE_USER_ACTIVITY_META",uuid:e,meta:t};return De().runtime.sendMessage(r)}sendUserActivity(e){const t={command:"SEND_USER_ACTIVITY",uuid:e};return De().runtime.sendMessage(t)}destroyUserActivity(e){const t={command:"DESTROY_USER_ACTIVITY",uuid:e};return De().runtime.sendMessage(t)}loadSplitSentence(e,t,r,s,n){const i={command:"LOAD_SPLIT_SENTENCE",uuid:e,phrase:t,language:r,inhouseOnly:s,user:n};return De().runtime.sendMessage(i)}trackEvent(e,t){const r={command:"TRACK_EVENT",action:e,label:t};return De().runtime.sendMessage(r)}pageLoaded(e,t,r,s,n){const i={command:"PAGE_LOADED",enabled:e,supported:t,beta:r,unsupportedMessage:s,isDarkMode:n};return De().runtime.sendMessage(i)}ltAssistantStatusChanged(e,t){const r={command:"LTASSISTANT_STATUS_CHANGED",tabId:"number"==typeof e?e:void 0,enabled:("object"==typeof e?e:t).enabled};return De().runtime.sendMessage(r)}createWritingSession(e,t){return De().runtime.sendMessage({command:"INTIALIZE_WRITING_SESSION",payload:{hostUrl:e,uniqueIdentifier:t}})}check(e,t,r,s,n){const i={command:"CHECK_TEXT",text:t,changedParagraphs:r,language:e.language,forceLanguage:e.forceLanguage,metaData:s,options:n,changedContent:[]};return De().runtime.sendMessage(i)}fetchRecommendationForSentence(e){const t={command:"FETCH_SENTENCE_RECOMMENDATION",...e};return De().runtime.sendMessage(t)}unlockRecommendation(e){const t={command:"UNLOCK_RECOMMENDATION",...e};return De().runtime.sendMessage(t)}translateText(e){const t={command:"TRANSLATE_TEXT",...e};return De().runtime.sendMessage(t)}isOptionsPageSupported(){return!0}openOptionsPage(e,t){const r={command:"OPEN_OPTIONS",target:e,ref:t};return De().runtime.sendMessage(r)}isFeedbackFormSupported(){return!0}openFeedbackForm(e,t="",r=""){const s={command:"OPEN_FEEDBACK_FORM",url:e,title:t,html:r};return De().runtime.sendMessage(s)}openPremiumPage(e,t=0,r=0,s=0,n="",i){const a={command:"OPEN_PREMIUM_PAGE",campaign:e,hiddenGrammarMatches:t,hiddenStyleMatches:r,hiddenPunctuationMatches:s,historicMatches:n,textLanguage:i||void 0};return De().runtime.sendMessage(a)}updateSurroundingTextContext(e){const t={command:"UPDATE_SURROUNDING_TEXT_CONTEXT",data:e};return De().runtime.sendMessage(t)}forceSyncEditorState(e){const t={command:"FORCE_SYNC_EDITOR_STATE",data:e};return De().runtime.sendMessage(t)}checkForPaidSubscription(){return De().runtime.sendMessage({command:"CHECK_FOR_PAID_SUBSCRIPTION"})}canUseShadowDom(){return!navigator.webdriver}abortAllRequests(e){e.checkRequestController&&e.checkRequestController.abort(),e.recommendationRequestAbortController.abort&&e.recommendationRequestAbortController.abort();const t={command:"ABORT_ALL_REQUESTS",instanceId:e.id};return De().runtime.sendMessage(t)}getTermsOfServiceInfo(e){const t={command:"GET_TERMS_OF_SERVICE_INFO",version:e};return De().runtime.sendMessage(t)}acceptTermsOfService(e){const t={command:"ACCEPT_TERMS_OF_SERVICE",version:e};return De().runtime.sendMessage(t)}syncUserData(){return De().runtime.sendMessage({command:"SYNC_USER_DATA"})}}),Ne.init(),Lt.init(new
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class{constructor(){this.TRACKING_BASE_URL="https://analytics.languagetoolplus.com/matomo/piwik.php",this.TRACKING_BASE_PAGE_URL="https://fake/",this.ACTIVITY_TRACK_INTERVAL=864e5,this.PING_TRACK_INTERVAL=6048e5,this.MAX_TIME=6e4,this.THROTTLE_REQUESTS=10,this._isInitialized=!1,this._loggedErrors=null,this._errorCount=0}initialize(){if(this._isInitialized)return;this.TRACKING_SITE_ID=ge.getTrackingId(),this.VERSION=ge.getVersion(),this._storageController=be.create();const e=ge.getURL("/");self.addEventListener("error",t=>{const r=t.message,s=t.filename,n=t.lineno,i=t.error;if(!s||!s.startsWith(e))return;if("string"!=typeof r)return;if(r.includes("ResizeObserver"))return;const a=i&&function(e){if(!e.stack)return;const t=[];if(e.stack.split(/\n/).forEach(e=>{const r=e.match(/([\w_<>]+)\s+\(.+?([\w_\-]+\.(js|html))/);r&&t.push(`${r[2]}:${r[1]}`)}),!t.length){const r=e.stack.match(/([\w_\-]+\.(js|html))/);r&&t.push(r[1])}return t.join(",").substr(0,140)}(i);a?this.trackError("js",r,a):this.trackError("js",r,`${s}:${n}`)}),this._isInitialized=!0}getCustomDimensions(e){const t=this._storageController.getSettings(),r=this._storageController.getUIState(),s=this._storageController.getTestFlags(),n=this._storageController.getPrivacySettings(),i={dimension2:this.VERSION,dimension3:String(r.hasPaidSubscription),dimension4:String(Boolean(t.username&&(t.password||t.token))),dimension5:t.preferredLanguages.join(","),dimension6:String(t.hasPickyModeEnabledGlobally),dimension13:r.showRuleId?"{}":JSON.stringify(s.testGroups),dimension15:String(n.acceptedTermsOfServiceVersion||"none"),dimension16:String(t.hasLollipopEnabled),dimension17:String(Ne.getStatus())};return e?.writingGoal&&(i.dimension8=e.writingGoal),e?.errorType&&(i.dimension9=e.errorType),i}_getTrackingUrlForPageView(e,t){return e=(e=e.replace(/^(chrome|moz|safari|edge)-extension:\/\/.+?\//i,"")).replace(/^[a-z0-9]{8}\//i,"/"),e=`${this.TRACKING_BASE_PAGE_URL}${e}`,new Promise((r,s)=>{this._storageController.onReady(()=>{const{firstVisit:s,sessionCount:n}=this._storageController.getStatistics(),i=this._storageController.getUniqueId(),a=new URL(this.TRACKING_BASE_URL),o=[self.screen?.width??0,self.screen?.height??0],c={idsite:this.TRACKING_SITE_ID,rec:"1",url:e,rand:String(Date.now()),apiv:"1",res:o.join("x"),_id:String(i),_idts:String(s),_idvc:String(n),...this.getCustomDimensions(t)};for(const[e,t]of Object.entries(c))a.searchParams.append(e,t);r(a.toString())})})}_getTrackingUrlForEvent(e,t,r="",s,n){return s=s||this.TRACKING_BASE_PAGE_URL,new Promise((i,a)=>{this._storageController.onReady(()=>{const{firstVisit:a,sessionCount:o}=this._storageController.getStatistics(),c=this._storageController.getUniqueId(),l=new URL(this.TRACKING_BASE_URL),u=[self.screen?.width??0,self.screen?.height??0],g={idsite:this.TRACKING_SITE_ID,rec:"1",url:s||"",action_name:t,rand:String(Date.now()),apiv:"1",res:u.join("x"),_id:c,_idts:String(a),_idvc:String(o),e_c:e,e_a:t,e_n:r??"",...this.getCustomDimensions(n)};for(const[e,t]of Object.entries(g))l.searchParams.append(e,t);i(l.toString())})})}_sendRequest(e){!ge.shouldTrack()||this._storageController.hasCustomServer()||this._storageController.hasCustomLogin()||navigator.webdriver||te(e,{mode:"no-cors",referrerPolicy:"no-referrer",keepalive:"standalone"===ge.getType()},1e4).catch(()=>null)}trackPageView(e,t){e=e||V(),this._getTrackingUrlForPageView(e,t).then(t=>{ge.isProductionEnvironment()?this._sendRequest(t):console.log("LT_Tracking Page view tracking disabled in dev mode",{pageUrl:e,trackingUrl:t})}).catch(e=>{console.log("LT could not track because:",e&&e.message)})}trackDisabledRule(e,t,r,s){if(!e.match(/^de|en|nl|es|fr|ca|pt/i))return;const n=s?h:d,i=e+":"+t,a=r,o=new URL(this.TRACKING_BASE_URL);o.searchParams.append("idsite","18"),o.searchParams.append("rec","1"),o.searchParams.append("url",this.TRACKING_BASE_PAGE_URL),o.searchParams.append("action_name",n),o.searchParams.append("rand",String(Date.now())),o.searchParams.append("apiv","1"),o.searchParams.append("_id",this._storageController.getUniqueId()),o.searchParams.append("e_c",n),o.searchParams.append("e_a",i),o.searchParams.append("e_n",r),ge.isProductionEnvironment()?this._sendRequest(o.toString()):console.log("LT_Tracking Event tracking disabled in dev mode",{actionCategory:n,action:i,actionName:a,trackingUrl:o})}trackDictionaryEvent(e,t,r){if(!e.match(/^de|en|nl|es|fr|it|pt|ru|ca|pl/i))return;const s=r?"TemporaryIgnored":"PersistentlyIgnored",n=`${e}:add_word`,i=t,a=new URL(this.TRACKING_BASE_URL);a.searchParams.append("idsite","19"),a.searchParams.append("rec","1"),a.searchParams.append("url",this.TRACKING_BASE_PAGE_URL),a.searchParams.append("action_name",s),a.searchParams.append("rand",String(Date.now())),a.searchParams.append("apiv","1"),a.searchParams.append("_id",this._storageController.getUniqueId()),a.searchParams.append("e_c",s),a.searchParams.append("e_a",n),a.searchParams.append("e_n",t),ge.isProductionEnvironment()?this._sendRequest(a.toString()):console.log("LT_Tracking Event tracking disabled in dev mode",{actionCategory:s,action:n,actionName:i,trackingUrl:a})}trackEvent(e,t,r,s,n){this._getTrackingUrlForEvent(e,t,r,s,n).then(s=>{ge.isProductionEnvironment()?this._sendRequest(s):console.log("LT_Tracking Event tracking disabled in dev mode",{actionCategory:e,action:t,actionName:r,trackingUrl:s})}).catch(e=>{console.log("LT could not track because:",e&&e.message)})}trackInstall(){this.trackEvent("Action","install",Ee.getPrimaryLanguageCode(navigator.language))}trackActivity(){this._storageController.onReady(()=>{const e=Date.now(),{sessionCount:t,lastActivity:r,lastPing:s}=this._storageController.getStatistics();(!r||e-r>this.ACTIVITY_TRACK_INTERVAL)&&this._storageController.updateStatistics({sessionCount:t+1,lastActivity:e}).then(()=>{this.trackUserActivity()}),(!s||e-s>this.PING_TRACK_INTERVAL)&&this._storageController.updateStatistics({lastPing:e}).then(()=>{this.trackEvent("Stat","ping")})})}trackUserActivity(){this._storageController.onReady(()=>{const{username:e}=this._storageController.getSettings();if(!e||this._storageController.hasCustomServer())return;const t=new FormData;t.append("email",e),t.append("useragent",R.getUserAgentIdentifier()),te("https://languagetool.org/ping",{method:"POST",mode:"cors",credentials:"omit",body:t},1e4).catch(()=>null)})}trackError(e,t,r=""){try{if(R.isUnsupportedBrowser())return;if(this._errorCount++,this._errorCount>6)return;if("string"!=typeof t)return;if(this._loggedErrors)if(this._loggedErrors.length<this.THROTTLE_REQUESTS)this._loggedErrors.push(Date.now());else{const e=Date.now();if(!(e-this._loggedErrors[0]>=this.MAX_TIME))return;this._loggedErrors.push(e),this._loggedErrors.splice(0,1)}else this._loggedErrors=[Date.now()];let s="JS-Error";"message"===e?s="Message-Error":"http"===e?s="HTTP-Error":"other"===e&&(s="Other-Error");let n=V();n=n.replace(/^moz-extension:\/\/[a-z0-9\-]+\//,"moz-extension://xxxx-xxxx-xxxx-xxxx/"),n.match(/(chrome|moz|safari)\-extension:/)||(n=void 0),this.trackEvent(s,t,r||n,n)}catch(e){console.error("Error while logging error from language tool",e)}}trackStat(e,t){0===Math.floor(10*Math.random())&&this.trackEvent("Stat",e,t)}trackPerformanceMetrics(){}trackHealthMetrics(){}trackUserTextChangeMetrics(){}trackFixAllMetrics(){}trackUnderlineMismatchMetrics(){}trackEmptyTextDiffMetrics(){}});const bt=be.create();document.querySelectorAll("link[rel='icon']").forEach(e=>{e.remove()});const Nt=document.createElement("link");function Ot(){const e=Ne.getRemainingDays(),t=document.querySelector("#time-banner"),r=document.querySelector("#time-banner .premium-announcement__time-banner__value");t&&r&&(!e||e<0?t.style.display="none":(t.style.display="",r.textContent=e<2&&e>=1?_e.getMessage("landingPageTrialEndingDaysSingular"):_e.getMessage("landingPageTrialEndingDaysPlural",[Math.round(e)])))}Nt.rel="shortcut icon",Nt.href=De().runtime.getURL("/assets/images/lt-favicon-color_notification.png"),self.matchMedia?.("(prefers-color-scheme:dark)").matches&&(Nt.href=Nt.href.replace("-color","-white")),document.head.append(Nt);const yt=setInterval(()=>{location.href.includes("type=background_tab")&&"visible"!==document.visibilityState&&(Ne.canStart()||(Lt.trackEvent("Action","trial_page_close"),setTimeout(()=>Dt(),500)))},3e3);let xt=!1;function vt(){Ot(),self.matchMedia?.("(prefers-color-scheme:dark)").matches&&(Nt.href=Nt.href.replace("-color","-white")),"visible"!==document.visibilityState||xt||(clearInterval(yt),Lt.trackEvent("Action","trial_page_seen"),xt=!0,Nt.href=Nt.href.replace("_notification",""),bt.updateTrialSettings({hasSeenTrialPage:!0}),async function(){try{await Ne.start("existing"),ke(document,"lt-trial-start-existing"),Lt.trackEvent("Action","trial_start:success","existing"),Ot()}catch(e){location.href.includes("type=background_tab")&&Lt.trackEvent("Action","trial_start:error","existing: "+String(e))}}())}function Dt(){De().runtime.sendMessage({command:"CLOSE_CURRENT_TAB"}).catch(()=>{self.close()})}document.addEventListener("visibilitychange",()=>{setTimeout(vt,1200)}),bt.onReady(()=>{vt()}),Lt.trackEvent("Action","trial_page_opened"),De().runtime.onMessage.addListener(e=>{if("TRIAL_PAGE_PING"===e.command)return Promise.resolve("success")});const kt=new BroadcastChannel("trial_page");kt.postMessage("close_others"),setTimeout(()=>{kt.addEventListener("message",e=>{e&&"close_others"===e.data&&Dt()})},500)})()})();